<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="StruSoftXsd"
    targetNamespace="urn:strusoft"
    xmlns="urn:strusoft"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    version="01.00.000"
>
  <!--
  Main concepts:

  This schema object is the common base schema object of StruSoft XML file format. In StruSoft XML
  every structural distance are in meter, all size of steel joints are millimeter, all forces are in
  kN, all moments are in kNm. Stiffness are in kN/m and kNm/rad. If a value is NULL, in this case
  there is no stiffness or load on that direction. If a support or a connection value is 6e66 (evil's
  number), that connection or support is fixed. If that value is non-zero, the value is equal of the
  stiffness or the load.

  The StruSoft XML always stores partial data. If the whole database is required, 1970.01.01 0:00:00
  base time should be asked. This structure is the minimum of the common elements, all software could
  add their own elements where it is possible (xs:any). All 3rd party tool must store the unused XML
  elements, and must send back if it is necessary (when the entity is changed).

  Data structure: Region groups are built up from regions. Regions built up from contours. The first
  contour in a region is the outline. All other contours are holes. Every contours are built up from
  edges. An edge could be line, arc, parabolic, spline, polyline and circle. The first point in edge
  is the start point, the second is the end point. All other points are internal points, ordered from
  the start point.

  If the edge is circle, there are 2 possibilities to define it: 1) 1 point is defined: center point
  of the circle. Normal vector and radius must also be defined! 2) 3 points are defined: 3 points
  define a circle. The order of these points could modify the normal, or it also can be defined. If
  the edge is arc, there are 2 possibilities to define it: 1) 1 point is defined: this point is the
  center, so the radius, the normal vector, the start angle and the end angle must be defined! Local
  x-axis should be defined. 2) 3 points are defined: start point, an internal curve point and the end
  point.

  Where normal vector is not defined the used default is: x="0" y="0" z="1""

  Coding standard: attributes are prefered to store values: in this way in content handler class,
  "character" member function could be ignored.


  KNOWN ISSUES

  Shell modelled bars: The FEM-Design can only exports the base bars to xml, without haunchs and
  corbels.

  Intermediate sections of bars: On import, the physical alignment of the bars is always "Not
  automatically set", but the set values will be good.

  - - -

  If you have any question: batal@strusoft.hu, Skype: bataci (In Skype only text chat allowed.)
  -->

<!-- basic types-->

  <!-- limited values -->
  <xs:simpleType name="stage_number">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="32767"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="stiffness_max_reached">
    <xs:restriction base="xs:double">
      <xs:enumeration value="6E66" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="from_1e-4_to_10">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1E-4"/>
      <xs:maxInclusive value="10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="mass_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1E-15"/>
      <xs:maxInclusive value="1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="stiffness_data_range">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E15"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="virtbar_data_range">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.00001"/>
      <xs:maxInclusive value="1E15"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="clt_srf"> <!-- clt_stiffness_reduction_factor -->
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.1"/>
      <xs:maxInclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="dot1_to_100_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.1"/>
      <xs:maxInclusive value="100"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="stiffnessdata_type">
    <xs:union memberTypes="stiffness_data_range stiffness_max_reached" />
  </xs:simpleType>

  <!-- relative position in a segment, between 0.0 and 1.0. -->
  <xs:simpleType name="position_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="inner_position_type">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxExclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- relative positions in a line segment or curve segment, between 0.0 and 1.0. -->
  <xs:complexType name="segmentposition_type">
     <xs:attribute name="start"  type="position_type" use="required"/>
     <xs:attribute name="end"    type="position_type" use="required"/>
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="min_half_max_10">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.5"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="min_1_max_10000">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1.0"/>
      <xs:maxInclusive value="10000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="min_1_max_1e7">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1.0"/>
      <xs:maxInclusive value="1E7"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="min_200_max_1e7">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="200.0"/>
      <xs:maxInclusive value="1E7"/>
    </xs:restriction>
  </xs:simpleType>


  <xs:simpleType name="non_neg_max_10">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_50">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_100">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="100"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1000">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_10000">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="10000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e5">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E5"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e7">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E7"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e10">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e15">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E15"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e17">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E17"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e20">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e23">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E23"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_neg_max_1e30">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E30"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_10">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_100">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="100.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_500">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="500.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1000">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_10000">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="10000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e5">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E5"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e8">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E8"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e10">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e17">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E17"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e20">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_max_1e23">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E23"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="quadrant">
    <xs:restriction base="xs:double">
      <xs:enumeration value="0"/>
      <xs:enumeration value="90"/>
      <xs:enumeration value="180"/>
      <xs:enumeration value="270"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="from_1_to_1e8">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1.0"/>
      <xs:maxInclusive value="1E80"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="abs_max_10">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-10.0"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="abs_max_1000">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1000.0"/>
      <xs:maxInclusive value="1000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="abs_max_10000">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-10000.0"/>
      <xs:maxInclusive value="10000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="abs_max_1e20">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1E20"/>
      <xs:maxInclusive value="1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="one_quadrant">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1.5707963267949"/>
    </xs:restriction>
  </xs:simpleType>


  <xs:simpleType name="max_89dot9degree">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1.5690509975429"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_quadrant">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1.5707963267949"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="two_quadrants">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="3.14159265358979"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="abs_two_quadrants">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-3.14159265358979"/>
      <xs:maxInclusive value="3.14159265358979"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="full_circle">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="6.28318530717959"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="orthotropy_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="reduction_factor_type">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="non_negative_double">
     <xs:restriction base="xs:double">
        <xs:minInclusive value="0"/>
     </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="positive_double">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="int_0_to_10">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="int_1_to_3">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="3"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="int_1_to_100">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="100"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="int_1_to_1000">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="1000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="int_1_to_1024">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="1024"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="index_type">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="string15">
    <xs:restriction base="xs:string">
      <xs:pattern value=".{0,15}"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="string63">
    <xs:restriction base="xs:string">
      <xs:pattern value=".{0,63}"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="string255">
    <xs:restriction base="xs:string">
      <xs:pattern value=".{0,255}"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- hexadecimal RGB color code w/o transparency,  hex chars: RRGGBB -->
  <xs:simpleType name="rgb_color_type">
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Fa-f]{6}"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="identifier">
    <xs:restriction base="xs:string">
      <xs:pattern value="@{0,1}[ -#%'-;=?A-&#xfffd;]{0,50}(\.[0-9]{1,6}){0,2}" /> <!-- forbidden chars are '@', '$', '<' and '>,' -->
    </xs:restriction>                                                           <!-- the lead in '@' means locked numbering     -->
  </xs:simpleType>

  <xs:simpleType name="name15">      <!-- for dimtext_type & user defined filters -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{0,15}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name40">      <!-- for spring & bolt data library types -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,40}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="comment_string">  <!-- for load comments -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{0,1023}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name79">      <!-- for load cases, load groups % CS descriptions -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,79}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name80">      <!-- for load cases -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,80}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name159">     <!-- for load combinations -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,159}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name255">    <!-- for moving loads & layers -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,255}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="name256">    <!-- for reference planes & CLT/GLT materials -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{1,256}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="nameMax256"> <!-- for storeys & diagram names -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[ -#%'-;=?A-&#xfffd;]{0,256}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="geometry_text1023"> <!-- From FD21.00.002, for text_type only! -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[&#x0009;&#x000A;&#x000d; -&#xfffd;]{0,1023}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="layer_name"> <!-- From FD21.00.003, for layers only! -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[&#x0009;&#x000A;&#x000d; -&#xfffd;]{1,255}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="material_0base_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxExclusive value="3.403E38"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="material_base_value">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxExclusive value="3.403E38"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="material_nu_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="0.499"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="general_material_base_value">
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0"/>
      <xs:maxInclusive value="1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="general_material_nu_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.001"/>
      <xs:maxInclusive value="0.499"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- timber panel attribute types -->
  <xs:simpleType name="timber_service_class"> <!-- Warning: it is 1, 2 or 3 in the FD's user interface! -->
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="2"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="timber_panel_thickness">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.001"/>
      <xs:maxInclusive value="100.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="delta_section_id">
    <xs:restriction base="xs:string">
      <xs:pattern value="D[R]{0,1}[0-9]{2}-[0-9]{3}" />
    </xs:restriction>
  </xs:simpleType>

  <!--GUID types-->
  <xs:simpleType name="guidtype">     <!-- GUID likes "012345678-9abc-def0-1234-56789ABCDEF0" -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="guidlist_type">
    <xs:list itemType="guidtype"/>
  </xs:simpleType>

  <xs:simpleType name="spec_section_id" >         <!-- for refering complex or Delta sections, from FD20 -->
    <xs:union memberTypes="guidtype  delta_section_id" />  <!-- until FD19 it was just a guidtype -->
  </xs:simpleType>

  <xs:simpleType name="indexed_guid"> <!-- GUID#index, index from 1 to 99999. From FD19 -->
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}#[1-9][0-9]{0,4}"/>
    </xs:restriction>
  </xs:simpleType>

  <!--SHA1 hash type -> result is 160 bit -> 20 byte -> 40 hexa chars-->
  <xs:simpleType name="hashtype">
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-fA-F0-9]{40}"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="direction_2d_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="horizontal"/>
      <xs:enumeration value="vertical"  />
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="guid_list_type">
     <xs:attribute name="guid" type="guidtype" use="required"/>
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="two_guid_list_type">
     <xs:attribute name="first"  type="guidtype" use="required"/>
     <xs:attribute name="second" type="guidtype" use="required"/>
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="three_guid_list_type">
     <xs:attribute name="first"  type="guidtype" use="required"/>
     <xs:attribute name="second" type="guidtype" use="required"/>
     <xs:attribute name="third"  type="guidtype" use="required"/>
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="rectangle_type">
    <xs:sequence>
      <xs:element name="base_corner"  type="point_type_3d" /> <!--  the bottom-left corner of rectangle    -->
      <xs:element name="x_direction"  type="point_type_3d" /> <!--  normal, points from base to the bottom-right corner -->
      <xs:element name="y_direction"  type="point_type_3d" /> <!--  normal, points from base to the top-left corner     -->
    </xs:sequence>
     <xs:attribute name="x_size"      type="positive_max_10000" use="required"/>
     <xs:attribute name="y_size"      type="positive_max_10000" use="required"/>
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- fd-mat types for sections -->
  <xs:simpleType name="fd_mat_type">
    <xs:restriction base="xs:integer">
      <xs:enumeration value="0"/>        <!-- steel, rolled/default steel -->
      <xs:enumeration value="1"/>        <!-- steel, cold worked -->
      <xs:enumeration value="2"/>        <!-- steel, welded      -->
      <xs:enumeration value="3"/>        <!-- concrete           -->
      <xs:enumeration value="4"/>        <!-- timber             -->
      <xs:enumeration value="65535"/>    <!-- unknown            -->
      <xs:enumeration value="-1"/>       <!-- undefined          -->
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="detach_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value=""/>
      <xs:enumeration value="x_tens"/>
      <xs:enumeration value="x_comp"/>
      <xs:enumeration value="y_tens"/>
      <xs:enumeration value="y_comp"/>
      <xs:enumeration value="z_tens"/>
      <xs:enumeration value="z_comp"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="foundationsystems_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="simple"/>
      <xs:enumeration value="surface_support_group"/>
      <xs:enumeration value="from_soil"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="slabfoundationsystems_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="surface_support_group"/>
      <xs:enumeration value="from_soil"/>
    </xs:restriction>
  </xs:simpleType>

  <!--visible line type-->
  <xs:simpleType name="visiblelinetype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="line"/>
      <xs:enumeration value="polyline"/>
      <xs:enumeration value="spline"/>
    </xs:restriction>
  </xs:simpleType>
  <!--edge type-->
  <xs:simpleType name="edgetype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="line"/>
      <xs:enumeration value="arc"/>
<!--  <xs:enumeration value="parabolic"/> - currently not implemented! -->
      <xs:enumeration value="spline"/>      <!--  for solids/polyhedrons only -->
      <xs:enumeration value="polyline"/>
      <xs:enumeration value="circle"/>
    </xs:restriction>
  </xs:simpleType>
  <!--entity modification type-->
  <xs:simpleType name="modification_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="added"/>
      <xs:enumeration value="modified"/>
    </xs:restriction>
  </xs:simpleType>
  <!--entity modification type in axes and storeys,  currently NOT IMPLEMENTED! - ->
  <xs:simpleType name="stored_reference_modification_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="added"/>
      <xs:enumeration value="removed"/>
    </xs:restriction>
  </xs:simpleType> -->
  <!--beam types-->
  <xs:simpleType name="beamtype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="beam"/>
      <xs:enumeration value="column"/>
      <xs:enumeration value="truss"/>
    </xs:restriction>
  </xs:simpleType>
  <!--slab types-->
  <xs:simpleType name="slabtype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="plate"/>
      <xs:enumeration value="wall"/>
    </xs:restriction>
  </xs:simpleType>
  <!--panel type-->
  <xs:simpleType name="paneltype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="concrete"/>
      <xs:enumeration value="timber"  />  <!-- From FD18 -->
    </xs:restriction>
  </xs:simpleType>

  <!--Alignment-->
  <xs:simpleType name="hor_align">
    <xs:restriction base="xs:string">
      <xs:enumeration value="left"/>
      <xs:enumeration value="center"/>
      <xs:enumeration value="right"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ver_align">
    <xs:restriction base="xs:string">
      <xs:enumeration value="top"/>
      <xs:enumeration value="center"/>
      <xs:enumeration value="bottom"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="sf_rc_face">
    <xs:restriction base="xs:string">
      <xs:enumeration value="top"/>
      <xs:enumeration value="bottom"/>
    </xs:restriction>
  </xs:simpleType>
  <!--pre defined section types-->
  <xs:simpleType name="sectiontype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="custom"/>
      <xs:enumeration value="I"/>
      <xs:enumeration value="U"/>
      <xs:enumeration value="rect"/>
      <xs:enumeration value="circle"/>
    </xs:restriction>
  </xs:simpleType>
  <!--standard type-->
  <xs:simpleType name="standardtype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="EC"/>
<!--  <xs:enumeration value="ANSI"/>
      <xs:enumeration value="DIN"/>
      <xs:enumeration value="BS"/>
      <xs:enumeration value="MSZ"/>  -->
      <xs:enumeration value="general"/>
      <!--not applicable-->
      <xs:enumeration value="n/a"/>
    </xs:restriction>
  </xs:simpleType>

  <!--Eurocode country code type-->
  <!--http://en.wikipedia.org/wiki/List_of_international_vehicle_registration_codes-->
  <xs:simpleType name="eurocodetype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="common"/>
      <xs:enumeration value="H"/>
      <xs:enumeration value="RO"/>
      <xs:enumeration value="DK"/>
      <xs:enumeration value="S"/>
      <xs:enumeration value="N"/>
      <xs:enumeration value="FIN"/>
      <xs:enumeration value="GB"/>  <!-- It must be 'GB', not 'UK'! -->
      <xs:enumeration value="D"/>
      <xs:enumeration value="PL"/>
      <xs:enumeration value="TR"/>
      <xs:enumeration value="EST"/>
      <xs:enumeration value="LT"/>
      <xs:enumeration value="NL"/>
      <xs:enumeration value="B"/>
      <xs:enumeration value="E"/>
      <!--not applicable-->
      <xs:enumeration value="n/a"/>
    </xs:restriction>
  </xs:simpleType>

  <!--steel made type-->
  <xs:simpleType name="steelmadetype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="rolled"/>
      <xs:enumeration value="cold_worked"/>
      <xs:enumeration value="welded"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- planar direction type -->
  <xs:simpleType name="direction_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="x"/>
      <xs:enumeration value="y"/>
    </xs:restriction>
  </xs:simpleType>

  <!--Version type-->
  <xs:simpleType name="versiontype">
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{2}\.[0-9]{2}\.[0-9]{3}" />
    </xs:restriction>
  </xs:simpleType>

  <!--empty type-->
  <xs:complexType name="empty_type" />


  <!-- Request - requests are currently not implemented! - ->
  <xs:simpleType name="request_value_type">
    <xs:restriction base="xs:string">
      <!- -displacements- ->
      <xs:enumeration value="e_x"/>
      <xs:enumeration value="e_y"/>
      <xs:enumeration value="e_z"/>
      <xs:enumeration value="e_max"/><!- -global- ->
      <!- -stresses- ->
      <xs:enumeration value="s_x"/>
      <xs:enumeration value="s_y"/>
      <xs:enumeration value="s_z"/>
      <xs:enumeration value="s_xy"/>
      <xs:enumeration value="s_xz"/>
      <xs:enumeration value="s_yz"/>
      <xs:enumeration value="s_1"/>
      <xs:enumeration value="s_2"/>
      <xs:enumeration value="s_3"/>
      <!- -von Mises stress- ->
      <xs:enumeration value="s_eq"/>
      <!- -global stresses- ->
      <xs:enumeration value="s_1_max"/>
      <xs:enumeration value="s_2_max"/>
      <xs:enumeration value="s_3_max"/>
      <xs:enumeration value="s_eq_max"/>
      <!- -internal forces in section- ->
      <xs:enumeration value="F_x"/>
      <xs:enumeration value="F_y"/>
      <xs:enumeration value="F_z"/>
      <xs:enumeration value="M_x"/>
      <xs:enumeration value="M_y"/>
      <xs:enumeration value="M_z"/>
    </xs:restriction>
  </xs:simpleType> -->

  <!--reference type-->
  <xs:complexType name="reference_type" >
    <xs:attribute name="guid" type="guidtype" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--reference list -->
  <xs:complexType name="referencelist_type" >
    <xs:sequence>
      <xs:element name="ref" type="reference_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:attributeGroup name="coord2d">
    <xs:attribute name="x"            type="xs:double"  use="required" />
    <xs:attribute name="y"            type="xs:double"  use="required" />
  </xs:attributeGroup>

  <xs:attributeGroup name="coord3d">
    <xs:attributeGroup ref= "coord2d"/>
    <xs:attribute      name="z"       type="xs:double"  use="required" />
  </xs:attributeGroup>

  <!--minimum attributes of an entity-->
  <xs:attributeGroup name="entity_attribs">
    <xs:attribute name="guid"          type="guidtype"          use="required" />
    <xs:attribute name="last_change"   type="xs:dateTime"       use="required" />
    <xs:attribute name="action"        type="modification_type" use="required" />
    <xs:attribute name="hash_order_id" type="xs:integer"        default="-1"   /> <!-- Currently not used in FD -->
  </xs:attributeGroup>

  <xs:attributeGroup name="optional_entity_attribs">
    <xs:attribute name="guid"          type="guidtype"          default="00000000-0000-0000-0000-000000000000" />
    <xs:attribute name="last_change"   type="xs:dateTime"       default="1970-01-01T00:00:00.000" />
    <xs:attribute name="action"        type="modification_type" default="added" />
    <xs:attribute name="hash_order_id" type="xs:integer"        default="-1" />
  </xs:attributeGroup>

  <!-- Graphical attributes -->
  <xs:attributeGroup name="fillcolor_attribs">
    <xs:attribute name="fillmode"  type="xs:unsignedInt"   default="1" />
    <xs:attribute name="fillcolor" type="xs:unsignedInt"   default="0" />
  </xs:attributeGroup>

  <xs:attributeGroup name="graph_attribs" >
    <xs:attribute name="linetype" type="guidtype"       use="optional" />
    <xs:attribute name="color"    type="xs:unsignedInt" use="optional" />
    <xs:attribute name="pen"      type="xs:double"      use="optional" />
    <xs:attributeGroup ref="fillcolor_attribs" />
  </xs:attributeGroup>

  <!-- start & end -->
  <xs:attributeGroup name="start_end_attribs">
     <xs:attribute name="start"    type="non_negative_double" use="required" />
     <xs:attribute name="end"      type="non_negative_double" use="required" />
  </xs:attributeGroup>

  <xs:attributeGroup name="unchecked_start_end_attribs">
     <xs:attribute name="start"    type="xs:double" use="required" />
     <xs:attribute name="end"      type="xs:double" use="required" />
  </xs:attributeGroup>

  <xs:complexType name="start_end_type">
     <xs:attributeGroup ref="start_end_attribs" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- Eccentricity of beams and columns - from FD15 -->
  <xs:complexType name="ecc_value_type">
    <xs:attribute name="x" type="abs_max_1000" use="required" />
    <xs:attribute name="y" type="abs_max_1000" use="required" />
    <xs:attribute name="z" type="abs_max_1000" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="eccentricity_type">
    <xs:sequence>
      <xs:element name="analytical" type="ecc_value_type" minOccurs="2" maxOccurs="2" />
      <xs:element name="physical"   type="ecc_value_type" minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attribute name="use_default_physical_alignment" type="xs:boolean" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- Connectivity attribs: moves and rotates -->
  <xs:complexType name="connectivity_type">
    <xs:attribute name="m_x"         type="xs:boolean"        use="required" />
    <xs:attribute name="m_x_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if m_x is false, from FD15 -->
    <xs:attribute name="m_y"         type="xs:boolean"        use="required" />
    <xs:attribute name="m_y_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if m_y is false, from FD15 -->
    <xs:attribute name="m_z"         type="xs:boolean"        use="required" />
    <xs:attribute name="m_z_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if m_z is false, from FD15 -->
    <xs:attribute name="r_x"         type="xs:boolean"        use="required" />
    <xs:attribute name="r_x_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if r_x is false, from FD15 -->
    <xs:attribute name="r_y"         type="xs:boolean"        use="required" />
    <xs:attribute name="r_y_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if r_y is false, from FD15 -->
    <xs:attribute name="r_z"         type="xs:boolean"        use="required" />
    <xs:attribute name="r_z_release" type="non_neg_max_1e10"  default="0" />    <!-- valid only if r_z is false, from FD15 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- Plasticity attribs: compression and tension limits -->
  <xs:complexType name="plasticity_type">
    <xs:attribute name="neg"    type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="pos"    type="non_neg_max_1e15"  use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="plasticity_type2">  <!-- from FD20 -->

    <xs:attribute name="neg"    type="non_neg_max_1e15"  use="required" />
    <xs:attribute name="pos"    type="non_neg_max_1e15"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="plasticity_type_3d">
    <xs:attribute name="x_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="x_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="y_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="y_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="z_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="z_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="plasticity3d_force_record"> <!-- from FD20 -->
    <xs:attribute name="force_x_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="force_x_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="force_y_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="force_y_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="force_z_neg"  type="non_neg_max_1e15"  use="optional" />
    <xs:attribute name="force_z_pos"  type="non_neg_max_1e15"  use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="plasticity3d_record"> <!-- from FD20 -->
    <xs:complexContent>
      <xs:extension base="plasticity3d_force_record">
        <xs:attribute name="moment_x_neg"  type="non_neg_max_1e15"  use="optional" />
        <xs:attribute name="moment_x_pos"  type="non_neg_max_1e15"  use="optional" />
        <xs:attribute name="moment_y_neg"  type="non_neg_max_1e15"  use="optional" />
        <xs:attribute name="moment_y_pos"  type="non_neg_max_1e15"  use="optional" />
        <xs:attribute name="moment_z_neg"  type="non_neg_max_1e15"  use="optional" />
        <xs:attribute name="moment_z_pos"  type="non_neg_max_1e15"  use="optional" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>


  <!-- Prestressing: -->
  <xs:complexType name="camber_type">
    <xs:attribute name="force"  type="positive_max_1e10"  use="required" />
    <xs:attribute name="e"      type="positive_max_10000" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>
  <xs:complexType name="camber_type_2d">
    <xs:attribute name="force"  type="positive_max_1e10"  use="required" />
    <xs:attribute name="e_y"    type="abs_max_10000"      use="required" />
    <xs:attribute name="e_z"    type="abs_max_10000"      use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--1D point or vector-->
  <xs:complexType name="point_type_1d">
    <xs:attribute name="x" type="xs:double" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>
  <!--2D points or vectors-->
  <xs:complexType name="point_type_2d">
    <xs:complexContent>
      <xs:extension base="point_type_1d">
        <xs:attribute name="y" type="xs:double" use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!--3D point or vector-->
  <xs:complexType name="point_type_3d">
    <xs:complexContent>
      <xs:extension base="point_type_2d">
        <xs:attribute name="z" type="xs:double" use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!--4D point or vector for thickness points & load forces-->
  <xs:complexType name="location_value">
    <xs:complexContent>
      <xs:extension base="point_type_3d">                              <!-- In case of line loads this is just write only information, it is the same with the endpoints of the line -->
        <xs:attribute name="val" type="abs_max_1e20" use="required" /> <!-- Warning! Revit supports only Â±1e9 kN in case of loads! -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="topbottom_value"> <!-- From FD18 -->
    <xs:complexContent>
      <xs:extension base="point_type_3d">
        <xs:attribute name="top_val"    type="abs_max_1e20" use="required" />
        <xs:attribute name="bottom_val" type="abs_max_1e20" use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- =====  Structure types   ===== -->

  <!-- Physical extent type, from FD18 -->
  <xs:complexType name="phe_type">
    <xs:attribute      name="offset"              type="positive_max_1000"  use="required"  />
    <xs:attribute      name="shrink"              type="xs:boolean"         default="false" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--Edge type-->
  <xs:complexType name="edge_type">
    <xs:sequence>
      <!--ordered internal points, or the center of the circle/arc-->
      <xs:element name="point"           type="point_type_3d"        minOccurs="1" maxOccurs="unbounded"/>
      <!--normal of the curve; it must be used if the curve is arc or circle-->
      <xs:element name="normal"          type="point_type_3d"        minOccurs="0" />
      <!--axis of base line (the value default is the x axis [1.0,0.0,0.0]) angles are measured from this direction-->
      <xs:element name="x_axis"          type="point_type_3d"        minOccurs="0" />
      <xs:element name="edge_connection" type="ec_type"              minOccurs="0" maxOccurs="1"/>
      <xs:element name="physical_extent" type="phe_type"             minOccurs="0" maxOccurs="1"/> <!-- From FD18 -->
    </xs:sequence>
    <xs:attribute name="type"        type="edgetype"  use="required" />
    <xs:attribute name="radius"      type="xs:double" use="optional" />
    <xs:attribute name="start_angle" type="xs:double" use="optional" />
    <xs:attribute name="end_angle"   type="xs:double" use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="opt_localsys_type">
    <xs:sequence>
      <xs:element name="local_pos"        type="point_type_3d" />
      <xs:element name="local_x"          type="point_type_3d" />
      <xs:element name="local_y"          type="point_type_3d" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="localsys_type">
    <xs:sequence>
      <xs:element name="centre"           type="point_type_3d" />
      <xs:element name="local_x"          type="point_type_3d" />
      <xs:element name="local_y"          type="point_type_3d" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="untested_localsys_type">
    <xs:sequence>
      <xs:element name="pos"              type="point_type_3d" />
      <xs:element name="x"                type="point_type_3d" />
      <xs:element name="y"                type="point_type_3d" />
      <xs:element name="z"                type="point_type_3d" />
    </xs:sequence>
  </xs:complexType>

  <!--Contour type-->
  <xs:complexType name="contour_type">
    <xs:sequence>
      <xs:element name="edge" type="edge_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <!--Region type-->
  <xs:complexType name="region_type">
    <xs:sequence>
      <xs:element name="contour" type="contour_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <!--Drawing Region type-->
  <xs:complexType name="drawing_region_type">
    <xs:sequence>
      <xs:element name="contour" type="contour_type" minOccurs="1" maxOccurs="unbounded" />
      <xs:element name="style"   type="style_type"   minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute name="guid"   type="guidtype"      use="optional"/>  <!-- but required from FD21 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--Region group type-->
  <xs:complexType name="region_group_type">
    <xs:sequence>
      <xs:element name="region" type="region_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <xs:simpleType name="stiffness_factor_data">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.001"/>
      <xs:maxInclusive value="10"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="slab_stiffness_record">
    <xs:attribute name="bending_1_1" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="bending_2_2" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="bending_1_2" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="membran_1_1" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="membran_2_2" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="membran_1_2" type="stiffness_factor_data" use="required"/>
    <xs:attribute name="shear_1_3"   type="stiffness_factor_data" use="required"/>
    <xs:attribute name="shear_2_3"   type="stiffness_factor_data" use="required"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="slab_stiffness_factors">
    <xs:sequence>
      <xs:element name="factors" type="slab_stiffness_record" minOccurs="10" maxOccurs="10" />
    </xs:sequence>
  </xs:complexType>

  <!--slab part-->
  <xs:complexType name="slab_part_type">
    <xs:sequence>
      <xs:element name="contour"                type="contour_type"   minOccurs="1" maxOccurs="unbounded" />
      <xs:element name="thickness"              type="location_value" minOccurs="1" maxOccurs="3" />
      <xs:element name="local_pos"              type="point_type_3d" />
      <xs:element name="local_x"                type="point_type_3d" />
      <xs:element name="local_y"                type="point_type_3d" />
      <xs:element name="stiffness_modifiers"    type="slab_stiffness_factors" minOccurs="0" maxOccurs="1" />   <!-- From FD20 -->
      <xs:element name="end"                    type="empty_type" />
      <!--additional elements could be added by FEM Design or RevIt-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"             type="identifier"       use="optional" />
    <xs:attribute      name="complex_material" type="guidtype"         use="required" />
    <xs:attribute      name="alignment"        type="ver_align"        use="required" />
    <xs:attribute      name="align_offset"     type="abs_max_1e20"     use="optional" />
    <xs:attribute      name="ortho_alfa"       type="two_quadrants"    use="optional" />
    <xs:attribute      name="ortho_ratio"      type="orthotropy_type"  use="optional" />
    <xs:attribute      name="ecc_calc"         type="xs:boolean"       default="false" />
    <xs:attribute      name="ecc_crack"        type="xs:boolean"       default="false" />
    <xs:attribute      name="refracting_angle" type="one_quadrant"     use="optional"  /> <!--default="1.74532925199" -->
    <xs:attribute      name="mesh_size"        type="non_neg_max_1e20" default="0.0"   /> <!-- average surface element size, from FD19 -->
    <xs:attribute      name="stage"            type="stage_number"     default="1" />     <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--buckling types-->
  <xs:simpleType name="bar_buckling_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="flexural_weak"/>
      <xs:enumeration value="flexural_stiff"/>
      <xs:enumeration value="pressured_flange"/>          <!-- only for steel bars, it is the top flange from FD18 -->
      <xs:enumeration value="lateral_torsional"/>         <!-- only for timber bars -->
      <xs:enumeration value="pressured_bottom_flange" />  <!-- From FD18; only for steel bars -->
    </xs:restriction>
  </xs:simpleType>

  <!-- Bar buckling record -->
  <xs:complexType name="buckling_record">
    <xs:choice>
      <xs:sequence>
        <xs:element name="start_point" type="point_type_3d" />
        <xs:element name="end_point"   type="point_type_3d" />
      </xs:sequence>
      <!-- new choice from FD18 -->
      <xs:sequence>
        <xs:element name="position"    type="segmentposition_type" />
      </xs:sequence>
    </xs:choice>
    <xs:attribute name="type"                   type="bar_buckling_type" use="required"  />
    <xs:attribute name="beta"                   type="non_neg_max_100"   default="1.0"   />
    <xs:attribute name="continously_restrained" type="xs:boolean"        default="false" />
    <xs:attribute name="cantilever"             type="xs:boolean"        default="false" />   <!-- valid for timber bars only -->
    <xs:attribute name="load_position"          type="ver_align"         default="top"   />
    <xs:attribute name="sway"                   type="xs:boolean"        default="false" />   <!-- valid for flexural types only,  from FD18 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- Bar buckling data -->
  <xs:complexType name="buckling_data_type">
    <xs:sequence>
      <xs:element name="buckling_length" type="buckling_record" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <!-- Apex buckling data -->
  <xs:complexType name="apex_buckling_type">
    <xs:sequence>
      <xs:element name="buckling_length" type="buckling_record" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <!-- shell buckling -->
  <xs:complexType name="shell_buckling_type">
    <xs:sequence>
      <xs:element name="direction"   type="point_type_3d" />
      <xs:element name="contour"     type="contour_type"  />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute name="base_shell"  type="guidtype"           use="required" />
    <xs:attribute name="beta"        type="non_neg_max_100"    default="0"    />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- COMPOSITE parts, from FD 17.000.02 -->
  <xs:simpleType name="composite_prop_name">
    <xs:restriction base="xs:string">
      <xs:enumeration value="b"/>
      <xs:enumeration value="b_eff"/>
      <xs:enumeration value="bb"/>
      <xs:enumeration value="bc"/>
      <xs:enumeration value="bf"/>
      <xs:enumeration value="bt"/>
      <xs:enumeration value="cy"/>
      <xs:enumeration value="cz"/>
      <xs:enumeration value="d"/>
      <xs:enumeration value="d1"/> <!-- From FD20 -->
      <xs:enumeration value="d2"/> <!-- From FD20 -->
      <xs:enumeration value="fill_beam"/>
      <xs:enumeration value="h"/>
      <xs:enumeration value="hc"/>
      <xs:enumeration value="name"/>
      <xs:enumeration value="o1"/>
      <xs:enumeration value="o2"/>
      <xs:enumeration value="t"/>
      <xs:enumeration value="tf"/>
      <xs:enumeration value="tfb"/>
      <xs:enumeration value="tft"/>
      <xs:enumeration value="th"/>
      <xs:enumeration value="tw"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="composite_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="beam_a"/>
      <xs:enumeration value="beam_b"/>
      <xs:enumeration value="beam_p"/>
      <xs:enumeration value="column_a"/>
      <xs:enumeration value="column_c"/>
      <xs:enumeration value="column_d"/>
      <xs:enumeration value="column_e"/>
      <xs:enumeration value="column_f"/>
      <xs:enumeration value="column_g"/> <!-- From FD20 -->
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="composite_part_type">
    <xs:attribute name="material"      type="guidtype"   use="required" />
    <xs:attribute name="section"       type="guidtype"   use="required" />
    <xs:attribute name="cog_offset_x"  type="xs:double"  default="0" />
    <xs:attribute name="cog_offset_y"  type="xs:double"  default="0" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="composite_prop_type">
    <xs:attribute name="name"  type="composite_prop_name"    use="required" />
    <xs:attribute name="value" type="xs:string"              use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="composite_data">
    <xs:sequence>
      <xs:element name="part"     type="composite_part_type" minOccurs="2" maxOccurs="8" /> <!-- parts must be in composite's original order! -->
      <xs:element name="property" type="composite_prop_type" minOccurs="0" maxOccurs="11" />
    </xs:sequence>
    <xs:attribute      name="type" type="composite_type" use="required" />
    <xs:attributeGroup ref="entity_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- composite section type, from FD 17.000.02 -->
  <xs:complexType name="composite_section_type">
    <xs:attribute name="guid" type="guidtype" use="required"/>
    <xs:attribute name="pos"  type="position_type" use="required"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- complex composite type, from FD 17.000.02 -->
  <xs:complexType name="complex_composite_type">
    <xs:sequence>
      <xs:element name="composite_section" type="composite_section_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="bar_stiffness_factor_record">
    <xs:attribute name="cross-sectional_area"   type="stiffness_factor_data" use="required"/>
    <xs:attribute name="shear_area_direction_1" type="stiffness_factor_data" default="1.0"/>  <!-- it is not used in the case of trusses -->
    <xs:attribute name="shear_area_direction_2" type="stiffness_factor_data" default="1.0"/>  <!-- it is not used in the case of trusses -->
    <xs:attribute name="torsional_constant"     type="stiffness_factor_data" default="1.0"/>  <!-- it is not used in the case of trusses -->
    <xs:attribute name="inertia_about_axis_1"   type="stiffness_factor_data" default="1.0"/>  <!-- it is not used in the case of trusses -->
    <xs:attribute name="inertia_about_axis_2"   type="stiffness_factor_data" default="1.0"/>  <!-- it is not used in the case of trusses -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="bar_stiffness_factors">
    <xs:sequence>
      <xs:element name="factors" type="bar_stiffness_factor_record" minOccurs="10" maxOccurs="10" />
    </xs:sequence>
  </xs:complexType>

  <!--Bar part type-->
  <xs:complexType name="bar_part_type">
    <xs:sequence>
      <xs:element name="curve"        type="edge_type" />
      <xs:element name="local-y"      type="point_type_3d" />
      <!--You must add stiffness for beam and coloumn (and not for truss)-->
      <xs:element name="connectivity"  type="connectivity_type"    minOccurs="0" maxOccurs="2" />
      <xs:element name="eccentricity"  type="eccentricity_type"    minOccurs="0" maxOccurs="1" />  <!-- minOccurs="0" just for compatibility reasons, but must have from FD15! -->
      <xs:element name="buckling_data" type="buckling_data_type"   minOccurs="0" maxOccurs="1" />  <!-- From FD15.00.004, only for simple import-export, not for update;
                                                                                                   updateable from FD18,
                                                                                                   there are no bucklings for composite bars and Delta beams. -->
      <xs:element name="camber_simulation"    type="camber_type_2d"         minOccurs="0" maxOccurs="1" />   <!-- From FD17 -->
      <xs:element name="stiffness_modifiers"  type="bar_stiffness_factors"  minOccurs="0" maxOccurs="1" />   <!-- From FD20, only for beams & columns -->
      <xs:element name="end"                  type="empty_type" />
      <!--additional elements could be added by WIN-Statik-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                     type="identifier"      default="" />      <!-- empty names generates "C" or "B" (column/bar) IDs in FD -->
    <xs:attribute      name="complex_material"         type="guidtype"        use="optional" />  <!-- But required for simple (non-composite & non-Delta) bars! -->
    <xs:attribute      name="complex_section"          type="spec_section_id" use="optional" />  <!-- But required for non-composite bars, including Delta beams from FD20! -->
    <xs:attribute      name="complex_composite"        type="guidtype"        use="optional" />  <!-- But required for composite bars! - from FD 17.000.02 -->
    <xs:attribute      name="made"                     type="steelmadetype"   default="rolled" />
    <xs:attribute      name="ecc_mode"                 type="xs:boolean"      default="false" />
    <xs:attribute      name="ecc_calc"                 type="xs:boolean"      default="false" /> <!-- this value is always 'true' from FD15 -->
    <xs:attribute      name="ecc_crack"                type="xs:boolean"      default="false" />
    <xs:attribute      name="first_order_analysis_U"   type="xs:boolean"      default="false" /> <!-- From FD21, only for beams & columns! -->
    <xs:attribute      name="first_order_analysis_Sq"  type="xs:boolean"      default="false" /> <!-- From FD21, only for beams & columns! -->
    <xs:attribute      name="first_order_analysis_Sf"  type="xs:boolean"      default="false" /> <!-- From FD21, only for beams & columns! -->
    <xs:attribute      name="first_order_analysis_Sc"  type="xs:boolean"      default="false" /> <!-- From FD21, only for beams & columns! -->
    <xs:attribute      name="stage"                    type="stage_number"    default="1" />     <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="truss_limit_type">
    <xs:attribute      name="value"         type="non_neg_max_1e20" use="required"  />
  </xs:complexType>

  <xs:complexType name="simple_truss_capacity_type">
    <xs:sequence>
      <xs:element name="limit_force"        type="truss_limit_type" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="simple_truss_behaviour_type">
    <xs:choice>
      <xs:element name="elastic"            type="empty_type" />
      <xs:element name="brittle"            type="simple_truss_capacity_type" />
      <xs:element name="plastic"            type="simple_truss_capacity_type" />
    </xs:choice>
  </xs:complexType>

  <xs:complexType name="simple_truss_chr_type">
    <xs:sequence>
      <xs:element name="compression"        type="simple_truss_behaviour_type" />
      <xs:element name="tension"            type="simple_truss_behaviour_type" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="truss_capacity_type">
    <xs:sequence>
      <xs:element name="limit_force"        type="truss_limit_type" minOccurs="9" maxOccurs="9" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="truss_behaviour_type">
    <xs:choice>
      <xs:element name="elastic"            type="empty_type" />
      <xs:element name="brittle"            type="truss_capacity_type" />
      <xs:element name="plastic"            type="truss_capacity_type" />
    </xs:choice>
  </xs:complexType>

  <xs:complexType name="truss_chr_type">
    <xs:sequence>
      <xs:element name="compression"        type="truss_behaviour_type" />
      <xs:element name="tension"            type="truss_behaviour_type" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="apex_type">
    <xs:sequence>
      <xs:element name="center"             type="point_type_3d" />
      <xs:element name="intersection_point" type="point_type_3d" />
      <xs:element name="buckling_data"      type="apex_buckling_type"   minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attribute      name="r"             type="dot1_to_100_type" use="required"  />
    <xs:attribute      name="rounded_edge"  type="xs:boolean"       default="false" />
    <xs:attribute      name="stage_A"       type="stage_number"     default="1" />  <!-- From FD21.00.003 -->
    <xs:attribute      name="stage_B"       type="stage_number"     default="1" />  <!-- From FD21.00.003 -->
  </xs:complexType>

  <xs:simpleType name="shell_model_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="none"/>
      <xs:enumeration value="simple"  /> <!-- shell model contains only shell elements -->
      <xs:enumeration value="complex" /> <!-- fictitious bars on the boundary of the shell model -->
    </xs:restriction>
  </xs:simpleType>

  <!--Bar type-->
  <xs:complexType name="bar_type">
    <xs:sequence>

      <xs:choice>
        <xs:sequence> <!-- The original bar sequence. Two or more bar parts for old apexed beams compatibility only, otherwise USE ONLY ONE! -->
          <xs:element name="bar_part"       type="bar_part_type"  minOccurs="1" maxOccurs="unbounded" />
        </xs:sequence>

        <xs:sequence> <!-- new choice from FD20,  only for apexed beams! -->
          <xs:element name="apex"           type="apex_type"      minOccurs="1" maxOccurs="unbounded" />
          <xs:element name="bar_part"       type="bar_part_type"  minOccurs="2" maxOccurs="unbounded" />
        </xs:sequence>
      </xs:choice>

      <xs:element name="truss_behaviour"    type="truss_chr_type" minOccurs="0" maxOccurs="1" />   <!-- From FD20, used only for trusses -->
      <xs:element name="end"                type="empty_type" />
        <!--additional elements could be added by WIN-Statik-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                    type="identifier"        use="optional"  /> <!-- From FD 17.00.002, the imported value is currently not used in the FD. -->
    <xs:attribute      name="type"                    type="beamtype"          use="required"  />
    <xs:attribute      name="shell_model"             type="shell_model_type"  default="none"  /> <!-- From FD20, only for beams & columns, not for trusses -->
    <xs:attribute      name="stage"                   type="stage_number"      default="1" />     <!-- From FD21.00.003 -->

    <!-- The next four attributes used for trusses in pre-FD20 files. This data DOES NOT USED when "truss_behaviour" element was set -->
    <xs:attribute      name="maxforce"                type="non_neg_max_1e30"  use="optional"  /> <!-- For trusses only. From FD17 it is used as Compression's limited capacity -->
    <xs:attribute      name="compressions_plasticity" type="xs:boolean"        default="false" /> <!-- From FD17, it used if 'maxforce' exists only -->
    <xs:attribute      name="tension"                 type="non_neg_max_1e30"  use="optional"  /> <!-- From FD17, for trusses only -->
    <xs:attribute      name="tensions_plasticity"     type="xs:boolean"        default="false" /> <!-- From FD17, it used if 'tension' exists only -->

    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- Hidden bar type, from FD18 -->
  <xs:complexType name="hidden_bar_type">
    <xs:sequence>
      <xs:element name="rectangle"     type="rectangle_type" />
      <xs:element name="start"         type="point_type_3d"      minOccurs="0" maxOccurs="1" /> <!-- From FD21 and required from FD21! -->
      <xs:element name="buckling_data" type="buckling_data_type" minOccurs="0" maxOccurs="1" />
      <xs:element name="end"           type="empty_type" />
      <!--additional elements-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                    type="identifier"        use="optional"  />
    <xs:attribute      name="base_shell"              type="guidtype"          use="required"  />
    <xs:attribute      name="axis_in_longer_side"     type="xs:boolean"        default="true"  /> <!-- From FD21 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--Slab type-->
  <xs:complexType name="slab_type">
    <xs:sequence>
      <xs:element name="slab_part" type="slab_part_type" minOccurs="1" maxOccurs="unbounded" />
      <xs:element name="end"       type="empty_type" />
      <!--additional elements could be added by FEM Design or RevIt-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"       type="identifier"        use="optional" />   <!-- From FD 17.00.002, the imported value is currently not used in the FD. -->
    <xs:attribute      name="type"       type="slabtype"          use="required" />
    <xs:attribute      name="stage"      type="stage_number"      default="1" />      <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="simple_stiffness_type">
    <xs:sequence>
      <xs:element name="mov_x" type="stiff_base_type" />
      <xs:element name="rot_x" type="stiff_base_type" />
      <xs:element name="mov_y" type="stiff_base_type" />
      <xs:element name="rot_y" type="stiff_base_type" />
      <xs:element name="mov_z" type="stiff_base_type" />
      <xs:element name="rot_z" type="stiff_base_type" />
    </xs:sequence>
    <xs:attribute name="detach" type="detach_type" default="" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="stiffness_matrix_2_type">
    <xs:attribute name="xz" type="positive_max_1e20" use="required" />
    <xs:attribute name="yz" type="positive_max_1e20" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="stiffness_matrix_4_type">
    <xs:attribute name="xx"  type="positive_max_1e20"     use="required" />
    <xs:attribute name="xy"  type="non_neg_max_1e20"      use="required" />
    <xs:attribute name="yy"  type="positive_max_1e20"     use="required" />
    <xs:attribute name="gxy" type="positive_max_1e20"     use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="stiffness_type">                  <!-- From FD18 -->
    <xs:attribute name="x_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="x_pos"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="y_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="y_pos"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="z_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="z_pos"  type="stiffnessdata_type"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <xs:complexType name="stiffness_motion_record">           <!-- From FD20 -->
    <xs:attribute name="Kx_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="Kx_pos"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="Ky_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="Ky_pos"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="Kz_neg"  type="stiffnessdata_type"  use="required" />
    <xs:attribute name="Kz_pos"  type="stiffnessdata_type"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="stiffness_record">                  <!-- From FD20 -->
    <xs:complexContent>
      <xs:extension base="stiffness_motion_record">
        <xs:attribute name="Cx_neg"  type="stiffnessdata_type"  use="required" />
        <xs:attribute name="Cx_pos"  type="stiffnessdata_type"  use="required" />
        <xs:attribute name="Cy_neg"  type="stiffnessdata_type"  use="required" />
        <xs:attribute name="Cy_pos"  type="stiffnessdata_type"  use="required" />
        <xs:attribute name="Cz_neg"  type="stiffnessdata_type"  use="required" />
        <xs:attribute name="Cz_pos"  type="stiffnessdata_type"  use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>


  <xs:complexType name="stiffness_with_friction">
    <xs:complexContent>
       <xs:extension base="simple_stiffness_type">
         <xs:attribute name="friction" type="reduction_factor_type" default="0.3" />
         <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- ====================  Timber panel types  ========================================-->

  <!--Internal panel type-->
  <xs:complexType name="internal_panel_type">
    <xs:sequence>
      <xs:element name="region"    type="region_type"      minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute name="guid"      type="guidtype"         use="required" />
    <xs:attribute name="mesh_size" type="non_neg_max_1e20" default="0.0"  /> <!-- average surface element size, from FD19 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--Timber application data type -->
  <xs:complexType name="timber_factors_type">
    <xs:attribute name="gamma_m_u"          type="positive_max_10"      use="required" />
    <xs:attribute name="gamma_m_as"         type="positive_max_10"      use="required" />
    <xs:attribute name="kdef_U"             type="non_neg_max_10"       use="required" />
    <xs:attribute name="kdef_Sq"            type="non_neg_max_10"       use="required" />
    <xs:attribute name="kdef_Sf"            type="non_neg_max_10"       use="required" />
    <xs:attribute name="kdef_Sc"            type="non_neg_max_10"       use="required" />
    <xs:attribute name="service_class"      type="timber_service_class" use="required" />
    <xs:attribute name="system_factor"      type="positive_max_10"      use="required" />
    <xs:anyAttribute                        processContents="skip"/>
  </xs:complexType>

  <xs:attributeGroup name="old_orthotropic_appdata" >  <!-- Required only for FD18's simple timber panels (this is part of timber_data element from FD19) -->
    <xs:attribute name="gamma_m_u"     type="positive_max_10"      use="optional" />
    <xs:attribute name="gamma_m_as"    type="positive_max_10"      use="optional" />
    <xs:attribute name="service_class" type="timber_service_class" use="optional" />
    <xs:attribute name="system_factor" type="positive_max_10"      use="optional" />
  </xs:attributeGroup>


  <!--Panel type-->
  <xs:complexType name="panel_type">
    <xs:sequence>
      <xs:element name="region"       type="region_type" />
      <xs:element name="direction"    type="point_type_3d" />
      <xs:element name="anchor_point" type="point_type_3d" />
      <!-- Local system's origin, if it's not same as anchor point: -->
      <xs:element name="local_pos"    type="point_type_3d"      minOccurs="0" maxOccurs="1" /> <!-- From FD19.00.004, -->

      <xs:element name="internal_panels" minOccurs="0">
         <xs:complexType>
           <xs:sequence>
             <xs:element name="item" type="internal_panel_type" minOccurs="1" maxOccurs="unbounded"/> <!-- internal panels in allocation order! -->
           </xs:sequence>
         <xs:attribute   name="stage" type="stage_number"      default="1" />     <!-- From FD21.00.003 -->
         </xs:complexType>
      </xs:element>

      <xs:choice>
          <!-- From FD19, for all timber (orthotropic/CLT/GLC) panels! -->
        <xs:element name="timber_application_data" >
           <xs:complexType>
             <xs:sequence>
               <xs:element name="factors"                     type="timber_factors_type" minOccurs="0" maxOccurs="1" /> <!-- Required for orthotropic/CLT panels! -->
             </xs:sequence>
             <xs:attribute      name="panel_type"             type="guidtype"         use="required" />
             <xs:attribute      name="shear_coupling"         type="xs:boolean"       default="true" /> <!-- only for CLT/GLC panels -->
             <xs:attribute      name="glued_narrow_sides"     type="xs:boolean"       default="true" /> <!-- only for CLT panels     -->
             <xs:anyAttribute   processContents="skip"/>
           </xs:complexType>
        </xs:element>
        <!-- From FD17, for hollowcore panels -->
        <xs:element name="camber_simulation"                  type="camber_type"      minOccurs="0" maxOccurs="1" />
      </xs:choice>

      <xs:choice>
        <xs:sequence>
          <xs:element name="internal_plastic_limit_forces"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="internal_plastic_limit_moments" type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="external_plastic_limit_forces"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="external_plastic_limit_moments" type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="internal_stiffness"             type="stiffness_with_friction" />
          <xs:element name="external_stiffness"             type="stiffness_with_friction" />
        </xs:sequence>
        <!-- new choice from FD18 -->
        <xs:sequence>
          <xs:choice>  <!-- it needs only for 'Panel' Analytical model  -->
            <xs:element name="internal_rigidity"              type="rigidity_data_type3" minOccurs="0" maxOccurs="1" />
            <xs:element name="internal_predefined_rigidity"   type="reference_type"      minOccurs="0" maxOccurs="1" />
            <!-- new choice from FD20 -->
            <xs:element name="internal_rigidity_group"        type="rigidity_group_type3" minOccurs="0" maxOccurs="1" />
          </xs:choice>

          <xs:choice>  <!-- it needs for all type of panels             -->
            <xs:element name="external_rigidity"              type="rigidity_data_type3" />
            <xs:element name="external_predefined_rigidity"   type="reference_type" />
            <!-- new choice from FD20 -->
            <xs:element name="external_rigidity_group"        type="rigidity_group_type3" />
          </xs:choice>

        </xs:sequence>
      </xs:choice>

      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="type"                  type="paneltype"         use="required"  />
    <xs:attribute      name="complex_material"      type="guidtype"          use="optional"  /> <!-- but required for hollowcore panels! -->
    <xs:attribute      name="complex_section"       type="guidtype"          use="optional"  /> <!-- but required for hollowcore panels! -->
    <xs:attribute      name="name"                  type="identifier"        default=""      />
    <xs:attribute      name="panelname"             type="xs:string"         use="optional"  />
    <xs:attribute      name="in_situ_fabricated"    type="xs:boolean"        default="false" /> <!-- From FD14 -->
    <xs:attribute      name="gap"                   type="xs:double"         use="required"  /> <!-- Import's AUTOCORRECTION: always 0.0 in cases of 'in_situ_fabricated' panels -->
    <xs:attribute      name="orthotropy"            type="orthotropy_type"   default="1.0"   /> <!-- Import's AUTOCORRECTION: always default in cases of 'in_situ_fabricated' panels -->
    <xs:attribute      name="thickness"             type="xs:double"         use="required"  /> <!-- hollowcore panels: import/export, timber panels: export only -->
    <xs:attribute      name="alignment"             type="ver_align"         use="required"  />
    <xs:attribute      name="align_offset"          type="xs:double"         use="optional"  />
    <xs:attribute      name="ecc_calc"              type="xs:boolean"        default="false" />
    <xs:attribute      name="ecc_crack"             type="xs:boolean"        default="false" /> <!-- valid only for hollowcore panels -->
    <xs:attribute      name="internal_moving_local" type="xs:boolean"        default="false" /> <!-- needs only for 'Panel' Analytical model  -->
    <xs:attribute      name="external_moving_local" type="xs:boolean"        default="false" />
    <xs:attribute      name="forced_plate"          type="xs:boolean"        default="false" /> <!-- From FD14; ONLY FOR standing slabs! -->
    <xs:attribute      name="panel_width"           type="positive_max_100"  default="1.5"   /> <!-- From FD18; valid only for timber panels! -->
    <xs:attribute      name="panel_type"            type="guidtype"          use="optional"  /> <!-- Only for FD18's timber panels (this is part of timber_data element from FD19) -->
    <xs:attribute      name="ignored_distance"      type="non_neg_max_10000" default="0.02"  /> <!-- From FD19.00.005; only for hollowcore panels -->
    <xs:attribute      name="ignored_in_stability"  type="xs:boolean"        default="false" /> <!-- From FD19.00.006; only for hollowcore panels -->
    <xs:attribute      name="stage"                 type="stage_number"      default="1" />     <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--=============  Edge Connection types  ==========================================-->
  <xs:attributeGroup name="ec_attribs">
    <xs:attribute    name="moving_local"       type="xs:boolean"       default="false" />
    <xs:attribute    name="joined_start_point" type="xs:boolean"       default="false" />
    <xs:attribute    name="joined_end_point"   type="xs:boolean"       default="false" />
  </xs:attributeGroup>

  <xs:complexType name="ec_type">
    <xs:choice>
      <xs:sequence> <!-- custom edge connection type, the only EC type before FD18 -->
        <xs:element name="stiffness"              type="stiffness_with_friction" />
        <xs:element name="plastic_limit_forces"   type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
        <xs:element name="plastic_limit_moments"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
      </xs:sequence>
      <!-- new choices from FD18 -->
      <xs:element   name="rigidity"               type="rigidity_data_type3" />
      <xs:element   name="predefined_rigidity"    type="reference_type" />
      <!-- new choice from FD20 -->
      <xs:element   name="rigidity_group"         type="rigidity_group_type3"/>
    </xs:choice>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                type="identifier"         default="CE" />
    <xs:attributeGroup ref="ec_attribs" />
    <xs:attribute      name="stage"               type="stage_number"       default="1" />  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- connected edge list item from FD18 -->
  <xs:complexType name="ec_edge_list_item_type">
    <xs:sequence>
       <xs:element name="edge_connection"         type="ec_type"   />
    </xs:sequence>
    <xs:attribute    name="edge_index"            type="xs:unsignedShort"   use="required" />
    <xs:anyAttribute processContents="skip" />
  </xs:complexType>

  <!--====  Unified library types (rigidity, timber panel etc.), from FD18  =========================-->
  <xs:attributeGroup name="lib_base_attribs" >
    <xs:attribute      name="name"                type="name40"             use="required" />
    <xs:attributeGroup ref ="entity_attribs" />
  </xs:attributeGroup>

  <xs:complexType name="rigidity_data_type0">
    <xs:sequence>
      <xs:element   name="motions"                type="stiffness_type" />
      <xs:element   name="plastic_limit_forces"   type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="rigidity_data_type1">
    <xs:complexContent>
      <xs:extension   base="rigidity_data_type0">
        <xs:attribute name="detach"               type="detach_type"        default="" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="pile_rigidity_group_type">
    <xs:sequence>
      <xs:element name="springs"                  type="stiffness_motion_record"    minOccurs="10" maxOccurs="10" />
      <xs:element name="plastic_limits"           type="plasticity3d_force_record"  minOccurs="10" maxOccurs="10" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="pile_rigidity_group_type1">
    <xs:sequence>
        <xs:element name="spring"                type="stiff_base_type" />
        <xs:element name="plastic_limit_forces"  type="plasticity_type" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="pile_rigidity_group_type2">
    <xs:sequence>
        <xs:element name="spring"                type="stiff_base_type"             minOccurs="10" maxOccurs="10" />
        <xs:element name="plastic_limit_forces"  type="plasticity_type"             minOccurs="10" maxOccurs="10" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="rigidity_group_type0">
    <xs:sequence>
      <xs:element name="springs"                  type="stiffness_motion_record"    minOccurs="10" maxOccurs="10" />
      <xs:element name="plastic_limits"           type="plasticity3d_force_record"  minOccurs="4"  maxOccurs="4" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="rigidity_group_type1">
    <xs:complexContent>
      <xs:extension   base="rigidity_group_type0">
        <xs:attribute name="detach"               type="detach_type"        default="" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="rigidity_datalib_type1">
    <xs:choice>
      <xs:element name="rigidity"                 type="rigidity_data_type1" />
      <!-- choice from FD20 -->
      <xs:element name="rigidity_group"           type="rigidity_group_type1" />
    </xs:choice>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType> <!--_____________________________________________________________________________-->

  <xs:complexType name="rigidity_data_type2">
    <xs:complexContent>
      <xs:extension base="rigidity_data_type1">
        <xs:sequence>
          <xs:element name="rotations"             type="stiffness_type" />
          <xs:element name="plastic_limit_moments" type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="rigidity_group_type2">
    <xs:sequence>
      <xs:element name="springs"                  type="stiffness_record"    minOccurs="10" maxOccurs="10" />
      <xs:element name="plastic_limits"           type="plasticity3d_record" minOccurs="4"  maxOccurs="4" />
    </xs:sequence>
    <xs:attribute   name="detach"                 type="detach_type"        default="" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="rigidity_datalib_type2">
    <xs:choice>
      <xs:element name="rigidity"                type="rigidity_data_type2" />
      <!-- choice from FD20 -->
     <xs:element name="rigidity_group"           type="rigidity_group_type2" />
    </xs:choice>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType> <!--_____________________________________________________________________________-->

  <xs:complexType name="rigidity_data_type3">
    <xs:complexContent>
      <xs:extension base="rigidity_data_type2">
        <xs:attribute name="friction"              type="reduction_factor_type" default="0.3" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="rigidity_group_type3">
    <xs:complexContent>
      <xs:extension base="rigidity_group_type2">
        <xs:attribute name="friction"              type="reduction_factor_type" default="0.3" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="rigidity_datalib_type3">
    <xs:choice>
      <xs:element name="rigidity"                 type="rigidity_data_type3" />
      <!-- choice from FD20 -->
      <xs:element name="rigidity_group"           type="rigidity_group_type3" />
    </xs:choice>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType> <!--_____________________________________________________________________________-->

  <!-- Timber panel types -->

  <xs:attributeGroup name="service_class_items">
    <xs:attribute name="kdef"               type="positive_max_1e5"   use="required" />
    <xs:attribute name="kmod_permanent"     type="positive_max_1e5"   use="required" />
    <xs:attribute name="kmod_long_term"     type="positive_max_1e5"   use="required" />
    <xs:attribute name="kmod_medium_term"   type="positive_max_1e5"   use="required" />
    <xs:attribute name="kmod_short_term"    type="positive_max_1e5"   use="required" />
    <xs:attribute name="kmod_instantaneous" type="positive_max_1e5"   use="required" />
  </xs:attributeGroup>

  <xs:complexType name="service_class_factors">
    <xs:attributeGroup ref="service_class_items" />
    <xs:anyAttribute                        processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="service_class_kdefs">
    <xs:attribute name="service_class_0"    type="non_neg_max_1e5"    use="required" />
    <xs:attribute name="service_class_1"    type="non_neg_max_1e5"    use="required" />
    <xs:attribute name="service_class_2"    type="non_neg_max_1e5"    use="required" />
    <xs:anyAttribute                        processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="tp_datatype">
    <xs:sequence>
      <xs:element name="stiffness" >
        <xs:complexType>
          <xs:attribute name="Em_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="Em_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="Et_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="Et_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="Ec_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="Ec_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="Gr_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="Gr_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="Gv_k"               type="positive_max_1e5"   use="required" />
          <xs:attribute name="rho"                type="positive_max_1e5"   use="required" />
          <xs:anyAttribute                        processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="strength" >
        <xs:complexType>
          <xs:attribute name="fm_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="fm_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="ft_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="ft_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="fc_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="fc_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="fr_k0"              type="positive_max_1e5"   use="required" />
          <xs:attribute name="fr_k90"             type="positive_max_1e5"   use="required" />
          <xs:attribute name="fv_k"               type="positive_max_1e5"   use="required" />
          <xs:anyAttribute                        processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="service_class_0_factors" type="service_class_factors" />
      <xs:element name="service_class_1_factors" type="service_class_factors" />
      <xs:element name="service_class_2_factors" type="service_class_factors" />
    </xs:sequence>
    <xs:attribute      name="description"    type="name40"                   use="required" />
    <xs:attribute      name="thickness"      type="timber_panel_thickness"   use="required" />
    <xs:attributeGroup ref="old_orthotropic_appdata" /> <!-- Required only for FD18's simple timber panels (this is part of timber_data element from FD19) -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:attributeGroup name="mech_props" >
    <xs:attribute name="material"  type="name256"           use="required" />
    <xs:attribute name="thickness" type="positive_max_1"    use="required" />
    <xs:attribute name="theta"     type="one_quadrant"      use="required" />
    <xs:attribute name="Ex"        type="positive_max_1e17" use="required" />
    <xs:attribute name="Ey"        type="non_neg_max_1e17"  use="required" />
    <xs:attribute name="nuxy"      type="non_neg_max_10"    use="required" />
    <xs:attribute name="Gxy"       type="positive_max_1e17" use="required" />
    <xs:attribute name="Gxz"       type="positive_max_1e17" use="required" />
    <xs:attribute name="Gyz"       type="positive_max_1e17" use="required" />
    <xs:attribute name="rho"       type="positive_max_1e20" use="required" />
  </xs:attributeGroup>

  <xs:attributeGroup name="limit_stresses" >
    <xs:attribute name="fm0k"      type="positive_max_1e17" use="required" />
    <xs:attribute name="fm90k"     type="positive_max_1e17" use="required" />
    <xs:attribute name="ft0k"      type="positive_max_1e17" use="required" />
    <xs:attribute name="ft90k"     type="positive_max_1e17" use="required" />
    <xs:attribute name="fc0k"      type="positive_max_1e17" use="required" />
    <xs:attribute name="fc90k"     type="positive_max_1e17" use="required" />
    <xs:attribute name="fxyk"      type="positive_max_1e17" use="required" />
    <xs:attribute name="fvk"       type="positive_max_1e17" use="required" />
    <xs:attribute name="fRk"       type="positive_max_1e17" use="required" />
    <xs:attribute name="fTork"     type="positive_max_1e17" use="required" />
  </xs:attributeGroup>

  <xs:complexType name="glc_layer">
    <xs:attributeGroup ref="mech_props" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="clt_layer">
    <xs:attributeGroup ref="mech_props" />
    <xs:attributeGroup ref="limit_stresses" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="glc_datatype">
    <xs:sequence>
      <xs:element name="layer"             type="glc_layer"  minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute      name="group"        type="name40"     use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="clt_datatype">
    <xs:sequence>
     <xs:element name="default_kdef"       type="service_class_kdefs" />
     <xs:element name="layer"              type="clt_layer"          minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute      name="manufacturer" type="name40"             use="required" />
    <xs:attribute      name="r33"          type="clt_srf"            use="required" />
    <xs:attribute      name="r66"          type="clt_srf"            use="required" />
    <xs:attribute      name="r77"          type="clt_srf"            use="required" />
    <xs:attribute      name="r88"          type="clt_srf"            use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="timberpanel_lib_type">
    <xs:sequence>
      <xs:element name="timber_panel_data" type="tp_datatype" />
    </xs:sequence>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="glcpanel_lib_type">
    <xs:sequence>
      <xs:element name="glc_panel_data"    type="glc_datatype" />
    </xs:sequence>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="cltpanel_lib_type">
    <xs:sequence>
      <xs:element name="clt_panel_data"    type="clt_datatype" />
    </xs:sequence>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>
  <!--_____________________________________________________________________________-->


  <!--=====  Connected items  ======================================================================-->
  <!--connected points type-->
  <xs:complexType name="connected_points_type">
    <xs:sequence>
      <xs:element name="point"                      type="point_type_3d"      minOccurs="2" maxOccurs="2" />
      <xs:element name="local_x"                    type="point_type_3d" />
      <xs:element name="local_y"                    type="point_type_3d" />
      <xs:choice>
        <xs:sequence>
          <xs:element name="stiffness"              type="simple_stiffness_type" />
          <xs:element name="plastic_limit_forces"   type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="plastic_limit_moments"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
        </xs:sequence>
        <!-- new choices from FD18 -->
        <xs:element   name="rigidity"               type="rigidity_data_type2"/>
        <xs:element   name="predefined_rigidity"    type="reference_type"/>
        <!-- new choice from FD20 -->
        <xs:element   name="rigidity_group"         type="rigidity_group_type2"/>
      </xs:choice>
      <xs:element     name="ref"                    type="reference_type"     minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                  type="identifier"         default="CP" />
    <xs:attribute      name="interface"             type="xs:double"          default="0.5" />
    <xs:attribute      name="stage"                 type="stage_number"       default="1" />                  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--connected lines type-->
  <xs:complexType name="connected_lines_type">
    <xs:sequence>
      <xs:element name="edge"                       type="edge_type"          minOccurs="2" maxOccurs="2" />
      <xs:element name="point"                      type="point_type_3d"      minOccurs="0" />
      <xs:element name="local_x"                    type="point_type_3d" />
      <xs:element name="local_y"                    type="point_type_3d" />
      <xs:choice>
        <xs:sequence>
          <xs:element name="stiffness"              type="simple_stiffness_type" />
          <xs:element name="plastic_limit_forces"   type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
          <xs:element name="plastic_limit_moments"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
        </xs:sequence>
        <!-- new choices from FD18 -->
        <xs:element   name="rigidity"               type="rigidity_data_type3"/>
        <xs:element   name="predefined_rigidity"    type="reference_type"/>
        <!-- new choice from FD20 -->
        <xs:element   name="rigidity_group"         type="rigidity_group_type3"/>
      </xs:choice>
      <xs:element     name="ref"                    type="reference_type"     minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                  type="identifier"         default="CL" />
    <xs:attribute      name="moving_local"          type="xs:boolean"         default="false" />
    <xs:attribute      name="interface_start"       type="xs:double"          default="0.5" />
    <xs:attribute      name="interface_end"         type="xs:double"          default="0.5" />
    <xs:attribute      name="stage"                 type="stage_number"       default="1" />                  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--surface connection type-->
  <xs:complexType name="surface_connection_type">
    <xs:sequence>
      <xs:element     name="region"                 type="region_type" />
      <xs:choice>
        <xs:element   name="rigidity"               type="rigidity_data_type1"/>
        <xs:element   name="predefined_rigidity"    type="reference_type"/>
        <!-- choice from FD20 -->
        <xs:element   name="rigidity_group"         type="rigidity_group_type1"/>
      </xs:choice>
      <xs:element     name="ref"                    type="reference_type"     minOccurs="0" maxOccurs="unbounded" />
      <xs:element     name="local_system"           type="opt_localsys_type"  minOccurs="0" maxOccurs="1" /> <!-- From FD19.00.004 -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                  type="identifier"         default="CS"    />
    <xs:attribute      name="distance"              type="abs_max_10000"      default="0" />
    <xs:attribute      name="interface"             type="xs:double"          default="0" />
    <xs:attribute      name="stage"                 type="stage_number"       default="1" />                  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--==========  Virtual objects  =======================================================-->
  <!--virtual bar type-->
  <xs:complexType name="virtual_bar_type">
    <xs:sequence>
      <xs:element name="edge"            type="edge_type" />                                        <!-- From FD21, only "line" used for trusses -->
      <xs:element name="local-y"         type="point_type_3d" />
      <xs:element name="connectivity"    type="connectivity_type"      minOccurs="0" maxOccurs="2" />
      <xs:element name="truss_behaviour" type="simple_truss_chr_type"  minOccurs="0" maxOccurs="1" />   <!-- From FD21, used only for trusses -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"      type="identifier"          default="BF"   />
    <xs:attribute      name="AE"        type="virtbar_data_range"  use="required" />
    <xs:attribute      name="unit_mass" type="non_neg_max_1e7"     default="0.0"  /> <!-- From FD21 -->

    <xs:attribute      name="ItG"       type="virtbar_data_range"  default="1E07" /> <!-- it is not used in the case of trusses -->
    <xs:attribute      name="I1E"       type="virtbar_data_range"  default="1E07" /> <!-- it is not used in the case of trusses -->
    <xs:attribute      name="I2E"       type="virtbar_data_range"  default="1E07" /> <!-- it is not used in the case of trusses -->
    <xs:attribute      name="stage"     type="stage_number"        default="1" />    <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--virtual shell type-->
  <xs:complexType name="virtual_shell_type">
    <xs:sequence>
      <xs:element name="region"             type="region_type" />
      <xs:element name="local_pos"          type="point_type_3d" />
      <xs:element name="local_x"            type="point_type_3d" />
      <xs:element name="local_y"            type="point_type_3d" />
      <xs:element name="membrane_stiffness" type="stiffness_matrix_4_type" />
      <xs:element name="flexural_stiffness" type="stiffness_matrix_4_type" />
      <xs:element name="shear_stiffness"    type="stiffness_matrix_2_type" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                         type="identifier"        default="FS" />
    <xs:attribute      name="density"                      type="non_neg_max_1e20"  use="required" />
    <xs:attribute      name="t1"                           type="positive_max_1e20" use="required" />
    <xs:attribute      name="t2"                           type="positive_max_1e20" use="required" />
    <xs:attribute      name="alfa_1"                       type="positive_max_1e20" use="required" />
    <xs:attribute      name="alfa_2"                       type="positive_max_1e20" use="required" />
    <xs:attribute      name="mesh_size"                    type="non_neg_max_1e20"  default="0.0" />   <!-- average surface element size -->
    <xs:attribute      name="ignore_in_st_imp_calculation" type="xs:boolean"        default="false" /> <!-- From FD19 -->
    <xs:attribute      name="stage"                        type="stage_number"      default="1" />     <!-- From FD21.00.003 -->
    <xs:anyAttribute processContents="skip"/>
  </xs:complexType>

  <!-- diaphragm type,  from FD18 -->
  <xs:complexType name="diaphragm_type">
    <xs:sequence>
      <xs:element name="region"             type="region_type" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"          type="identifier"   default="FS" />
    <xs:attribute      name="stage"         type="stage_number" default="1" />  <!-- From FD21.00.003 -->
    <xs:anyAttribute processContents="skip"/>
  </xs:complexType>

  <!-- stored_reference_type, not implemented yet! - ->
  <xs:complexType name="stored_reference_type">
    <xs:complexContent>
      <xs:extension base="reference_type">
        <xs:attribute name="action" type="stored_reference_modification_type" use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType> -->

  <!--storey type-->
  <xs:complexType name="storey_type">
    <xs:sequence>
      <xs:element name="origo"       type="point_type_3d" />
      <xs:element name="direction"   type="point_type_2d" />
      <!-- <xs:element name="entity"      type="stored_reference_type" minOccurs="0" maxOccurs="unbounded" /> <!- - Not implemented yet! -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="dimension_x" type="positive_double" use="required" />
    <xs:attribute      name="dimension_y" type="positive_double" use="required" />
    <xs:attribute      name="name"        type="nameMax256"      use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--refplane type-->
  <xs:complexType name="refplane_type">
    <xs:sequence>
      <xs:element name="region"      type="region_type" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"        type="name256"  default="A" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- labsecgeom_type -->
  <xs:complexType name="labsecgeom_type">
    <xs:choice>
        <xs:element name="line_segment" >
           <xs:complexType>
             <xs:sequence>
               <xs:element name="start_point"                 type="point_type_3d" />
               <xs:element name="base_point"                  type="point_type_3d" />
               <xs:element name="end_point"                   type="point_type_3d" />
             </xs:sequence>
             <xs:attribute      name="reverse_direction"      type="xs:boolean"       default="false" />
             <xs:anyAttribute   processContents="skip"/>
           </xs:complexType>
        </xs:element>
        <xs:element name="polyline" >
           <xs:complexType>
             <xs:sequence>
               <xs:element name="point"                       type="point_type_3d"    minOccurs="3" maxOccurs="unbounded" />
             </xs:sequence>
           </xs:complexType>
        </xs:element>
    </xs:choice>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"        type="name256"  default="A" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--dim_x_type-->
  <xs:complexType name="dim_x_type">
    <xs:sequence />
    <xs:attribute name="x" type="xs:double" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

   <!--dim_y_type-->
  <xs:complexType name="dim_y_type">
    <xs:sequence />
    <xs:attribute name="y" type="xs:double" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--axis type-->
  <xs:complexType name="axis_type">
    <xs:sequence>
      <xs:element name="start_point"  type="point_type_2d" />
      <xs:element name="end_point"    type="point_type_2d" />
      <!-- <xs:element name="entity"       type="stored_reference_type" minOccurs="0" maxOccurs="unbounded" /> <!- - Not implemented yet -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="prefix"       type="string15"      default="" />
    <xs:attribute      name="id"           type="int_1_to_1024" use="required"/>
    <xs:attribute      name="id_is_letter" type="xs:boolean"    use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>
  <!--tnode type-->


  <!-- ====  Polyhedrons (TSolids) and it's subtypes ================================ -->

  <!--Fillcolor attributes for polyhedrons and foundations are not implemented yet.
      These three attributes are needed for the graphical representation exclusively,
      you do not have to implement these to the analythical models -->

  <xs:complexType name="ts_vertex_type">
    <xs:sequence>
      <!-- WARNING: points are in index order! -->
      <xs:element name="vertex"    type="point_type_3d"          minOccurs="4" maxOccurs="32767" />
    </xs:sequence>
  </xs:complexType>
    <!--tline type-->

  <xs:complexType name="ts_indexed_vertex_type">
    <xs:attribute name="index"     type="xs:unsignedShort"       use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ts_visible_edge_type">
    <xs:sequence>
      <xs:element name="vertex"    type="ts_indexed_vertex_type" minOccurs="1" maxOccurs="32767" />
    </xs:sequence>
    <xs:attribute name="linetype"  type="visiblelinetype"        default="line" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ts_contourline_type">
    <xs:sequence>
      <xs:element name="vertex"    type="ts_indexed_vertex_type" minOccurs="3" maxOccurs="32767" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="ts_contour_type">
    <xs:sequence>
      <xs:element name="contour"   type="ts_contourline_type"    minOccurs="1" maxOccurs="32767" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="ts_surface_type">
    <xs:sequence>
      <xs:element name="flat_face" type="ts_contour_type"        minOccurs="1" maxOccurs="32767" />
    </xs:sequence>
  </xs:complexType>

  <!--polyhedron type-->
  <xs:complexType name="polyhedron_type">
    <xs:sequence>
      <xs:element name="vertices_in_index_order"  type="ts_vertex_type"       minOccurs="1" maxOccurs="1" />
      <xs:element name="visible_edge"             type="ts_visible_edge_type" minOccurs="0" maxOccurs="32767" />
      <xs:element name="surface"                  type="ts_surface_type"      minOccurs="1" maxOccurs="32767" />
    </xs:sequence>
    <xs:attributeGroup ref="fillcolor_attribs" /> <!-- NOT IMPLEMENTED YET! -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>
  <!-- ==  End of polyhedron types  ======================================= -->

  <!-- ===  Foundations and its subtypes  ================================= -->
  <!-- Foundations' spec. attribs -->
  <xs:attributeGroup name="foundation_attribs">
    <xs:attribute name="name"                  type="identifier"          default="F" />
    <xs:attribute name="bedding_modulus"       type="positive_max_1e8"    default="10000" /> <!-- In case of foundation slabs this is the vertical (z) component -->
  </xs:attributeGroup>

  <!-- referable internal parts -->
  <xs:complexType name="lnfoundation_ref_type">
    <xs:attribute name="ref_wall"        type="guidtype"     use="required"/>
    <xs:attribute name="ref_slab"        type="guidtype"     use="optional"/>
    <xs:attribute name="ref_support"     type="guidtype"     use="optional"/>
    <xs:attribute name= "supports_stage" type="stage_number" default="1"/>   <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptfoundation_ref_type">
    <xs:attribute name="ref_slab"     type="guidtype"        use="optional"/>
    <xs:attribute name="ref_support"  type="guidtype"        use="optional"/>
    <xs:attribute name= "supports_stage" type="stage_number" default="1"/>   <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="sffoundation_ref_type">
    <xs:attribute name="ref_slab"     type="guidtype"        use="required"/>
    <xs:attribute name="ref_support"  type="guidtype"        use="optional"/>
    <xs:attribute name= "supports_stage" type="stage_number" default="1"/>   <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name = "plinth_data">  <!-- From FD21 -->
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.1"/>
      <xs:maxInclusive value="10000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name = "foundation_thickness_data"> <!-- From FD21 -->
    <xs:restriction base="xs:double">
      <xs:minExclusive value="0.0001"/>
      <xs:maxInclusive value="10000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="foundation_plinth_type">
    <xs:attribute name="a"      type="plinth_data"    use="required"/>
    <xs:attribute name="b"      type="plinth_data"    use="required"/>
    <xs:attribute name="h"      type="plinth_data"    use="required"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="extruded_foundation_type">
    <xs:sequence>
      <xs:element name="region"          type="region_type" />
      <xs:element name="cuboid_plinth"   type="foundation_plinth_type" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute name="thickness"       type="positive_max_10000"     use="required"/>
    <xs:attribute name="above"           type="xs:boolean"             default="false"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- foundations' insulation -->
  <xs:complexType name="foundation_insulation_type">
    <xs:attribute name="e_modulus"     type="positive_max_1e20"        use="required"/>
    <xs:attribute name="thickness"     type="foundation_thickness_data" use="required"/>
    <xs:attribute name="density"       type="positive_max_1e20"        use="required"/>
    <xs:attribute name="gamma_m_u"     type="from_1_to_1e8"            default="1.2" />
    <xs:attribute name="gamma_m_uas"   type="from_1_to_1e8"            default="1.0" />
    <xs:attribute name="limit_stress"  type="from_1_to_1e8"            default="1.0" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ptfoundation type-->
  <xs:complexType name="ptfoundation_type">
    <xs:sequence>
      <xs:element name="connection_point"   type="point_type_3d"              minOccurs="1" maxOccurs="1" />
      <xs:element name="direction"          type="point_type_3d"              minOccurs="1" maxOccurs="1" />
      <xs:choice>
        <xs:element name="polyhedron"       type="polyhedron_type"            minOccurs="1" maxOccurs="1" />
        <!--  the other choice from FD15.1:  -->
        <xs:element name="extruded_solid"   type="extruded_foundation_type"   minOccurs="1" maxOccurs="1" />
      </xs:choice>
      <xs:element name="referable_parts"    type="ptfoundation_ref_type"      minOccurs="0" maxOccurs="1" />
      <xs:element name="insulation"         type="foundation_insulation_type" minOccurs="0" maxOccurs="1" /> <!-- From FD15 -->
    </xs:sequence>
    <xs:attributeGroup ref ="entity_attribs" />
    <xs:attributeGroup ref ="foundation_attribs"/>
    <xs:attribute      name="analythical_system"      type="foundationsystems_type" default="simple" />
    <xs:attribute      name="complex_material"        type="guidtype"               use="required"/>
    <xs:attributeGroup ref ="fillcolor_attribs" /> <!-- NOT IMPLEMENTED YET! -->
    <xs:attribute      name="slabs_stage"             type="stage_number"     default="1" />                <!-- From FD21.00.003 -->
    <xs:attribute      name="point_connections_stage" type="stage_number"     default="1" />                <!-- From FD21.00.003 -->
    <xs:attribute      name="stage"                   type="stage_number"     default="1" />                <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- lnfoundation type-->
  <xs:complexType name="lnfoundation_type">
    <xs:sequence>
      <xs:element name="bar_part"           type="bar_part_type"              minOccurs="1" maxOccurs="1" />
      <xs:element name="referable_parts"    type="lnfoundation_ref_type"      minOccurs="0" maxOccurs="1" />
      <xs:element name="insulation"         type="foundation_insulation_type" minOccurs="0" maxOccurs="1" /> <!-- From FD15 -->
    </xs:sequence>
    <xs:attributeGroup ref ="entity_attribs" />
    <xs:attributeGroup ref ="foundation_attribs"/>
    <xs:attribute      name="analythical_system"  type="foundationsystems_type" default="simple" />
    <xs:attributeGroup ref ="fillcolor_attribs" /> <!-- NOT IMPLEMENTED YET! -->
    <xs:attribute      name="stage"               type="stage_number"           default="1" />              <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- sffoundation type-->
  <xs:complexType name="sffoundation_type">
    <xs:sequence>
      <xs:element name="slab_part"          type="slab_part_type"             minOccurs="1" maxOccurs="1" />
      <xs:element name="referable_parts"    type="sffoundation_ref_type"      minOccurs="0" maxOccurs="1" />
      <xs:element name="insulation"         type="foundation_insulation_type" minOccurs="0" maxOccurs="1" /> <!-- From FD15 -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref ="foundation_attribs"/>
    <xs:attribute      name="analythical_system" type="slabfoundationsystems_type"  default="surface_support_group" />
    <xs:attributeGroup ref="fillcolor_attribs" /> <!-- NOT IMPLEMENTED YET! -->
    <xs:attribute      name="bedding_modulus_x"  type="positive_max_1e8"      use="optional" /> <!-- From FD17, the horizontal x component -->
    <xs:attribute      name="bedding_modulus_y"  type="positive_max_1e8"      use="optional" /> <!-- From FD17, the horizontal y component -->
    <xs:attribute      name="stage"              type="stage_number"          default="1" />    <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- foundation type-->
  <xs:complexType name="foundation_type">
    <xs:sequence>
      <xs:element name="isolated_foundation" type="ptfoundation_type" minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="wall_foundation"     type="lnfoundation_type" minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="foundation_slab"     type="sffoundation_type" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
  <!-- ==  End of FOUNDATION types  =================================== -->

  <!-- ===  Soil and its subtypes   =================================== -->
  <xs:simpleType name="depth_level_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1000000"/>
      <xs:maxExclusive value="0.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="level_point_depth">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-100000"/>
      <xs:maxInclusive value="+100000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="piletype_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="driven_displacement"/>
      <xs:enumeration value="driven_jetted"/>
      <xs:enumeration value="bored"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="level_point_type">
    <xs:attributeGroup ref= "coord2d"/>
    <xs:attribute      name="z_top"      type="level_point_depth" use="required" />
    <xs:attribute      name="z_bottom"   type="level_point_depth" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="horizontal_polygon_2d">
    <xs:sequence>
      <xs:element name="point"             type="point_type_2d"  minOccurs="3" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="height"            type="xs:double"      default="0.0" /> <!-- From FD20.00.004 -->
  </xs:complexType>

  <xs:complexType name="stratum_type">
    <xs:attribute name="material"          type="guidtype"          use="required" />
    <xs:attribute name="colour"            type="rgb_color_type"    use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="water_level_type">
    <xs:attribute name="colour"            type="rgb_color_type"    use="required" />
    <xs:attribute name="name"              type="name256"           use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="strata_type">
    <xs:sequence>
      <xs:element name="contour"                 type="horizontal_polygon_2d" />
      <xs:element name="stratum"                 type="stratum_type"      minOccurs="1" maxOccurs="100" />
      <xs:element name="water_level"             type="water_level_type"  minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="name"                    type="identifier"        use="optional" />
    <xs:attribute name="last_change"             type="xs:dateTime"       use="required" />
    <xs:attribute name="action"                  type="modification_type" use="required" />
    <xs:attribute name="default_filling"         type="guidtype"          use="required" />
    <xs:attribute name="default_fillings_colour" type="rgb_color_type"    default="B97A57" />
    <xs:attribute name="depth_level_limit"       type="depth_level_type"  use="required" />
    <xs:attribute name="stage"                   type="stage_number"      default="1" />  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="filling_type">
    <xs:sequence>
      <xs:element name="contour"                type="horizontal_polygon_2d" />
      <xs:element name="level_point"            type="level_point_type"  minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute name="default_top_level"      type="level_point_depth" use="required" />
    <xs:attribute name="default_bottom_level"   type="level_point_depth" use="required" />
    <xs:attribute name="material"               type="guidtype"          use="required" />
    <xs:attribute name="colour"                 type="rgb_color_type"    use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="piles_beam_type">
    <xs:sequence>
      <xs:element name="curve"        type="edge_type" />
      <xs:element name="local-y"      type="point_type_3d" />
      <xs:element name="connectivity" type="connectivity_type" />
      <xs:element name="buckling_data" type="buckling_data_type"   minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute      name="complex_material"  type="guidtype"      use="optional" />  <!-- But required for non-composite bars! -->
    <xs:attribute      name="complex_section"   type="guidtype"      use="optional" />  <!-- But required for non-composite bars! -->
    <xs:attribute      name="complex_composite" type="guidtype"      use="optional" />  <!-- But required for composite bars!     -->
    <xs:attribute      name="made"              type="steelmadetype" default="rolled" />
    <xs:attribute      name="guid"              type="guidtype"      use="optional" />  <!-- But required from FD20.00.003!       -->
    <xs:attribute      name="stage"             type="stage_number"  default="1" />     <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="pile_type">
    <xs:sequence>
      <xs:element name="beam"                        type="piles_beam_type" />
      <xs:element name="point_support"                                           minOccurs="0" maxOccurs="1" >
        <xs:complexType>
          <xs:sequence>
            <xs:choice>
              <xs:element name="rigidity"         type="pile_rigidity_group_type1" />
              <xs:element name="rigidity_group"   type="pile_rigidity_group_type2" />
            </xs:choice>
          </xs:sequence>
          <xs:attribute   name="stage" type="stage_number" default="1" />         <!-- From FD21.00.003 -->
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="line_support"                                            minOccurs="1" maxOccurs="unbounded" >
        <xs:complexType>
          <xs:choice>
            <xs:element name="rigidity"         type="rigidity_data_type0" />
            <xs:element name="rigidity_group"   type="pile_rigidity_group_type" />
          </xs:choice>
          <xs:attribute name="alpha_neg"        type="positive_double" use="required" />
          <xs:attribute name="beta_neg"         type="positive_double" use="required" />
          <xs:attribute name="stage"            type="stage_number"    default="1" /> <!-- From FD21.00.003 -->
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute name="type"                   type="piletype_type"             use="required" />
    <xs:attribute name="division_length"        type="dot1_to_100_type"          use="required" />
    <xs:attribute name="surface_surcharge"      type="non_neg_max_1000"          use="required" />
    <xs:attribute name="neutral_level"          type="non_neg_max_1000"          use="required" />
    <xs:attribute name="auto_calculate"         type="xs:boolean"                default="true" />
    <xs:attribute name="perimeter_by_contour"   type="xs:boolean"                default="true" />
    <xs:attribute name="stage"                  type="stage_number"              default="1" />       <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <xs:simpleType name="bh_strata_level_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1e6"/>
      <xs:maxInclusive value="+10000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="bh_water_level_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-100000"/>
      <xs:maxInclusive value="+10000"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="bh_strata_level_list">
    <xs:list itemType="bh_strata_level_type"/>
  </xs:simpleType>

  <xs:simpleType name="bh_water_level_list">
    <xs:list itemType="bh_water_level_type"/>
  </xs:simpleType>

  <xs:complexType name="all_levels_type">
    <xs:sequence>
      <xs:element name="strata_top_levels"    type="bh_strata_level_list" />
      <xs:element name="water_levels"         type="bh_water_level_list"  />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="borehole_type">
    <xs:sequence>
      <xs:element name="whole_level_data"         type="all_levels_type"      minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attributeGroup ref= "entity_attribs" />
    <xs:attribute      name="name"                type="identifier"           use="optional" />
    <xs:attributeGroup ref= "coord2d"/>
    <xs:attribute      name="final_ground_level"  type="bh_strata_level_type" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ===  End of SOIL types      ==================================== -->


  <!--section type-->
  <xs:complexType name="section_type">
    <xs:sequence>
      <xs:element name="region_group" type="region_group_type" />
      <xs:element name="end"          type="empty_type" />
      <!--additional elements could be added by WIN-Statik, FEM-Design or RevIt-->
      <xs:any minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"         type="xs:string"    use="required" />
    <xs:attribute      name="type"         type="sectiontype"  use="required" />
    <xs:attribute      name="fd-mat"       type="fd_mat_type"  default="-1" />
    <xs:attribute      name="fd_name_code" type="xs:string"    use="optional" />
    <xs:attribute      name="fd_name_type" type="xs:string"    use="optional" />
    <xs:attribute      name="fd_name_size" type="xs:string"    use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--complex section type-->
  <xs:complexType name="complex_section_type">
    <xs:sequence>
      <!--Minimum 1 section is necessary-->
      <xs:element name="section" minOccurs="1" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="ecc"          type="point_type_3d" minOccurs="0" maxOccurs="1" />          <!-- If bar_part has analytical ecc, must be equal with it, & it used only for intermediate sections -->
            <xs:element name="ecc_phys"     type="point_type_3d" minOccurs="0" maxOccurs="1" />          <!-- From FD18; physical eccentricity only for intermediate sections -->
            <xs:element name="end"          type="empty_type" />
            <!--additional elements could be added by WIN-Statik, FEM-Design or RevIt-->
            <xs:any minOccurs="0" maxOccurs="unbounded" />
          </xs:sequence>
          <xs:attribute name="guid" type="guidtype" />
          <xs:attribute name="pos"  type="position_type" use="required" />
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name" type="xs:string" use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:attributeGroup name="material_type_attribs">
    <xs:attribute name="mass"   type="non_neg_max_1e20" use="required" />
    <xs:attribute name="E_0"    type="xs:double"        use="required" />
    <xs:attribute name="E_1"    type="xs:double"        use="required" />
    <xs:attribute name="E_2"    type="xs:double"        use="required" />
    <xs:attribute name="nu_0"   type="xs:double"        use="required" />
    <xs:attribute name="nu_1"   type="xs:double"        use="required" />
    <xs:attribute name="nu_2"   type="xs:double"        use="required" />
    <xs:attribute name="alfa_0" type="xs:double"        use="required" />
    <xs:attribute name="alfa_1" type="xs:double"        use="required" />
    <xs:attribute name="alfa_2" type="xs:double"        use="required" />
    <xs:attribute name="G_0"    type="xs:double"        use="required" />
    <xs:attribute name="G_1"    type="xs:double"        use="required" />
    <xs:attribute name="G_2"    type="xs:double"        use="required" />
  </xs:attributeGroup>

  <xs:simpleType name="strength_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="brick_only"/>
      <xs:enumeration value="masonry"/>
    </xs:restriction>
  </xs:simpleType>

  <!--material type-->
  <xs:complexType name="material_type">
    <xs:choice>
      <!--one of the following elements is required-->
      <xs:element name="concrete">
        <xs:complexType>
          <xs:attributeGroup ref="material_type_attribs" />
          <xs:attribute name="Fck"         type="material_base_value"   use="required" />
          <xs:attribute name="Fck_cube"    type="material_base_value"   default="30.0" /> <!-- From FD17 -->
          <xs:attribute name="Fctk"        type="material_base_value"   use="required" />
          <xs:attribute name="Fctm"        type="material_base_value"   use="required" />
          <xs:attribute name="Ecm"         type="material_base_value"   use="required" />
          <xs:attribute name="gammaC_0"    type="material_base_value"   use="required" />
          <xs:attribute name="gammaC_1"    type="material_base_value"   use="required" />
          <xs:attribute name="gammaCE"     type="material_base_value"   use="required" />
          <xs:attribute name="gammaCfi"    type="material_base_value"   default="1.0"  /> <!-- From FD20 -->
          <xs:attribute name="gammaS_0"    type="material_base_value"   use="required" />
          <xs:attribute name="gammaS_1"    type="material_base_value"   use="required" />
          <xs:attribute name="gammaSfi"    type="material_base_value"   default="1.0"  /> <!-- From FD20 -->
          <xs:attribute name="alfaCc"      type="material_base_value"   use="required" />
          <xs:attribute name="alfaCt"      type="material_base_value"   use="required" />
          <xs:attribute name="Fcd_0"       type="xs:double"             use="required" />
          <xs:attribute name="Fcd_1"       type="xs:double"             use="required" />
          <xs:attribute name="Fctd_0"      type="xs:double"             use="required" />
          <xs:attribute name="Fctd_1"      type="xs:double"             use="required" />
          <xs:attribute name="Ecd_0"       type="xs:double"             use="required" />
          <xs:attribute name="Ecd_1"       type="xs:double"             use="required" />
          <xs:attribute name="Epsc2"       type="material_base_value"   use="optional" /> <!-- From FD19, and REQUIRED from FD19! -->
          <xs:attribute name="Epscu2"      type="material_base_value"   use="optional" /> <!-- From FD19, and REQUIRED from FD19! -->
          <xs:attribute name="Epsc3"       type="material_base_value"   use="required" />
          <xs:attribute name="Epscu3"      type="material_base_value"   use="required" />
          <xs:attribute name="environment" type="xs:integer"            use="required" />
          <xs:attribute name="creep"       type="material_0base_value"  use="required" /> <!-- Before FD14: creep, from FD14: creep ULS -->
          <xs:attribute name="creep_sls"   type="material_0base_value"  default="0.0"  /> <!-- General Creep Sls From FD14, from FD19: creep Slq -->
          <xs:attribute name="creep_slf"   type="material_0base_value"  default="0.0"  /> <!-- From FD19 -->
          <xs:attribute name="creep_slc"   type="material_0base_value"  default="0.0"  /> <!-- From FD19 -->
          <xs:attribute name="shrinkage"   type="non_neg_max_1000"      use="required" />
          <xs:attribute name="nu"          type="material_nu_value"     use="required" />
          <xs:attribute name="alfa"        type="material_base_value"   use="required" />
          <xs:attribute name="reduction"   type="positive_max_10"       default="1.0"  /> <!-- From FD13, positive_max_10 limit from FD18.00.003 -->
          <xs:attribute name="stability"   type="reduction_factor_type" default="1.0"  /> <!-- From FD14 -->
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="steel">
        <xs:complexType>
          <xs:attributeGroup ref="material_type_attribs" />
          <xs:attribute name="Fyk16"     type="material_base_value" use="required" />
          <xs:attribute name="Fyk40"     type="material_base_value" use="required" />
          <xs:attribute name="Fyk63"     type="material_base_value" use="required" />
          <xs:attribute name="Fyk80"     type="material_base_value" use="required" />
          <xs:attribute name="Fyk100"    type="material_base_value" use="required" />
          <xs:attribute name="Fyk150"    type="material_base_value" use="required" />
          <xs:attribute name="Fyk200"    type="material_base_value" use="required" />
          <xs:attribute name="Fyk250"    type="material_base_value" use="required" />
          <xs:attribute name="Fyk400"    type="material_base_value" use="required" />
          <xs:attribute name="Fuk3"      type="material_base_value" use="required" />
          <xs:attribute name="Fuk40"     type="material_base_value" use="required" />
          <xs:attribute name="Fuk100"    type="material_base_value" use="required" />
          <xs:attribute name="Fuk150"    type="material_base_value" use="required" />
          <xs:attribute name="Fuk250"    type="material_base_value" use="required" />
          <xs:attribute name="Fuk400"    type="material_base_value" use="required" />
          <xs:attribute name="gammaM0_0" type="material_base_value" use="required" />
          <xs:attribute name="gammaM0_1" type="material_base_value" use="required" />
          <xs:attribute name="gammaM1_0" type="material_base_value" use="required" />
          <xs:attribute name="gammaM1_1" type="material_base_value" use="required" />
          <xs:attribute name="gammaM2_0" type="material_base_value" use="required" />
          <xs:attribute name="gammaM2_1" type="material_base_value" use="required" />
          <xs:attribute name="gammaM5_0" type="material_base_value" use="optional" />   <!-- From FD15.00.005. The default input value according to the material's national annex -->
          <xs:attribute name="gammaM5_1" type="material_base_value" use="optional" />   <!-- From FD15.00.005. The default input value according to the material's national annex -->
          <xs:attribute name="gammaMfi"  type="material_base_value" default="1.0"  />   <!-- From FD17 -->
          <xs:attribute name="Ek"        type="material_base_value" use="required" />
          <xs:attribute name="Ed_0"      type="xs:double"           use="required" />
          <xs:attribute name="Ed_1"      type="xs:double"           use="required" />
          <xs:attribute name="nu"        type="material_nu_value"   use="required" />
          <xs:attribute name="G"         type="material_base_value" use="required" />
          <xs:attribute name="alfa"      type="material_base_value" use="required" />
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="timber">
        <xs:complexType>
          <xs:attributeGroup ref="material_type_attribs" />
          <xs:attribute name="type"     type="xs:integer"            use="required" />
          <xs:attribute name="quality"  type="xs:integer"            use="required" />
          <xs:attribute name="Fmk0"     type="material_base_value"   use="required" />
          <xs:attribute name="Fmk90"    type="material_base_value"   use="required" />
          <xs:attribute name="Ft0k"     type="material_base_value"   use="required" />
          <xs:attribute name="Ft90k"    type="material_base_value"   use="required" />
          <xs:attribute name="Fc0k"     type="material_base_value"   use="required" />
          <xs:attribute name="Fc90k"    type="material_base_value"   use="required" />
          <xs:attribute name="Fvk"      type="material_base_value"   use="required" />
          <xs:attribute name="E0mean"   type="material_base_value"   use="required" />
          <xs:attribute name="E90mean"  type="material_base_value"   use="required" />
          <xs:attribute name="E005"     type="material_base_value"   use="required" />
          <xs:attribute name="Gmean"    type="material_base_value"   use="required" />
          <xs:attribute name="G005"     type="material_base_value"   use="required" />
          <xs:attribute name="Rhok"     type="material_base_value"   use="required" />
          <xs:attribute name="Rhomean"  type="material_base_value"   use="required" />
          <xs:attribute name="E0comp"   type="xs:double"             use="required" />
          <xs:attribute name="E90comp"  type="xs:double"             use="required" />
          <xs:attribute name="gammaM_0" type="material_base_value"   use="required" />
          <xs:attribute name="gammaM_1" type="material_base_value"   use="required" />
          <xs:attribute name="ksys"     type="xs:double"             use="required" />
          <xs:attribute name="k_cr"     type="reduction_factor_type" use="optional" />  <!-- From FD15. The default input value according to the material's national annex -->
          <xs:attribute name="service_class" type="timber_service_class" use="required" />
          <xs:attribute name="kdefU"    type="material_0base_value"  use="optional" />  <!-- but mandatory from FD19. The default input value is according to FD18's kdef default -->
          <xs:attribute name="kdefSq"   type="material_0base_value"  use="optional" />  <!-- From FD19. The default input value according to the prior data -->
          <xs:attribute name="kdefSf"   type="material_0base_value"  use="optional" />  <!-- From FD19. The default input value according to the prior data -->
          <xs:attribute name="kdefSc"   type="material_0base_value"  use="optional" />  <!-- From FD19. The default input value according to the prior data -->
          <xs:attribute name="gammaMfi" type="material_base_value"   use="optional" />  <!-- From FD19. The default input value according to the prior data -->
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="brick"> <!-- From FD20 -->
        <xs:complexType>
          <xs:attribute name="strength_for"                 type="strength_type"        default="brick_only" />  <!-- "masonry" only for FD20's brick materials -->
          <xs:attribute name="fb"                           type="material_base_value"  use="required" />
          <xs:attribute name="nu"                           type="material_nu_value"    use="required" />
          <xs:attribute name="rho"                          type="material_base_value"  use="required" />
          <xs:attribute name="alpha_thermal"                type="material_base_value"  use="required" />
          <xs:attribute name="gammaM_0"                     type="material_base_value"  use="required" />
          <xs:attribute name="gammaM_1"                     type="material_base_value"  use="required" />
          <xs:attribute name="fm"                           type="material_base_value"  use="required" />
          <xs:attribute name="K"                            type="material_base_value"  use="required" />
          <xs:attribute name="alpha"                        type="material_0base_value" use="required" />
          <xs:attribute name="beta"                         type="material_0base_value" use="required" />
          <xs:attribute name="elasticity_modulus"           type="material_base_value"  use="required" />
          <xs:attribute name="elasticity_calculated_by_KE"  type="xs:boolean"           default="false" />
          <xs:attribute name="creep_U"                      type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sq"                     type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sf"                     type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sc"                     type="material_0base_value" use="required" />
          <xs:attribute name="phi"                          type="material_base_value"  use="required" />
          <xs:attribute name="filled_vertical_joints"       type="xs:boolean"           use="optional" /> <!-- From FD21 -->
          <xs:attribute name="km"                           type="material_base_value"  use="optional" /> <!-- From FD21 -->
          <xs:attribute name="muk"                          type="material_base_value"  use="optional" /> <!-- From FD21 -->
          <xs:attribute name="ct"                           type="material_base_value"  use="optional" /> <!-- From FD21 -->
          <xs:attribute name="fvk0"                         type="material_base_value"  use="optional" /> <!-- From FD21 -->
          <xs:attribute name="fvlt"                         type="material_base_value"  use="optional" /> <!-- From FD21 -->
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="masonry"> <!-- From FD21 -->
        <xs:complexType>
          <xs:attribute name="fk"                           type="material_base_value"  use="required" />
          <xs:attribute name="nu"                           type="material_nu_value"    use="required" />
          <xs:attribute name="rho"                          type="material_base_value"  use="required" />
          <xs:attribute name="alpha_thermal"                type="material_base_value"  use="required" />
          <xs:attribute name="gammaM_0"                     type="material_base_value"  use="required" />
          <xs:attribute name="gammaM_1"                     type="material_base_value"  use="required" />
          <xs:attribute name="fm"                           type="material_base_value"  use="required" />
          <xs:attribute name="K"                            type="material_base_value"  use="required" />
          <xs:attribute name="alpha"                        type="material_0base_value" use="required" />
          <xs:attribute name="beta"                         type="material_0base_value" use="required" />
          <xs:attribute name="elasticity_modulus"           type="material_base_value"  use="required" />
          <xs:attribute name="elasticity_calculated_by_KE"  type="xs:boolean"           default="false" />
          <xs:attribute name="creep_U"                      type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sq"                     type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sf"                     type="material_0base_value" use="required" />
          <xs:attribute name="creep_Sc"                     type="material_0base_value" use="required" />
          <xs:attribute name="phi"                          type="material_base_value"  use="required" />
          <xs:attribute name="filled_vertical_joints"       type="xs:boolean"           use="optional" />
          <xs:attribute name="km"                           type="material_base_value"  use="optional" />
          <xs:attribute name="muk"                          type="material_base_value"  use="optional" />
          <xs:attribute name="ct"                           type="material_base_value"  use="optional" />
          <xs:attribute name="fvk0"                         type="material_base_value"  use="optional" />
          <xs:attribute name="fvlt"                         type="material_base_value"  use="optional" />
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="stratum"> <!-- From FD20 -->
        <xs:complexType>
          <xs:sequence>
            <xs:element name="behaviour">
              <xs:complexType>
                <xs:choice>
                  <xs:element name="drained">
                    <xs:complexType>
                      <xs:attribute name="c_k"        type="material_0base_value"   use="required" />
                      <xs:attribute name="c_k_depth"  type="material_0base_value"  use="required" />
                      <xs:attribute name="phi_k"      type="max_89dot9degree"      use="required" />
                      <xs:attribute name="phi_cvk"    type="max_89dot9degree"      use="required" />
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="undrained">
                    <xs:complexType>
                      <xs:attribute name="c_uk"       type="material_base_value"   use="required" />
                      <xs:attribute name="c_uk_depth" type="material_0base_value"  use="required" />
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="combined">
                    <xs:complexType>
                      <xs:attribute name="drained"    type="xs:boolean"            default="false"/>
                      <xs:attribute name="c_uk"       type="material_base_value"   use="required" />
                      <xs:attribute name="c_uk_depth" type="material_0base_value"  use="required" />
                      <xs:attribute name="c_k"        type="material_0base_value"  use="required" />
                      <xs:attribute name="c_k_depth"  type="material_0base_value"  use="required" />
                      <xs:attribute name="phi_k"      type="max_89dot9degree"      use="required" />
                      <xs:attribute name="phi_cvk"    type="max_89dot9degree"      use="required" />
                    </xs:complexType>
                  </xs:element>
                </xs:choice>
              </xs:complexType>
            </xs:element>
            <xs:element name="model">
               <xs:complexType>
                 <xs:choice>
                   <xs:element name="generic">
                     <xs:complexType>
                       <xs:sequence>
                         <xs:element name="record"         minOccurs="1" maxOccurs="5" >
                           <xs:complexType>
                             <xs:attribute name="Sigma"  type="positive_max_1e5"  use="required" />
                             <xs:attribute name="p"      type="non_neg_max_1e5"   use="required" />
                             <xs:attribute name="pd"     type="non_neg_max_1e5"   use="required" />
                             <xs:attribute name="M"      type="positive_max_1e5"  use="required" />
                             <xs:attribute name="Md"     type="non_neg_max_1e5"   use="required" />
                           </xs:complexType>
                         </xs:element>
                       </xs:sequence>
                       <xs:attribute name="Mu"         type="material_base_value"   use="required" />
                       <xs:attribute name="Mu_depth"   type="material_0base_value"  use="required" />
                     </xs:complexType>
                   </xs:element>
                   <xs:element name="linear">
                     <xs:complexType>
                       <xs:attribute name="use_E"      type="xs:boolean"            default="false" />
                       <xs:attribute name="value"      type="material_base_value"   use="required" />
                       <xs:attribute name="M0_depth"   type="material_0base_value"  use="required" />
                     </xs:complexType>
                   </xs:element>
                   <xs:element name="overconsolidated">
                     <xs:complexType>
                       <xs:attribute name="Mu"         type="material_base_value"   use="required" />
                       <xs:attribute name="Mu_depth"   type="material_0base_value"  use="required" />
                       <xs:attribute name="M0"         type="material_base_value"   use="required" />
                       <xs:attribute name="M0_depth"   type="material_0base_value"  use="required" />
                       <xs:attribute name="ML"         type="material_base_value"   use="required" />
                       <xs:attribute name="ML_depth"   type="material_0base_value"  use="required" />
                       <xs:attribute name="M"          type="material_0base_value"  use="required" />
                       <xs:attribute name="M_depth"    type="material_0base_value"  use="required" />
                       <xs:attribute name="Sigma_c"    type="material_base_value"   use="required" />
                       <xs:attribute name="p_c"        type="material_0base_value"  use="required" />
                       <xs:attribute name="pc_depth"   type="material_0base_value"  use="required" />
                       <xs:attribute name="Sigma_L"    type="material_base_value"   use="required" />
                       <xs:attribute name="p_L"        type="material_0base_value"  use="required" />
                       <xs:attribute name="p_L_depth"  type="material_0base_value"  use="required" />
                     </xs:complexType>
                   </xs:element>
                  </xs:choice>
               </xs:complexType>
            </xs:element>
          </xs:sequence>
          <xs:attribute name="reference_level" type="xs:double"             use="required" />
          <xs:attribute name="Gamma_dry"       type="material_base_value"   use="required" />
          <xs:attribute name="Gamma_sat"       type="material_base_value"   use="required" />
          <xs:attribute name="nu"              type="material_nu_value"     use="required" />
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    <!-- next choice -->
      <xs:element name="custom">
        <xs:complexType>
          <xs:attributeGroup ref="material_type_attribs" />
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="reference" type="reference_type" />
    </xs:choice>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"      type="name256"      use="required" />
    <xs:attribute      name="standard"  type="standardtype" use="required" />
    <xs:attribute      name="country"   type="eurocodetype" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--complex material type-->
  <xs:complexType      name="complex_material_type">         <!-- NOT IMPLEMENTED YET, all complex_materials refering 'single' material_type materials now! -->
    <xs:sequence>
      <xs:element name="material" type="reference_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name" type="xs:string" use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ==========  Reinforcement types  ======================================= -->

  <xs:simpleType name="studrail_patterns">
    <xs:restriction base="xs:string">
      <xs:enumeration value="radial"/>
      <xs:enumeration value="orthogonal"/>
      <xs:enumeration value="semi-orthogonal"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="studrail_s0_range">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.02"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="studrail_s12_range">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.03"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="studrail_rail_range">
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="4"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="studrail_stud_range">
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="2"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="studrail_height"> <!-- values in millimeter -->
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.01"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="rc_diameter_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.001"/>
      <xs:maxInclusive value="0.1"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="rc_k_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="1.0"/>  <!-- From FD18: It is 1.0 for compatibility reasons, but if the imported value less than 1.05, then FD calculating with 1.05 -->
      <xs:maxInclusive value="1E10"/>
    </xs:restriction>
  </xs:simpleType>

  <!--reinforcing material type -->
  <xs:complexType name="rfmaterial_type">
    <xs:sequence>
      <xs:element name="reinforcing_steel">
        <xs:complexType>
          <xs:attribute name="fyk"        type="non_neg_max_1e10"  use="required" />
          <xs:attribute name="Es"         type="non_neg_max_1e10"  use="required" />
          <xs:attribute name="Epsilon_uk" type="non_neg_max_1e10"  use="required" />
          <xs:attribute name="Epsilon_ud" type="non_neg_max_1e10"  use="required" />
          <xs:attribute name="k"          type="rc_k_value"        use="required" />
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"     type="string15"     use="required" />
    <xs:attribute      name="standard" type="standardtype" use="required" />
    <xs:attribute      name="country"  type="eurocodetype" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="wire_profile_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="smooth"/>
      <xs:enumeration value="ribbed"/>
    </xs:restriction>
  </xs:simpleType>

  <!--reinforcing wire type-->
  <xs:complexType name="rf_wire_type">
    <xs:attribute name="diameter"             type="rc_diameter_value" use="required" />
    <xs:attribute name="reinforcing_material" type="guidtype"          use="required" />
    <xs:attribute name="profile"              type="wire_profile_type" default="ribbed" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--reinforcement parameter type -->
  <xs:complexType name="shell_rf_params_type">
    <xs:sequence>
      <xs:element name="base_shell" type="guid_list_type" />
      <xs:element name="center" >
          <xs:complexType>
              <xs:attributeGroup ref="coord3d" />
              <xs:attribute name="polar_system" type="xs:boolean" use="required" />
              <xs:anyAttribute   processContents="skip"/>
          </xs:complexType>
      </xs:element>
      <xs:element name="x_direction"  type="point_type_3d" />
      <xs:element name="y_direction"  type="point_type_3d" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="single_layer_reinforcement" type="xs:boolean" default="false" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--bar reinforcement type -->
  <xs:complexType name="bar_rf_type" >
     <xs:sequence>
        <xs:element name="base_bar" type="guid_list_type" />
        <xs:element name="wire" type="rf_wire_type" />
        <xs:choice>
           <xs:element name="stirrups" >
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="region" type="region_type" />
                 </xs:sequence>
                 <xs:attributeGroup ref="unchecked_start_end_attribs" />
                 <xs:attribute      name="distance" type="positive_double" use="required" />
                 <xs:anyAttribute   processContents="skip"/>
              </xs:complexType>
           </xs:element>
        <!-- next choice -->
           <xs:element name="longitudinal_bar" >
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="cross-sectional_position" type="point_type_2d" />
                    <xs:element name="anchorage"                type="start_end_type" />
                    <xs:element name="prescribed_lengthening"   type="start_end_type" minOccurs="0" maxOccurs="1" /> <!-- from FD 19.00.002 -->
                 </xs:sequence>
                 <xs:attribute     name="start"     type="xs:double"       use="required" />
                 <xs:attribute     name="end"       type="positive_double" use="required" />
                 <xs:attribute     name="auxiliary" type="xs:boolean"      use="required" />
                 <xs:anyAttribute  processContents="skip"/>
              </xs:complexType>
           </xs:element>
        </xs:choice>
     </xs:sequence>
     <xs:attributeGroup ref="entity_attribs" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--punching area (column) type -->
  <xs:complexType name="punching_area_type" >
     <xs:sequence>
        <xs:element name="base_shell"    type="guid_list_type" />
        <xs:element name="connected_bar" type="guid_list_type" minOccurs="0" maxOccurs="2" />

        <!-- local system & check point -->
        <xs:element name="local_pos"   type="point_type_3d" />
        <xs:element name="local_x"     type="point_type_3d" />
        <xs:element name="local_y"     type="point_type_3d" />
        <xs:element name="reference_points_offset" type="point_type_3d"  minOccurs="0" maxOccurs="1" /> <!-- From FD18, offset of reference point, default: null vector -->

        <xs:element name="region" type="region_type" />
     </xs:sequence>
     <xs:attributeGroup ref="entity_attribs" />
     <xs:attribute      name="downward"      type="xs:boolean" default="false" />
     <xs:attribute      name="manual_design" type="xs:boolean" default="false" />
     <xs:attribute      name="name"          type="identifier" default="PU" />     <!-- Warning: only 'manual_designed' PU-s allowed used defined 'name' -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wbr_type" >
     <xs:sequence>
        <xs:element name="connected_wall"    type="guid_list_type" />
        <xs:element name="pt"                type="point_type_3d" />
        <xs:element name="dir"               type="point_type_3d" />
        <xs:element name="stirrup_pt"        type="point_type_3d" />
        <xs:element name="stirrup_dir"       type="point_type_3d" />
     </xs:sequence>
  </xs:complexType>

  <!--punching area (wall) type -->
  <xs:complexType name="punching_area_wall_type" >
     <xs:sequence>
        <xs:element name="base_shell"    type="guid_list_type" />

        <!-- local system & check point -->
        <xs:element name="local_pos"     type="point_type_3d" />
        <xs:element name="local_x"       type="point_type_3d" />
        <xs:element name="local_y"       type="point_type_3d" />
        <xs:element name="reference_points_offset" type="point_type_3d"  minOccurs="0" maxOccurs="1" /> <!-- Offset of reference point, default: null vector -->

        <!-- wall base rays -->
        <xs:element name="wall_base_ray" type="wbr_type"  minOccurs="1" maxOccurs="2" />

        <xs:element name="region" type="region_type" />
     </xs:sequence>
     <xs:attributeGroup ref="entity_attribs" />
     <xs:attribute      name="downward"      type="xs:boolean" default="false" />
     <xs:attribute      name="manual_design" type="xs:boolean" default="false" />
     <xs:attribute      name="name"          type="identifier" default="PU" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- psh limits -->
  <xs:simpleType name="psh_diameter_value">
    <xs:restriction base="xs:double">
      <xs:enumeration value="0.025"/>
      <xs:enumeration value="0.032"/>
      <xs:enumeration value="0.040"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="psh_cd_value">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.02"/>
      <xs:maxInclusive value="10.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="psh_ndir_value">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="2"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="psh_data" >
     <xs:attribute name="diameter"   type="psh_diameter_value"   use="required" />
     <xs:attribute name="cd"         type="psh_cd_value"         use="required" />
     <xs:attribute name="n_x_dir"    type="psh_ndir_value"       use="required" />
     <xs:attribute name="n_y_dir"    type="psh_ndir_value"       use="required" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--punching reinforcement type -->
  <xs:complexType name="punching_reinforcement_type" >
     <xs:sequence>
        <xs:element name="base_shell"    type="guid_list_type" />
        <xs:element name="punching_area" type="guid_list_type" />
        <xs:choice>
           <xs:element name = "bended_bar">
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="local_center"          type="point_type_3d" />
                    <xs:element name="wire"                  type="rf_wire_type" />
                 </xs:sequence>
                 <xs:attribute name="tip_sections_length"    type="positive_double"   use="required" />
                 <xs:attribute name="middle_sections_length" type="positive_double"   use="required" />
                 <xs:attribute name="height"                 type="positive_double"   use="required" />
                 <xs:attribute name="angle"                  type="positive_quadrant" use="required" />
                 <xs:attribute name="direction"              type="direction_type"    use="required" />
                 <xs:anyAttribute   processContents="skip"/>
              </xs:complexType>
           </xs:element>
        <!-- next choice of types -->
           <xs:element name = "open_stirrups">
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="wire"      type="rf_wire_type" />
                    <xs:element name="region"    type="region_type" />
                 </xs:sequence>
                 <xs:attribute name="width"      type="positive_double"   use="required" />
                 <xs:attribute name="length"     type="positive_double"   use="required" />
                 <xs:attribute name="height"     type="positive_double"   use="required" />
                 <xs:attribute name="distance_x" type="positive_double"   use="required" />
                 <xs:attribute name="distance_y" type="positive_double"   use="required" />
                 <xs:anyAttribute   processContents="skip"/>
              </xs:complexType>
           </xs:element>
        <!-- next choice of types  -->
           <xs:element name = "reinforcing_ring">
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="auxiliary_reinforcement" >
                      <xs:complexType>
                         <xs:sequence>
                            <xs:element name="wire"        type="rf_wire_type" />
                         </xs:sequence>
                         <xs:attribute name="inner_radius" type="positive_double"     use="required" />
                         <xs:attribute name="overlap"      type="non_negative_double" use="required" />
                         <xs:anyAttribute   processContents="skip"/>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="stirrups" >
                      <xs:complexType>
                         <xs:sequence>
                            <xs:element name="wire"        type="rf_wire_type" />
                         </xs:sequence>
                         <xs:attribute name="width"        type="positive_double"   use="required" />
                         <xs:attribute name="height"       type="positive_double"   use="required" />
                         <xs:attribute name="max_distance" type="positive_double"   use="required" />
                         <xs:anyAttribute   processContents="skip"/>
                      </xs:complexType>
                    </xs:element>
                 </xs:sequence>
              </xs:complexType>
           </xs:element>
        <!-- next choice of types, from FD18 -->
           <xs:element name = "stud_rails">
              <xs:complexType>
                 <xs:sequence>
                    <!-- product types -->
                    <xs:choice>
                      <xs:element name = "general_product">
                         <xs:complexType>
                            <xs:sequence>
                               <xs:element name="wire"         type="rf_wire_type" />
                            </xs:sequence>
                            <xs:anyAttribute   processContents="skip"/>
                         </xs:complexType>
                      </xs:element>
                      <!-- other choice of products -->
                      <xs:element name = "peikko_psb_product">
                         <xs:complexType>
                            <xs:sequence>
                               <xs:element name="psh"          type="psh_data"        minOccurs="0"  maxOccurs="1"/>
                            </xs:sequence>
                            <xs:attribute name="wire_diameter" type="rc_diameter_value" use="required" />
                            <xs:anyAttribute   processContents="skip"/>
                         </xs:complexType>
                      </xs:element>
                    </xs:choice>
                 </xs:sequence>
                 <!-- common attribs -->
                 <xs:attribute name="pattern"              type="studrail_patterns"   default="semi-orthogonal" />
                 <xs:attribute name="s0"                   type="studrail_s0_range"   default="0.075"   />
                 <xs:attribute name="s1"                   type="studrail_s12_range"  default="1.500"  />
                 <xs:attribute name="s2"                   type="studrail_s12_range"  default="1.500"  />
                 <xs:attribute name="rails_on_circle"      type="studrail_rail_range" default="12"   />
                 <xs:attribute name="studs_on_rail"        type="studrail_stud_range" default="3"    />
                 <xs:attribute name="height"               type="studrail_height"     use="optional" /> <!-- 'automatic', if not given -->
                 <xs:attribute name="use_minimal_elements" type="xs:boolean"          default="true" />
                 <xs:anyAttribute   processContents="skip"/>
              </xs:complexType>
           </xs:element>
        </xs:choice>
     </xs:sequence>
     <xs:attributeGroup ref="entity_attribs" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--surface reinforcement type -->
  <xs:complexType name="surface_rf_type" >
     <xs:sequence>
        <xs:element name="base_shell"   type="guid_list_type" />
        <xs:element name="surface_reinforcement_parameters" type="guid_list_type" />
        <xs:choice>
           <xs:element name = "straight">
              <xs:complexType>
                 <xs:attribute name="direction" type="direction_type"  use="required" />
                 <xs:attribute name="space"     type="positive_double" use="required" />
                 <xs:attribute name="face"      type="sf_rc_face"      use="optional" /> <!-- It needs for dual layer and NOT needs for single layer reinforcements! -->
                 <xs:attribute name="cover"     type="positive_double" default="0.02" />
                 <xs:anyAttribute processContents="skip"/>
              </xs:complexType>
           </xs:element>
        <!-- next choice -->
           <xs:element name = "centric">
              <xs:complexType>
                <xs:choice>
                   <xs:element name = "radial">
                      <xs:complexType>
                         <xs:attribute    name="angle"     type="one_quadrant"    use="required" />
                         <xs:anyAttribute processContents="skip"/>
                      </xs:complexType>
                <!-- next choice -->
                   </xs:element>
                   <xs:element name = "tangential">
                      <xs:complexType>
                         <xs:attribute name="space"     type="positive_double" use="required" />
                         <xs:anyAttribute   processContents="skip"/>
                      </xs:complexType>
                   </xs:element>
                </xs:choice>
                <xs:attribute name="face"      type="sf_rc_face"      use="optional" /> <!-- It needs for dual layer and NOT needs for single layer reinforcements! -->
                <xs:attribute name="cover"     type="positive_double" default="0.02" />
                <xs:anyAttribute processContents="skip"/>
              </xs:complexType>
           </xs:element>
        </xs:choice>
        <xs:element name="wire"   type="rf_wire_type" />
        <xs:element name="region" type="region_type" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- no-shear region types -->
  <xs:complexType name="noshear_auto_type" >
    <xs:attribute      name="connected_structure" type="guidtype"         use    ="required" />
    <xs:attribute      name="factor"              type="positive_max_100" use    ="required" />
    <xs:attribute      name="inactive"            type="xs:boolean"       default="false"    />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="noshear_region_type" >
     <xs:sequence>
        <xs:choice>
        <xs:element name="automatic"     type="noshear_auto_type" />
        <xs:element name="contour"       type="contour_type"  />
        </xs:choice>
     </xs:sequence>
    <xs:attribute      name="base_plate" type="guidtype" use="required" />
    <xs:attributeGroup ref="entity_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ===== Support types  =======================================  -->
  <!-- base support component -->
  <xs:complexType name="stiff_base_type">
    <xs:attribute name="neg" type="stiffnessdata_type" use="required" />
    <xs:attribute name="pos" type="stiffnessdata_type" use="required" />
    <xs:anyAttribute processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="simple_rigidity_type">
    <xs:sequence>
      <xs:element name="mov"                     type="stiff_base_type" />
      <xs:element name="rot"                     type="stiff_base_type" />
      <xs:choice>                                                                                       <!-- From FD17 -->
        <xs:element name="plastic_limit_forces"  type="plasticity_type"  minOccurs="0" maxOccurs="1" />
        <xs:element name="plastic_limit_moments" type="plasticity_type"  minOccurs="0" maxOccurs="1" />
      </xs:choice>
    </xs:sequence>
  </xs:complexType>


  <xs:complexType name="simple_spring_type">
    <xs:sequence>
      <xs:element name="mov_x" type="stiff_base_type" />
      <xs:element name="rot_x" type="stiff_base_type" />
      <xs:element name="mov_y" type="stiff_base_type" />
      <xs:element name="rot_y" type="stiff_base_type" />
      <xs:element name="mov_z" type="stiff_base_type" />
      <xs:element name="rot_z" type="stiff_base_type" />
    </xs:sequence>
    <xs:attribute name="detach" type="detach_type" default="" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="simple_rigidity_group">
    <xs:sequence>
        <xs:element name="springs"               type="stiff_base_type"     minOccurs="10" maxOccurs="10" />
        <xs:element name="plastic_limits"        type="plasticity_type"     minOccurs="4"  maxOccurs="4" />
        <xs:element name="plastic_limits2"       type="plasticity_type2"    minOccurs="6"  maxOccurs="6" />
    </xs:sequence>
    <xs:attribute name="type"                    type="motion_type"         use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--direction or group based support-->
  <xs:complexType name="support_rigidity_data_type">
    <xs:choice>
      <!-- first choice: simple support type -->
      <xs:element name="directed">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="direction"               type="point_type_3d" />
            <xs:choice>
              <xs:sequence>
                <xs:element name="mov"                     type="stiff_base_type" />
                <xs:element name="rot"                     type="stiff_base_type" />
                <xs:choice>                                                                                       <!-- From FD17 -->
                  <xs:element name="plastic_limit_forces"  type="plasticity_type"  minOccurs="0" maxOccurs="1" />
                  <xs:element name="plastic_limit_moments" type="plasticity_type"  minOccurs="0" maxOccurs="1" />
                </xs:choice>
              </xs:sequence>
              <!-- choice from FD20 -->
              <xs:sequence>
                <xs:element name="rigidity_group" type="simple_rigidity_group" />
              </xs:sequence>
            </xs:choice>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice:  support group type -->
      <xs:element name="group">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="local_x"               type="point_type_3d" /> <!-- Not used in import :-), but in the case of export, its value is always equal to the normal vector of the edge. -->
            <xs:element name="local_y"               type="point_type_3d" />
            <xs:choice>
              <xs:sequence> <!-- the only 'choice' for group type before FD18 -->
                <xs:element name="mov_x"                 type="stiff_base_type" />
                <xs:element name="rot_x"                 type="stiff_base_type" />
                <xs:element name="mov_y"                 type="stiff_base_type" />
                <xs:element name="rot_y"                 type="stiff_base_type" />
                <xs:element name="mov_z"                 type="stiff_base_type" />
                <xs:element name="rot_z"                 type="stiff_base_type" />
                <xs:element name="plastic_limit_forces"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
                <xs:element name="plastic_limit_moments" type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
              </xs:sequence>
              <!-- new choices from FD18 -->
              <xs:element name="rigidity"                type="rigidity_data_type2" />
              <xs:element name="predefined_rigidity"     type="reference_type" />
              <!-- new choice from FD20 -->
              <xs:element   name="rigidity_group"        type="rigidity_group_type2"/>
            </xs:choice>
          </xs:sequence>
          <xs:attribute name="detach"  type="detach_type" default="" />
          <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>

  <!--point support type -->
  <xs:complexType name="point_support_type">
    <xs:complexContent>
      <xs:extension base="support_rigidity_data_type">
        <xs:sequence>
          <xs:element name="position"   type="point_type_3d" />
        </xs:sequence>
        <xs:attributeGroup ref="entity_attribs" />
        <xs:attribute      name="name"  type="identifier"    default="S" />
        <xs:attribute      name="stage" type="stage_number"  default="1" />  <!-- From FD21.00.003 -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!--line support type-->
  <xs:complexType name="line_support_type">
    <xs:complexContent>
      <xs:extension base="support_rigidity_data_type">
        <xs:sequence>
          <xs:element name="edge"   type="edge_type" />
          <xs:element name="normal" type="point_type_3d" minOccurs="0" />
        </xs:sequence>
        <xs:attributeGroup ref="entity_attribs" />
        <xs:attribute      name="name"         type="identifier"    default="S" />
        <xs:attribute      name="moving_local" type="xs:boolean"    default="false" />
        <xs:attribute      name="stage"        type="stage_number"  default="1" />  <!-- From FD21.00.003 -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- Surface support types -->

  <xs:complexType name="surface_support_type">
    <xs:sequence>
      <xs:element name="region"                type="region_type" />
      <xs:choice>
        <!-- the only 'choice' before FD18 -->
        <xs:sequence>
          <xs:element name="mov_x"                 type="stiff_base_type" />
          <xs:element name="mov_y"                 type="stiff_base_type" />
          <xs:element name="mov_z"                 type="stiff_base_type" />
          <xs:element name="plastic_limit_forces"  type="plasticity_type_3d" minOccurs="0" maxOccurs="1" />  <!-- From FD17 -->
        </xs:sequence>
        <!-- new choices fom FD18: -->
        <xs:element   name="rigidity"              type="rigidity_data_type1" />
        <xs:element   name="predefined_rigidity"   type="reference_type" />  <!-- GUID refers to a rigidity_datalib_type_1 item -->
        <!-- new choice fom FD20: -->
        <xs:element   name="rigidity_group"        type="rigidity_group_type1" />
      </xs:choice>
      <xs:element     name="local_system"          type="opt_localsys_type"     minOccurs="0" maxOccurs="1" /> <!-- From FD19.00.004 -->
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"   type="identifier"   default="S" />
    <xs:attribute      name="detach" type="detach_type"  default="" />
    <xs:attribute      name="stage"  type="stage_number" default="1" />  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="stiffness_point_type"> <!-- From FD20 -->
    <xs:sequence>
      <xs:choice>
        <xs:element   name="rigidity"              type="rigidity_data_type0" />
        <xs:element   name="rigidity_group"        type="rigidity_group_type0" />
      </xs:choice>
    </xs:sequence>
    <xs:attribute      name="surface_support"      type="guidtype"   use="required" />
    <xs:attributeGroup ref="coord3d" />
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                 type="identifier" use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ============  PTC  ======================================================== -->

  <xs:simpleType name="ptc_jacking_side">
    <xs:restriction base="xs:string">
      <xs:enumeration value="start"/>
      <xs:enumeration value="end"/>
      <xs:enumeration value="start_then_end"/>
      <xs:enumeration value="end_then_start"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="ptc_strand_lib_type">
    <xs:sequence>
      <xs:element name="ptc_strand_data" >
        <xs:complexType>
          <xs:attribute      name="f_pk"             type="min_1_max_10000"    use="required" />
          <xs:attribute      name="A_p"              type="min_1_max_10000"    use="required" />
          <xs:attribute      name="E_p"              type="min_1_max_1e7"      use="required" />
          <xs:attribute      name="density"          type="positive_max_10000" use="required" />
          <xs:attribute      name="relaxation_class" type="int_1_to_3"         use="required" />
          <xs:attribute      name="Rho_1000"         type="positive_max_100"   use="required" />
          <xs:anyAttribute                           processContents="skip"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptc_losses">
    <xs:attribute      name="curvature_coefficient"  type="non_neg_max_10"    use="required" />
    <xs:attribute      name="wobble_coefficient"     type="non_neg_max_10"    use="required" />
    <xs:attribute      name="anchorage_set_slip"     type="non_neg_max_100"   use="required" />
    <xs:attribute      name="elastic_shortening"     type="non_neg_max_1e7"   use="required" />
    <xs:attribute      name="creep_stress"           type="non_neg_max_1e7"   use="required" />
    <xs:attribute      name="shrinkage_stress"       type="non_neg_max_1e7"   use="required" />
    <xs:attribute      name="relaxation_stress"      type="non_neg_max_1e7"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="ptc_tangent_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1.5533430342749533" /> <!-- -89 degree -->
      <xs:maxInclusive value= "1.5533430342749533" /> <!-- +89 degree -->
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="ptc_shape_start">
    <xs:attribute      name="z"                      type="abs_max_1000"      use="required" />
    <xs:attribute      name="tangent"                type="ptc_tangent_type"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptc_shape_inner">
    <xs:attribute      name="pos"                  type="inner_position_type" use="required" /> <!-- relative position between first base point and last base point -->
    <xs:attribute      name="z"                    type="abs_max_1000"        use="required" />
    <xs:attribute      name="tangent"              type="ptc_tangent_type"    use="required" />
    <xs:attribute      name="prior_inflection_pos" type="position_type"       use="optional" />  <!-- relative position between prior base point and this base point -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptc_shape_end">
    <xs:attribute      name="z"                    type="abs_max_1000"      use="required" />
    <xs:attribute      name="tangent"              type="ptc_tangent_type"  use="required" />
    <xs:attribute      name="prior_inflection_pos" type="position_type"     use="optional" /> <!-- relative position between prior base point and this base point -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptc_shape_type">
    <xs:sequence>
      <xs:element name="start_point"            type="ptc_shape_start" />
      <xs:element name="intermediate_point"     type="ptc_shape_inner"        minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="end_point"              type="ptc_shape_end" />
    </xs:sequence>
    <xs:attribute      name="top"               type="abs_max_10"             use="required" />
    <xs:attribute      name="bottom"            type="abs_max_10"             use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="position_list_type">
    <xs:list itemType="position_type"/>
  </xs:simpleType>

  <xs:complexType name="ptc_manufacturing_type">
    <xs:sequence>
      <xs:element name="positions"               type="position_list_type" />
    </xs:sequence>
    <xs:attribute      name="shift_x"            type="abs_max_1000"          use="required" />
    <xs:attribute      name="shift_z"            type="abs_max_1000"          use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ptc_type">
    <xs:sequence>
      <xs:element name="start_point"            type="point_type_3d"  />
      <xs:element name="end_point"              type="point_type_3d"  />
      <xs:element name="local_z"                type="point_type_3d"          minOccurs="0"  />
      <xs:element name="losses"                 type="ptc_losses"     />
      <xs:element name="shape_base_points"      type="ptc_shape_type" />
      <xs:element name="manufacturing"          type="ptc_manufacturing_type" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="base_object"       type="guidtype"         use="required" />
    <xs:attribute      name="name"              type="identifier"       default="PTC"  />
    <xs:attribute      name="strand_type"       type="guidtype"         use="required" />
    <xs:attribute      name="number_of_strands" type="int_1_to_100"     use="required" />
    <xs:attribute      name="jacking_side"      type="ptc_jacking_side" use="required" />
    <xs:attribute      name="jacking_stress"    type="min_200_max_1e7"  use="required" />
    <xs:attribute      name="stage"             type="stage_number"     default="1" />  <!-- From FD21.00.003 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ============  Loads & vicinity ============================================ -->
  <!--load dir type-->
  <xs:simpleType name="load_dir_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="constant"/>
      <xs:enumeration value="changing"/>
    </xs:restriction>
  </xs:simpleType>

  <!--auto load types-->
  <xs:simpleType name="auto_force_sign_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="plus"/>
      <xs:enumeration value="minus"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="auto_force_type_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="snow"/>
      <xs:enumeration value="wind"/>
      <xs:enumeration value="deviation"/>
      <xs:enumeration value="notional"/>
    </xs:restriction>
  </xs:simpleType>

  <!--force loads' type-->
  <xs:simpleType name="force_load_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="force"/>
      <xs:enumeration value="moment"/>
    </xs:restriction>
  </xs:simpleType>

  <!--surf. motion loads' type-->
  <xs:simpleType name="motion_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="motion"/>
      <xs:enumeration value="rotation"/>
    </xs:restriction>
  </xs:simpleType>

  <!--load combination type-->
  <xs:simpleType name="loadcombtype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="ultimate_ordinary"/>
      <xs:enumeration value="ultimate_accidental"/>
      <xs:enumeration value="ultimate_seismic"/>
      <xs:enumeration value="serviceability_characteristic" />  <!-- From FD16 -->
      <xs:enumeration value="serviceability_quasi_permanent" /> <!-- From FD16 -->
      <xs:enumeration value="serviceability_frequent" />        <!-- From FD16 -->
      <xs:enumeration value="serviceability"/>                  <!-- For backward compatibility, same as "serviceability_characteristic"  -->
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="lc_ptc_type"> <!-- From FD19 -->
    <xs:restriction base="xs:string">
      <xs:enumeration value="ptc_t0"/>
      <xs:enumeration value="ptc_t8"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="lc_pile_type"> <!-- From FD20 -->
    <xs:restriction base="xs:string">
      <xs:enumeration value="ldcase_pile"/> <!-- intead of "Neg, Shaft friction" -->
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="lc_final_cs"> <!-- From FD21.00.003 -->
    <xs:restriction base="xs:string">
      <xs:enumeration value="final_cs"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="lc_cs"> <!-- From FD21.00.003 -->
    <xs:restriction base="xs:string">
      <xs:pattern value="cs.[1-9]{1}[0-9]{0,4}"/> <!-- from "cs.1" to "cs.99999"  -->
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="load_case_id" >  <!-- for refering all types of load cases, from FD19 -->
    <xs:union memberTypes="guidtype indexed_guid lc_ptc_type lc_pile_type lc_final_cs" />  <!-- lc_final_cs from FD21.00.003 -->
  </xs:simpleType>

  <xs:simpleType name="load_case_cs" >  <!-- for refering Construction Stages' load cases, from FD21.00.003 -->
    <xs:union memberTypes="guidtype indexed_guid lc_ptc_type lc_pile_type" />
  </xs:simpleType>

  <xs:simpleType name="cs_case_id" >  <!-- from FD21.00.003 -->
    <xs:union memberTypes="lc_final_cs lc_cs" />
  </xs:simpleType>

  <xs:simpleType name="common_load_case" >  <!-- for refering common load cases, from FD19 -->
    <xs:union memberTypes="guidtype indexed_guid" />
  </xs:simpleType>

  <xs:attributeGroup name="load_baseattribs">
    <xs:attribute name="load_case"           type="load_case_id"         use="required"  />  <!-- From FD19, we used guidtype earlier here -->
    <xs:attribute name="comment"             type="comment_string"       default=""      />
  </xs:attributeGroup>

  <xs:attributeGroup name="forceload_attribs">
    <xs:attribute name="load_type"           type="force_load_type"      use="required"  /> <!-- In case of surface loads only "force" allowed -->
    <xs:attribute name="apply_on_ecc"        type="xs:boolean"           default="false" /> <!-- Valid only for force type loads, not for moment ones - From FD18 -->
    <xs:attribute name="auto_force_dir"      type="direction_type"       use="optional"  />
    <xs:attribute name="auto_force_sign"     type="auto_force_sign_type" use="optional"  />
    <xs:attribute name="auto_force_type"     type="auto_force_type_type" use="optional"  />
    <xs:attribute name="assigned_structure"  type="guidtype"             use="optional"  /> <!-- From FD18 -->
  </xs:attributeGroup>

  <!--point load type- ->
  <xs:complexType name="point_load_type">
    <xs:sequence>
      <xs:element name="direction" type="point_type_3d" />
      <xs:element name="load"      type="location_value" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:attributeGroup ref="forceload_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType> -->

  <!--caseless point load type-->
  <xs:complexType name="caseless_point_load_type">
    <xs:sequence>
      <xs:element name="direction" type="point_type_3d" />
      <xs:element name="load"      type="location_value" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="forceload_attribs" />
    <xs:attribute      name="comment"  type="comment_string" default=""      />
  </xs:complexType>

  <!-- point load type -->
  <xs:complexType name="point_load_type">
    <xs:complexContent>
      <xs:extension   base="caseless_point_load_type">
        <xs:attribute name="load_case"      type="load_case_id" use="required" />  <!-- From FD19, we used guidtype earlier here -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- point support motion load type, from FD18 -->
  <xs:complexType name="point_support_load_type">
    <xs:sequence>
      <xs:element name="direction"    type="point_type_3d" />
      <xs:element name="displacement" type="location_value" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--caseless line load type-->
  <xs:complexType name="caseless_line_load_type">
    <xs:sequence>
      <xs:element name="edge"      type="edge_type" />
      <xs:element name="direction" type="point_type_3d" />
      <xs:element name="normal"    type="point_type_3d"  minOccurs="0" maxOccurs="1" />
      <xs:element name="load"      type="location_value" minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="forceload_attribs" />
    <xs:attribute name="comment"             type="comment_string"     default=""      />
    <xs:attribute name="load_dir"            type="load_dir_type"      use="required"  />
    <xs:attribute name="load_projection"     type="xs:boolean"         use="required"  />
  </xs:complexType>

  <!-- line load type -->
  <xs:complexType name="line_load_type">
    <xs:complexContent>
      <xs:extension   base="caseless_line_load_type">
        <xs:attribute name="load_case"      type="load_case_id" use="required" />  <!-- From FD19, we used guidtype earlier here -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- line support motion load type, from FD18 -->
  <xs:complexType name="line_support_load_type">
    <xs:sequence>
      <xs:element name="edge"         type="edge_type" />
      <xs:element name="direction"    type="point_type_3d" />
      <xs:element name="normal"       type="point_type_3d"       minOccurs="0" maxOccurs="1" />
      <xs:element name="displacement" type="location_value"      minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:attribute name="load_type"    type="motion_type"         use="required"  />
    <xs:attribute name="load_dir"     type="load_dir_type"       use="required"  />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--pressure load type-->
  <xs:complexType name="pressure_load_type">
    <xs:sequence>
      <xs:element name="region"    type="region_type" />
      <xs:element name="direction" type="point_type_3d" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:attributeGroup ref="forceload_attribs" />  <!-- load_type must be 'force'! -->
    <xs:attribute      name="load_projection"   type="xs:boolean"   use="required"  />
    <xs:attribute      name="z0"                type="abs_max_1e20" use="required"  />
    <xs:attribute      name="q0"                type="abs_max_1e20" use="required"  />
    <xs:attribute      name="qh"                type="abs_max_1e20" use="required"  />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--caseless surface load type-->
  <xs:complexType name="caseless_surface_load_type">
    <xs:sequence>
      <xs:element name="region"    type="region_type" />
      <xs:element name="direction" type="point_type_3d" />
      <xs:element name="load"      type="location_value" minOccurs="1" maxOccurs="3" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="forceload_attribs" />  <!-- load_type must be 'force'! -->
    <xs:attribute      name="comment"           type="comment_string" default=""         />
    <xs:attribute      name="load_projection"   type="xs:boolean"     use    ="required" />
  </xs:complexType>

  <!-- surface load type -->
  <xs:complexType name="surface_load_type">
    <xs:complexContent>
      <xs:extension   base="caseless_surface_load_type">
        <xs:attribute name="load_case"      type="load_case_id" use="required" />  <!-- From FD19, we used guidtype earlier here -->
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!--surface support motion load type, from FD18 -->
  <xs:complexType name="surface_support_load_type">
    <xs:sequence>
      <xs:element name="region"         type="region_type" />
      <xs:element name="direction"      type="point_type_3d" />
      <xs:element name="displacement"   type="location_value"      minOccurs="1" maxOccurs="3" />
    </xs:sequence>
    <xs:attribute name="load_type"      type="motion_type"         use="required"  /> <!-- Write only in FD, only 'motion' allowed! -->
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- surface temperature variation load type, from FD18 -->
  <xs:complexType name="surface_temperature_load_type">
    <xs:sequence>
      <xs:element name="region"      type="region_type" />
      <xs:element name="temperature" type="topbottom_value" minOccurs="1" maxOccurs="3" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- surface stress load type, from FD18 -->
  <xs:complexType name="surface_stress_load_type">
    <xs:sequence>
      <xs:element name="region"      type="region_type" />
      <xs:element name="stress"      type="topbottom_value" minOccurs="1" maxOccurs="3" />
      <xs:element name="direction"   type="point_type_3d" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- line temperature variation load, from FD18 -->
  <xs:complexType name="line_temperature_load_type">
    <xs:sequence>
      <xs:element name="edge"        type="edge_type" />
      <xs:element name="direction"   type="point_type_3d" />
      <xs:element name="normal"      type="point_type_3d"   minOccurs="0" maxOccurs="1" />
      <xs:element name="temperature" type="topbottom_value" minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- line stres load, from FD18 -->
  <xs:complexType name="line_stress_load_type">
    <xs:sequence>
      <xs:element name="edge"        type="edge_type" />
      <xs:element name="direction"   type="point_type_3d" />
      <xs:element name="normal"      type="point_type_3d"   minOccurs="0" maxOccurs="1" />
      <xs:element name="stress"      type="topbottom_value" minOccurs="2" maxOccurs="2" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attributeGroup ref="load_baseattribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- mass point type,  from FD19 -->
  <xs:complexType name="mass_point_type">
    <xs:sequence>
      <xs:element name="position" type="point_type_3d" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="value"               type="mass_value" />
    <xs:attribute      name="apply_on_ecc"        type="xs:boolean"           default="false" />
    <xs:attribute      name="comment"             type="xs:string"            default=""      />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- mass conversion type, from FD19 -->
  <xs:complexType name="mass_conversion_type">
    <xs:sequence>
      <xs:element name="conversion" minOccurs="1" maxOccurs="unbounded" >
         <xs:complexType>
           <xs:attribute      name="factor"       type="positive_max_10"      use="required" />
           <xs:attribute      name="load_case"    type="guidtype"             use="required" />
           <xs:anyAttribute   processContents="skip"/>
         </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="last_change"   type="xs:dateTime"       use="required" />
    <xs:attribute name="action"        type="modification_type" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- footfall analysis data, from FD19 -->
  <xs:complexType name="footfall_type">
    <xs:choice>
      <xs:element name="position" type="point_type_3d" />
      <xs:element name="contour"  type="contour_type"  /> <!-- only for pre-FD20.00.004 items! -->
      <xs:element name="region"   type="region_type"  />  <!-- From FD20.00.004 -->
    </xs:choice>
    <xs:attribute      name="comment"             type="xs:string"            default=""      />
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"                type="identifier"           use="optional"  />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- seismic data types, from FD19 -->

  <xs:simpleType name="seismic_ground_type">
    <xs:restriction base="xs:string">
      <xs:pattern value="[ABCDE]{1,1}" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="spectratype_type">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"/>
      <xs:maxInclusive value="2"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="ec40_tc_type">
    <xs:restriction base="xs:double">
      <xs:enumeration value="0.7"/>
      <xs:enumeration value="1.0"/>
      <xs:enumeration value="1.6"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:attributeGroup name="spectra_base_attribs">
    <xs:attribute name="ag"   type="non_neg_max_10"   use="required" />
    <xs:attribute name="TD"   type="positive_max_10"  use="required" />
    <xs:attribute name="q"    type="positive_max_10"  use="required" />
  </xs:attributeGroup>

  <xs:complexType name="standard_spectra_type">
    <xs:attributeGroup ref ="spectra_base_attribs" />
    <xs:attribute      name="type" type="spectratype_type" use="required" />
    <xs:attribute      name="S"    type="positive_max_10"  use="required" />
    <xs:attribute      name="TB"   type="positive_max_10"  use="required" />
    <xs:attribute      name="TC"   type="positive_max_10"  use="required" />
    <xs:attribute      name="beta" type="positive_max_10"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ec040_standard_spectra_type">
    <xs:attributeGroup ref ="spectra_base_attribs" />
    <xs:attribute      name="TC"   type="ec40_tc_type"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="spectra_record_type">
    <xs:attribute      name="T"    type="positive_max_1000" use="required" />
    <xs:attribute      name="Sd"   type="non_neg_max_1000"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="unique_spectra_type">
    <xs:sequence>
      <!-- Important: The first (T = 0.0) diagram record is not stored here  -->
      <xs:element name="record"   type="spectra_record_type" minOccurs="0" maxOccurs="127" />
    </xs:sequence>
    <!-- Important: This is the first (T = 0.0) diagram record's 'Sd' value:  -->
    <xs:attribute name="start_Sd" type="non_neg_max_1000"    use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="seismic_load_type">
    <xs:choice> <!-- EC common standard spectra -->
      <xs:element name="common_standard_spectra" >
        <xs:complexType>
          <xs:sequence>
            <xs:element name="horizontal" type="standard_spectra_type" />
            <xs:element name="vertical"   type="standard_spectra_type" />
          </xs:sequence>
         <xs:attribute name="ground"      type="seismic_ground_type" default="A" />
         <xs:anyAttribute processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <!-- 2nd choice: Romanian standard spectra -->
      <xs:element name="ec040_standard_spectra" >
        <xs:complexType>
          <xs:sequence>
            <xs:element name="horizontal"   type="ec040_standard_spectra_type"   />
          </xs:sequence>
        </xs:complexType>
      </xs:element >
      <!-- 3rd choice: Unique spectra -->
      <xs:element name="unique_spectra" >
        <xs:complexType>
          <xs:sequence>
            <xs:element name="horizontal"   type="unique_spectra_type"   />
            <xs:element name="vertical"     type="unique_spectra_type"   />
          </xs:sequence>
        </xs:complexType>
      </xs:element >
    </xs:choice>
    <xs:attribute name="last_change"        type="xs:dateTime"         use="required" />
    <xs:attribute name="action"             type="modification_type"   use="required" />
    <xs:attribute name="xi"                 type="non_neg_max_50"      use="required" />
    <xs:attribute name="qd"                 type="non_neg_max_10"      use="required" />
    <xs:attribute name="building_structure" type="xs:boolean"          default="true" />
    <xs:attribute name="Gamma_Ie"           type="min_half_max_10"     default="1.0"  /> <!-- Only for Romanian Code -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="th_diagram_record">
    <xs:attribute name="T"                  type="non_negative_double" use="required" />
    <xs:attribute name="value"              type="xs:double"           use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ga_direction_record">
    <xs:attribute name="factor"               type="non_neg_max_1000"  use="required" />
    <xs:attribute name="diagram"              type="name255"           use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ga_combination_type">
    <xs:sequence>
      <xs:element name="direction_x"        type="ga_direction_record" />
      <xs:element name="direction_y"        type="ga_direction_record" />
      <xs:element name="direction_z"        type="ga_direction_record" />
    </xs:sequence>
    <xs:attribute name="name"               type="name255"             use="required" />
    <xs:attribute name="dt"                 type="positive_max_1000"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ga_diagram_type">
    <xs:sequence>
      <!-- Important: The first (T = 0.0, value = 0.0) diagram record is not stored here, but it must be 'read' in import!  -->
      <xs:element name="record"             type="th_diagram_record"   minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="name"               type="name255"             use="required" />
    <xs:attribute name="direction"          type="direction_2d_type"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ground_acceleration_type">
    <xs:sequence>
      <xs:element name="diagram"            type="ga_diagram_type"     minOccurs="1" maxOccurs="unbounded" />
      <xs:element name="combination"        type="ga_combination_type" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="last_change"        type="xs:dateTime"         use="required" />
    <xs:attribute name="action"             type="modification_type"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ef_lcase_record">
    <xs:attribute name="factor"               type="positive_max_1000" use="required" />
    <xs:attribute name="diagram"              type="name255"           use="required" />
    <xs:attribute name="load_case"            type="load_case_id"      use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ef_combination_type">
    <xs:sequence>
      <xs:element name="record"             type="ef_lcase_record"     minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="name"               type="name255"             use="required" />
    <xs:attribute name="dt"                 type="positive_max_1000"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ef_diagram_type">
    <xs:sequence>
      <!-- Important: The first (T = 0.0) diagram record is not stored here  -->
      <xs:element name="record"             type="th_diagram_record"   minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="name"               type="name255"             use="required" />
    <xs:attribute name="direction"          type="direction_2d_type"   use="required" />
    <!-- Important: 'start_value' is the first (T = 0.0) diagram record's 'factor' value: -->
    <xs:attribute name="start_value"        type="non_negative_double" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="excitation_force_type">
    <xs:sequence>
      <xs:element name="diagram"            type="ef_diagram_type"     minOccurs="1" maxOccurs="unbounded" />
      <xs:element name="combination"        type="ef_combination_type" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="last_change"        type="xs:dateTime"         use="required" />
    <xs:attribute name="action"             type="modification_type"   use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <!-- loadcasetype type -->
  <xs:simpleType name="loadcasetype_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="static"/>
      <xs:enumeration value="dead_load"/>
      <xs:enumeration value="shrinkage"/>
      <xs:enumeration value="seis_max"/>
      <xs:enumeration value="seis_sxp"/>
      <xs:enumeration value="seis_sxm"/>
      <xs:enumeration value="seis_syp"/>
      <xs:enumeration value="seis_sym"/>
      <xs:enumeration value="soil_dead_load"/>
      <xs:enumeration value="prestressing"/>
      <xs:enumeration value="fire"/>
      <xs:enumeration value="deviation"/>
      <xs:enumeration value="notional"/>
      <xs:enumeration value="pile"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- load case duration type -->
  <xs:simpleType name="loadcasedurationtype">
    <xs:restriction base="xs:string">
      <xs:enumeration value="permanent"/>
      <xs:enumeration value="long-term"/>
      <xs:enumeration value="medium-term"/>
      <xs:enumeration value="short-term"/>
      <xs:enumeration value="instantaneous"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- load case type -->
  <xs:complexType name="load_case_type">
    <xs:sequence />
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="name"           type="name80"               use="required" />
    <xs:attribute      name="type"           type="loadcasetype_type"    use="required" />
    <xs:attribute      name="duration_class" type="loadcasedurationtype" default="permanent" />
    <xs:attribute      name="position"       type="name79"               use="optional" />  <!-- From FD20 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- special load case item types,  from FD19 -->
  <xs:complexType name="spec_load_case_item">
    <xs:sequence />
    <xs:attribute name="gamma" type="xs:double" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- special load CS case item, from FD21.00.003 -->
  <xs:complexType name="spec_cs_load_case_item">
    <xs:sequence />
    <xs:attribute name="type"  type="cs_case_id" use="required" />
    <xs:attribute name="gamma" type="xs:double"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- ==== moving load types, from FD19 === -->

  <xs:complexType name="vehicle_lib_type">
    <xs:sequence> <!-- At least one load is required! -->
      <xs:element name="point_load"   type="caseless_point_load_type"   minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="line_load"    type="caseless_line_load_type"    minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="surface_load" type="caseless_surface_load_type" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="lib_base_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="path_distance_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.1"/>
      <xs:maxInclusive value="1000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="grid_distance_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.001"/>
      <xs:maxInclusive value="1000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="path_division_number_type"> <!-- From FD19 -->
    <xs:attribute      name="value"         type="int_1_to_1000"      use="required"  />
  </xs:complexType>

  <xs:complexType name="path_division_lengt_type"> <!-- From FD19 -->
    <xs:attribute      name="value"         type="path_distance_type" use="required"  />
  </xs:complexType>

  <xs:simpleType name="vshift_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1000.0"/>
      <xs:maxInclusive value="+1000.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="moving_load_grid_type">
    <xs:sequence>
      <xs:element name="local_pos"           type="point_type_3d" />
      <xs:element name="local_x"             type="point_type_3d" />
      <xs:element name="local_y"             type="point_type_3d" />
      <xs:element name="contour"             type="contour_type" />
    </xs:sequence>
    <xs:attribute      name="grid_x"         type="grid_distance_type"  use="required"  />
    <xs:attribute      name="grid_y"         type="grid_distance_type"  use="required"  />
    <xs:attribute      name="edge_x"         type="abs_max_1000"        use="required"  />
    <xs:attribute      name="edge_y"         type="abs_max_1000"        use="required"  />
  </xs:complexType>

  <xs:complexType name="moving_load_type"> <!-- From FD19 -->
    <xs:sequence>
      <xs:choice>
      <!-- Choice: Line moving load -->
        <xs:sequence>
          <xs:choice>
            <xs:element name="division_points"   type="path_division_number_type"  />
            <xs:element name="division_distance" type="path_division_lengt_type"   />
           </xs:choice>
          <!-- Positions are pacings' order -->
          <xs:element name="path_position"    type="point_type_3d"     minOccurs="2" maxOccurs="unbounded" />
          <!-- Path segments' local y directions.
          Required if there is at least one user-specified path segment with a different orientation.
          (No more than the same number of path segments will be used) -->
          <xs:element name="local_y"          type="point_type_3d"     minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20 -->

        </xs:sequence>
        <!-- Choice: Surface moving load, from FD20 -->
        <xs:sequence>
          <xs:element name="grid"   type="moving_load_grid_type" />
        </xs:sequence>
      </xs:choice>
      <xs:choice>
        <!-- 1st choice, from FD20 -->
        <xs:sequence>
         <xs:element name="added_vehicle_position"   type="point_type_3d"     minOccurs="0" maxOccurs="unbounded" />
         <xs:element name="deleted_vehicle_position" type="point_type_3d"     minOccurs="0" maxOccurs="unbounded" />
        </xs:sequence>
        <!-- 2nd choic, from FD21: -->
        <xs:sequence>
         <xs:element name="vehicle_positions"                                 minOccurs="0" maxOccurs="1" >
           <xs:complexType>
             <xs:sequence>
               <xs:element name="position"           type="point_type_3d"     minOccurs="1" maxOccurs="unbounded"/>
             </xs:sequence>
           </xs:complexType>
         </xs:element>
        </xs:sequence>
      </xs:choice>
    </xs:sequence>
    <xs:attributeGroup ref ="entity_attribs" />
    <xs:attribute      name="name"            type="name255"     use="required"  />
    <xs:attribute      name="vehicle"         type="guidtype"    use="required"  />
    <xs:attribute      name="vehicle_shift_x" type="vshift_type" default="0.0"  />  <!-- From FD20 -->
    <xs:attribute      name="vehicle_shift_y" type="vshift_type" default="0.0"  />  <!-- From FD20 -->
    <xs:attribute      name="return"          type="xs:boolean"  default="false" /> <!-- not used in case of surface moving loads -->
    <xs:attribute      name="lock_direction"  type="xs:boolean"  default="false" />
    <xs:attribute      name="cut_to_path"     type="xs:boolean"  default="false" /> <!-- means cut to region in case of surface moving loads -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- load combination type -->
  <xs:complexType name="load_combination_type">
    <xs:sequence>
      <xs:element name="load_case" minOccurs="0" maxOccurs="unbounded">
        <xs:complexType>
          <xs:attribute name="guid"  type="common_load_case" use="required" />
          <xs:attribute name="gamma" type="xs:double"        use="required" />
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>
      <!-- special load cases of the combination, from FD18 -->
      <xs:element name="seismic_max"             type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="seismic_res_fx_plus_mx"  type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="seismic_res_fx_minus_mx" type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="seismic_res_fy_plus_my"  type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="seismic_res_fy_minus_my" type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="seismic_res_fz"          type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <!-- special load cases of the combination, from FD19 -->
      <xs:element name="ptc_t0"                  type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <xs:element name="ptc_t8"                  type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <!-- special load case of the combination, from FD20 -->
      <xs:element name="ldcase_pile"             type="spec_load_case_item"   minOccurs="0" maxOccurs="1"/>
      <!-- CS case, from FD21.00.003 -->
      <xs:element name="cs_case"                 type="spec_cs_load_case_item"   minOccurs="0" maxOccurs="1"/> <!-- From FD21.00.003 -->
    </xs:sequence>
    <xs:attributeGroup ref ="entity_attribs" />
    <xs:attribute      name="name" type="name159"      use="required" />
    <xs:attribute      name="type" type="loadcombtype" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="ldgroup_relation">
    <xs:restriction base="xs:string">
      <xs:enumeration value=""/>
      <xs:enumeration value="alternative"/>
      <xs:enumeration value="simultaneous"/>
      <xs:enumeration value="entire"/>
      <xs:enumeration value="custom"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="LDG_relation_factor_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-1E20"/>
      <xs:maxInclusive value="+1E20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="ldgroup_relation_list_type">
    <xs:list itemType="LDG_relation_factor_type"/>
  </xs:simpleType>

  <xs:complexType name="ldgroup_relation_record_type">
    <xs:attribute    name="name"     type="name79"     use="required" />
    <xs:attribute    name="factors"  type="ldgroup_relation_list_type"  use="required" />
    <xs:anyAttribute processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="ldgroup_relation_table">
    <xs:sequence>
      <xs:element name="record" type="ldgroup_relation_record_type"  minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <!-- Load groups' subgroup, From FD20: -->
  <xs:complexType name = "load_subgroup">
     <xs:sequence>
        <xs:element name="load_case"   type="reference_type" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="ptc_t0"      type="empty_type"     minOccurs="0" maxOccurs="1" />
        <xs:element name="ptc_t8"      type="empty_type"     minOccurs="0" maxOccurs="1" />
        <xs:element name="ldcase_pile" type="empty_type"     minOccurs="0" maxOccurs="1" />
        <xs:element name="final_cs"    type="empty_type"     minOccurs="0" maxOccurs="1" /> <!-- from FD21.00.003 -->
     </xs:sequence>
     <xs:attribute      name="name"     type="name79"    use="required" />
     <xs:attribute      name="master"   type="guidtype"  use="optional" />
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--load group types,  from FD18 -->
  <xs:attributeGroup name="ldgroup_attribs">
    <xs:attribute name="name"             type="name79"           use="required" />        <!-- Do not modify the name of moving load's temporary subgroup; it must be equal with one of its subgroups's name! -->
    <xs:attribute name="guid"             type="guidtype"         use="required" />
    <xs:attribute name="consider_in_gmax" type="xs:boolean"	      default="true" />        <!-- From FD20 -->
  </xs:attributeGroup>

  <xs:complexType name="accidental_load_group">
     <xs:sequence> <!-- At least one of the following load case elements is required! -->
        <xs:element name="load_case"   type="reference_type" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="ptc_t0"      type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD19 -->
        <xs:element name="ptc_t8"      type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD19 -->
        <xs:element name="ldcase_pile" type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD20 -->
        <xs:element name="final_cs"    type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- from FD21.00.003 -->

        <xs:element name="subgroup"  type="load_subgroup"          minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20: -->
        <xs:element name="relations" type="ldgroup_relation_table" minOccurs="0" maxOccurs="1" />         <!-- From FD20, used only for custom relationship -->
     </xs:sequence>
     <xs:attribute      name="safety_factor"    type="positive_max_10"  use="required" />
     <xs:attribute      name="using_Psi_1"      type="xs:boolean"       default="true" />        <!-- From FD20 -->
     <xs:attribute      name="relationship"     type="ldgroup_relation" default="alternative" /> <!-- From FD20 -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name = "permanent_load_group">
     <xs:sequence> <!-- At least one of the following load case elements is required! -->
        <xs:element name="load_case"   type="reference_type" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="ptc_t0"      type="empty_type"     minOccurs="0" maxOccurs="1" />      <!-- From FD19: -->
        <xs:element name="ptc_t8"      type="empty_type"     minOccurs="0" maxOccurs="1" />      <!-- From FD19: -->
        <xs:element name="ldcase_pile" type="empty_type"     minOccurs="0" maxOccurs="1" />      <!-- From FD20 -->
        <xs:element name="final_cs"    type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- from FD21.00.003 -->

        <xs:element name="subgroup"  type="load_subgroup"          minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20: -->
        <xs:element name="relations" type="ldgroup_relation_table" minOccurs="0" maxOccurs="1" />         <!-- From FD20, used only for custom relationship -->
     </xs:sequence>
     <xs:attribute      name="standard_favourable"     type="positive_max_10"  use="required" />
     <xs:attribute      name="standard_unfavourable"   type="positive_max_10"  use="required" />
     <xs:attribute      name="accidental_favourable"   type="positive_max_10"  use="required" />
     <xs:attribute      name="accidental_unfavourable" type="positive_max_10"  use="required" />
     <xs:attribute      name="xi"                      type="positive_max_10"  use="required" />
     <xs:attribute      name="relationship"     type="ldgroup_relation" default="alternative" /> <!-- From FD20 -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name = "stress_load_group">
     <xs:sequence> <!-- At least one of the following load case elements is required! -->
        <xs:element name="load_case"   type="reference_type" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="ptc_t0"      type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD19: -->
        <xs:element name="ptc_t8"      type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD19: -->
        <xs:element name="ldcase_pile" type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- From FD20 -->
        <xs:element name="final_cs"    type="empty_type"     minOccurs="0" maxOccurs="1" />     <!-- from FD21.00.003 -->

        <xs:element name="subgroup"  type="load_subgroup"          minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20: -->
        <xs:element name="relations" type="ldgroup_relation_table" minOccurs="0" maxOccurs="1" />         <!-- From FD20, used only for custom relationship -->
     </xs:sequence>
     <xs:attribute      name="standard"      type="positive_max_10"  use="required" />
     <xs:attribute      name="accidental"    type="positive_max_10"  use="required" />
     <xs:attribute      name="relationship"  type="ldgroup_relation" default="alternative" /> <!-- From FD20 -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name = "seismic_load_group" >
     <xs:sequence>
        <xs:element name="load_case" type="reference_type" minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20, but valid only for seismic & normal cases if 'user_defined_cases' = true -->
     </xs:sequence>
    <xs:attribute      name="safety_factor"      type="positive_max_10" use="required" />
    <xs:attribute      name="user_defined_cases" type="xs:boolean"      default="false" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name = "temporary_load_group" >
    <xs:sequence>
      <xs:element name="load_case"                 type="reference_type" minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="ptc_t0"                    type="empty_type"     minOccurs="0" maxOccurs="1" /> <!-- From FD19: -->
      <xs:element name="ptc_t8"                    type="empty_type"     minOccurs="0" maxOccurs="1" /> <!-- From FD19: -->
      <xs:element name="ldcase_pile"               type="empty_type"     minOccurs="0" maxOccurs="1" /> <!-- From FD20 -->
      <xs:element name="final_cs"                  type="empty_type"     minOccurs="0" maxOccurs="1" /> <!-- from FD21.00.003 -->
      <xs:element name="load_cases_of_moving_load"                       minOccurs="0" maxOccurs="unbounded"  > <!-- From FD19; from FD20 it automatically makes a new subgroups from FD20 -->
        <xs:complexType>
          <xs:attribute      name="guid"           type="guidtype"       use="required"  />
          <xs:attribute      name="master"         type="guidtype"       use="optional"  /> <!-- From FD20.00.003 -->
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
      </xs:element>

      <xs:element name="subgroup"  type="load_subgroup"          minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20: -->
      <xs:element name="relations" type="ldgroup_relation_table" minOccurs="0" maxOccurs="1" />         <!-- From FD20, used only for custom relationship -->
    </xs:sequence>

     <xs:attribute      name="safety_factor"  type="positive_max_10"  use="required"  />
     <xs:attribute      name="psi_0"          type="non_neg_max_10"   use="required"  />
     <xs:attribute      name="psi_1"          type="non_neg_max_10"   use="required"  />
     <xs:attribute      name="psi_2"          type="non_neg_max_10"   use="required"  />
     <xs:attribute      name="leading_cases"  type="xs:boolean"       default="false" />
     <xs:attribute      name="ignore_sls"     type="xs:boolean"       default="false" />
     <xs:attribute      name="simultaneous"   type="xs:boolean"       default="false" />       <!-- From FD19 and ONLY FOR FD19 models' import! -->
     <xs:attribute      name="relationship"   type="ldgroup_relation" default="alternative" /> <!-- From FD20 -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name = "general_load_group_type" >
    <xs:sequence>
      <xs:choice>
        <xs:element name="accidental"  type="accidental_load_group" />
        <xs:element name="permanent"   type="permanent_load_group"  />
        <xs:element name="seismic"     type="seismic_load_group"    />
        <xs:element name="stress"      type="stress_load_group"     />
        <xs:element name="temporary"   type="temporary_load_group"  />
      </xs:choice>
    </xs:sequence>
     <xs:attributeGroup ref="ldgroup_attribs" /> <!-- Do not modify the name of moving load's temporary subgroup; it must be equal with one of its subgroups's name! -->
     <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <!--load group table type, from FD18 -->
  <xs:complexType name="load_group_table">
    <xs:sequence>
        <xs:element name="group"  type="general_load_group_type"  minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <!-- No GUID defined, the FD contains only one load group table. -->
    <xs:attribute   name="last_change"               type="xs:dateTime" use="required" />
    <xs:attribute   name="simple_combination_method" type="xs:boolean"  default="true" /> <!-- simple: ECO 6.10, not simple: ECO 6.10a, b,  from FD20 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <xs:complexType name="wl_nt_type">
    <xs:attribute name="mult_factor" type="positive_max_100"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_t_type">
    <xs:attribute name="mult_factor"      type="positive_max_100"  use="required" />
    <xs:attribute name="turbulence"       type="xs:boolean"        use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_st_type">
    <xs:attribute name="suction_factor"   type="positive_max_100"  use="required" />
    <xs:attribute name="turbulence"       type="xs:boolean"        use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="bs_type">
    <xs:attribute name="guid"   type="guidtype"  use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_external_wall_type">
    <xs:sequence>
        <xs:element name="at_0_degree"     type="wl_nt_type" />
        <xs:element name="at_90_degree"    type="wl_t_type" />
        <xs:element name="at_180_degree"   type="wl_nt_type" />
        <xs:element name="at_270_degree"   type="wl_t_type" />
        <xs:element name="base_shell"      type="bs_type"   minOccurs="1" maxOccurs="unbounded" />
        <xs:element name="direction_point" type="point_type_3d" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="load_stripes" type="int_1_to_1000" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_flat_roof_type">
    <xs:sequence>
        <xs:element name="at_0_degree"    type="wl_t_type" />
        <xs:element name="at_90_degree"   type="wl_t_type" />
        <xs:element name="at_180_degree"  type="wl_t_type" />
        <xs:element name="at_270_degree"  type="wl_t_type" />
        <xs:element name="base_shell"     type="bs_type"   minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="angle"              type="full_circle"     use="required" />
    <xs:attribute      name="attic_walls_height" type="non_neg_max_100" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_leanto_type">
    <xs:sequence>
        <xs:element name="at_0_degree"    type="wl_st_type" />
        <xs:element name="at_90_degree"   type="wl_t_type" />
        <xs:element name="at_180_degree"  type="wl_t_type" />
        <xs:element name="at_270_degree"  type="wl_t_type" />
        <xs:element name="base_shell"     type="bs_type"   minOccurs="1" maxOccurs="unbounded" />

    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:attribute      name="pressure_factor" type="positive_max_100" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="wl_ridge_roof_type">
    <xs:sequence>
        <xs:element name="at_0_degree"    type="wl_t_type" />
        <xs:element name="at_90_degree"   type="wl_t_type" />
        <xs:element name="at_180_degree"  type="wl_t_type" />
        <xs:element name="at_270_degree"  type="wl_t_type" />
        <xs:element name="base_shell"     type="bs_type"   minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attributeGroup ref="entity_attribs" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="fdarc3_type">
    <xs:sequence>
      <xs:element name="centre"           type="point_type_3d" />
      <xs:element name="local_x"          type="point_type_3d" />
      <xs:element name="local_y"          type="point_type_3d" />
    </xs:sequence>
    <xs:attribute      name="radius"      type="positive_max_1e23" use="required"/>
    <xs:attribute      name="start_angle" type="full_circle"       use="required" />
    <xs:attribute      name="end_angle"   type="full_circle"       use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <!-- =============  Geometry types  ============================== -->
  <xs:simpleType name="pointstyle_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="cross" />
      <xs:enumeration value="plus_sign" />
      <xs:enumeration value="diamond" />
      <xs:enumeration value="square" />
      <xs:enumeration value="dot" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="fillmode_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="auto_fill" />
      <xs:enumeration value="colour" />
      <xs:enumeration value="no_fill" />
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="fill_type">
    <xs:attribute      name="mode"       type="fillmode_type"  default="auto_fill" />
    <xs:attribute      name="colour"     type="rgb_color_type" default="000000"    />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="penwidth_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="0.0"/>
      <xs:maxInclusive value="1E23"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="slant_type">
    <xs:restriction base="xs:double">
      <xs:minInclusive value="-80.0"/>
      <xs:maxInclusive value="+80.0"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="script_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="default"/>
      <xs:enumeration value="Arabic"/>
      <xs:enumeration value="Baltic"/>
      <xs:enumeration value="CE"/>
      <xs:enumeration value="Cyrillik"/>
      <xs:enumeration value="Greek"/>
      <xs:enumeration value="Hebrew"/>
      <xs:enumeration value="OEM/DOS"/>
      <xs:enumeration value="symbol"/>
      <xs:enumeration value="Thai"/>
      <xs:enumeration value="Turkish"/>
      <xs:enumeration value="Vietnamese"/>
      <xs:enumeration value="Western"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- dimtext font type-->
  <xs:complexType      name="dimtext_font_type">
    <xs:attribute      name="font"      type="xs:string"         default="Tahoma" />
    <xs:attribute      name="script"    type="script_type"       default="Western" />
    <xs:attribute      name="size"      type="positive_max_1e23" default="0.004" />
    <xs:attribute      name="width"     type="positive_max_10"   default="1.0" />
    <xs:attribute      name="slant"     type="slant_type"        default="0.0" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--text font type-->
  <xs:complexType      name="font_type">
    <xs:complexContent>
      <xs:extension base="dimtext_font_type">
        <xs:attribute      name="h_align"   type="hor_align"    default="left" />
        <xs:attribute      name="v_align"   type="ver_align"    default="bottom" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <!-- style type for geometry -->
  <xs:complexType name="style_type">
    <xs:sequence>
       <xs:element name="filling" type="fill_type" minOccurs="0" maxOccurs="1" />
       <xs:element name="font"    type="font_type" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute      name="layer"       type="layer_name"      default="0" />
    <xs:attribute      name="colour"      type="rgb_color_type"  default="000000"/>
    <xs:attribute      name="line_style"  type="name255"         default="CONTINUOUS"     />
    <xs:attribute      name="penwidth"    type="abs_max_10000"   default="0"     />
    <xs:attribute      name="point_style" type="pointstyle_type" default="cross" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- point type for geometry -->
  <xs:complexType name="point_type">
    <xs:sequence>
       <xs:element name="location" type="point_type_3d" />
       <xs:element name="style"    type="style_type" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
  </xs:complexType>

  <!-- solid type for geometry - this is the representation of SOLID, not TSOLID -->
  <xs:complexType name="solid_type">
    <xs:sequence>
      <xs:element name="facets"  type="region_group_type" />
      <xs:element name="style"   type="style_type" minOccurs="0" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute      name="guid" type="guidtype" use="optional" /> <!-- but required for graphics solids! From FD21 -->
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- curve type for geometry -->
  <xs:complexType name="curve_type">
    <xs:complexContent>
      <xs:extension base="edge_type">
        <xs:sequence>
          <xs:element name="style"  type="style_type" minOccurs="0" maxOccurs="1" />
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:simpleType name="lengthunit_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="mm"/>
      <xs:enumeration value="cm"/>
      <xs:enumeration value="dm"/>
      <xs:enumeration value="m"/>
      <xs:enumeration value="inch"/>
      <xs:enumeration value="feet"/>
      <xs:enumeration value="yd"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="angleunit_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="degree"/>
      <xs:enumeration value="rad"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="halign_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="centered"/>
      <xs:enumeration value="1st_ext_line"/>
      <xs:enumeration value="2nd_ext_line"/>
      <xs:enumeration value="under_1st_ext_line"/>
      <xs:enumeration value="over_2nd_ext_line"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="valign_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="above"/>
      <xs:enumeration value="outside"/>
    </xs:restriction>
  </xs:simpleType>

  <!-- dimtext for geometry -->
  <xs:complexType name="dimtext_type">
    <xs:sequence>
      <xs:element name="position" type="dimtext_font_type" />
      <xs:element name="plane_x"  type="point_type_3d" />
      <xs:element name="plane_y"  type="point_type_3d" />
    </xs:sequence>
    <xs:attribute      name="value"               type="xs:double"       use="required"/>
    <xs:attribute      name="text"                type="name255"         use="optional"/>
    <xs:attribute      name="decimals"            type="int_0_to_10"     default="2"/>
    <xs:attribute      name="length_unit"         type="lengthunit_type" default="m"/>
    <xs:attribute      name="angle_unit"          type="angleunit_type"  default="rad"/>
    <xs:attribute      name="measurement_unit"    type="xs:boolean"      default="false"/>
    <xs:attribute      name="prefix"              type="name15"          default=""/>
    <xs:attribute      name="suffix"              type="name15"          default=""/>
    <xs:attribute      name="colour"              type="rgb_color_type"  default="000000"/>
    <xs:attribute      name="h_align"             type="halign_type"     default="centered"     />
    <xs:attribute      name="v_align"             type="valign_type"     default="above"     />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- arrow for geometry -->
  <xs:simpleType name="arrowtype_type">
    <xs:restriction base="xs:string">
      <xs:enumeration value="open"/>
      <xs:enumeration value="close"/>
      <xs:enumeration value="break"/>
      <xs:enumeration value="fill"/>
      <xs:enumeration value="circle"/>
      <xs:enumeration value="dot"/>
      <xs:enumeration value="tick"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="arrow_type">
    <xs:attribute      name="type"        type="arrowtype_type"      default="tick" />
    <xs:attribute      name="size"        type="non_neg_max_1e23"    default="0.005" />
    <xs:attribute      name="penwidth"    type="non_neg_max_1e23"    default="0.00018"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="line_type">
      <xs:sequence>
        <xs:element name="start" type="point_type_3d" />
        <xs:element name="end"   type="point_type_3d" />
      </xs:sequence>
  </xs:complexType>

  <xs:complexType name="dimdimline_type">
    <xs:attribute      name="extension_a" type="non_neg_max_1e23"    default="0.005"/>
    <xs:attribute      name="penwidth"    type="non_neg_max_1e23"    default="0.00018"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:complexType name="extline_type">
    <xs:attribute      name="lines"                type="xs:boolean"       default="true"/>
    <xs:attribute      name="base_point_on_dimension_line"  type="xs:boolean"       default="false"/>
    <xs:attribute      name="extension_a"          type="non_neg_max_1e23" default="0.0"/>
    <xs:attribute      name="extension_b"          type="non_neg_max_1e23" default="0.0"/>
    <xs:attribute      name="offset_c"             type="non_neg_max_1e23" default="0.0"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


  <!-- dimline for geometry -->
  <xs:complexType name="dimline_type">
    <xs:sequence>
      <xs:element name="point"            type="point_type_3d"  minOccurs="2" maxOccurs="unbounded" />

      <xs:element name="position"         type="point_type_3d" />
      <xs:element name="plane_x"          type="point_type_3d" />
      <xs:element name="plane_y"          type="point_type_3d" />
      <xs:element name="dimension_line"   type="dimdimline_type" />
      <xs:element name="extension_line"   type="extline_type" />
      <xs:element name="arrow"            type="arrow_type" />
      <xs:element name="font"             type="dimtext_font_type" />
      <xs:element name="text"             type="dimtext_type" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required" />
    <xs:attribute      name="dynamic"     type="xs:boolean"        default="false" />
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- dimarc for geometry -->
  <xs:complexType name="dimarc_type">
    <xs:sequence>
      <xs:element name="arc"              type="fdarc3_type" />
      <xs:element name="position"         type="point_type_3d" />
      <xs:element name="dimension_line"   type="dimdimline_type" />
      <xs:element name="extension_line"   type="extline_type" />
      <xs:element name="arrow"            type="arrow_type" />
      <xs:element name="font"             type="dimtext_font_type" />
      <xs:element name="text"             type="dimtext_type" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required" />
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- dimdiam for geometry -->
  <xs:complexType name="dimdiam_type">
    <xs:sequence>
      <xs:element name="arc"              type="fdarc3_type" />
      <xs:element name="position"         type="point_type_3d" />
      <xs:element name="dimension_line"   type="dimdimline_type" />
      <xs:element name="arrow"            type="arrow_type" />
      <xs:element name="font"             type="dimtext_font_type" />
      <xs:element name="text"             type="dimtext_type" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required" />
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- dimradius for geometry -->
  <xs:complexType name="dimradius_type">
    <xs:sequence>
      <xs:element name="arc"              type="fdarc3_type" />
      <xs:element name="position"         type="point_type_3d" />
      <xs:element name="dimension_line"   type="dimdimline_type" />
      <xs:element name="arrow"            type="arrow_type" />
      <xs:element name="font"             type="dimtext_font_type" />
      <xs:element name="text"             type="dimtext_type" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required" />
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- dimangle for geometry -->
  <xs:complexType name="dimangle_type">
    <xs:sequence>
      <xs:element name="arc"              type="fdarc3_type" />
      <xs:element name="base"             type="point_type_3d" />
      <xs:element name="line1"            type="line_type" />
      <xs:element name="line2"            type="line_type" />
      <xs:element name="dimension_line"   type="dimdimline_type" />
      <xs:element name="extension_line"   type="extline_type" />
      <xs:element name="arrow"            type="arrow_type" />
      <xs:element name="font"             type="dimtext_font_type" />
      <xs:element name="text"             type="dimtext_type" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required"/>
    <xs:attribute      name="beta"        type="xs:double"         use="required"/>
    <xs:attribute      name="rs1"         type="xs:double"         use="required"/>
    <xs:attribute      name="re1"         type="xs:double"         use="required"/>
    <xs:attribute      name="rs2"         type="xs:double"         use="required"/>
    <xs:attribute      name="re2"         type="xs:double"         use="required"/>
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!-- dimfloor for geometry -->
  <xs:complexType name="dimfloor_type">
    <xs:sequence>
      <xs:element name="position" type="point_type_3d" />
      <xs:element name="plane_x"  type="point_type_3d" />
      <xs:element name="plane_y"  type="point_type_3d" />
      <xs:element name="font"     type="dimtext_font_type" />
      <xs:element name="text"     type="dimtext_type" />
    </xs:sequence>
    <xs:attribute      name="guid"        type="guidtype"          use="required" />
    <xs:attribute      name="size"        type="positive_max_1e23" use="required" />
    <xs:attribute      name="layer"       type="layer_name"        default="DIM" />
    <xs:attribute      name="colour"      type="rgb_color_type"    default="000000"/>
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--layer type-->
  <xs:complexType name="layer_type">
    <xs:attribute      name="name"      type="layer_name"     default="0" />
    <xs:attribute      name="colour"    type="rgb_color_type" default="000000" />
    <xs:attribute      name="hidden"    type="xs:boolean"     default="false"  />
    <xs:attribute      name="protected" type="xs:boolean"     default="false"  />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <xs:simpleType name="linetype_data_type">
    <xs:list itemType="abs_max_1000"/>
  </xs:simpleType>

  <!--line type type-->
  <xs:complexType name="linetype_type">
    <xs:attribute      name="name"      type="xs:string" use="required" />
    <xs:attribute      name="distances" type="linetype_data_type" use="optional" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>

  <!--text type-->
  <xs:complexType name="text_type">
    <xs:sequence>
      <xs:element name="position" type="point_type_3d" />
      <xs:element name="local_x"  type="point_type_3d" />
      <xs:element name="local_y"  type="point_type_3d" />
      <xs:element name="style"    type="style_type" />
    </xs:sequence>
    <xs:attribute      name="guid"      type="guidtype"          use="required" />
    <xs:attribute      name="text"      type="geometry_text1023" use="required" />
    <xs:anyAttribute   processContents="skip"/>
  </xs:complexType>


<!-- vv========  STEEL JOINT DEFINITIONS - all sizes are in mm and mm2  ==========vv -->
<xs:simpleType name="bar_internal_force">
  <xs:restriction base="xs:double">
    <xs:minInclusive value="-1E8"/>
    <xs:maxInclusive value="1E8"/>
  </xs:restriction>
</xs:simpleType>

<!-- Bolt types -->
<xs:complexType name="bolt_length_type">
    <xs:attribute name="l"           type="positive_max_500"   use="required" />
    <xs:attribute name="ls"          type="positive_max_500"   use="required" />
    <xs:attribute name="lg"          type="positive_max_500"   use="required" />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="bolt_data_type">
  <xs:sequence>
    <xs:element name="bolt_length"   type="bolt_length_type" minOccurs="1" maxOccurs="100" />
  </xs:sequence>
    <xs:attribute name="family"           type="name40"             use="required" />
    <xs:attribute name="d"                type="positive_max_100"   use="required" />
    <xs:attribute name="pitch"            type="positive_max_100"   use="required" />
    <xs:attribute name="stress_area"      type="positive_max_10000" use="required" />
    <xs:attribute name="bolt_b"           type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_c"           type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_ds"          type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_da"          type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_dw"          type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_e"           type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_k"           type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_s"           type="positive_max_100"   use="required" />
    <xs:attribute name="bolt_r"           type="positive_max_100"   use="required" />
    <xs:attribute name="nut_m"            type="positive_max_100"   use="required" />
    <xs:attribute name="nut_e"            type="positive_max_100"   use="required" />
    <xs:attribute name="nut_s"            type="positive_max_100"   use="required" />
    <xs:attribute name="washer_thickness" type="positive_max_100"   use="required" />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="bolt_lib_type">
  <xs:sequence>
    <xs:element name="bolt_data"   type="bolt_data_type" />
  </xs:sequence>
  <xs:attributeGroup ref ="lib_base_attribs" />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- Component types -->
<xs:simpleType name="sj_component_values">
  <xs:restriction base="xs:string">
    <xs:enumeration value="buckling"/>
    <xs:enumeration value="endplate"/>
    <xs:enumeration value="haunch_top"/>
    <xs:enumeration value="haunch_bottom"/>
    <xs:enumeration value="stiffener_top"/>
    <xs:enumeration value="stiffener_bottom"/>
    <xs:enumeration value="stiffener_diagonal"/>
    <xs:enumeration value="stiffener_general"/>
    <xs:enumeration value="stiffener_triangular"/>
    <xs:enumeration value="fin_plate"/>
    <xs:enumeration value="splice_web"/>
    <xs:enumeration value="splice_flange_bottom"/>
    <xs:enumeration value="splice_flange_top"/>
    <xs:enumeration value="cover_plate"/>
    <xs:enumeration value="heel"/>
    <xs:enumeration value="gusset_plate"/>
    <xs:enumeration value="champfer_plate"/>
    <xs:enumeration value="backing_plate"/>
    <xs:enumeration value="support_plate"/>
    <xs:enumeration value="concrete"/>
    <xs:enumeration value="notch"/>
    <xs:enumeration value="gap"/>
    <xs:enumeration value="eccentricity"/>
    <xs:enumeration value="cut"/>
    <xs:enumeration value="bolts"/>
    <xs:enumeration value="welds"/>
    <xs:enumeration value="geometry"/>
    <xs:enumeration value="endplate_bolts"/>
    <xs:enumeration value="endplate_welds"/>
    <xs:enumeration value="endplate_welds_at_beam"/>
    <xs:enumeration value="endplate_welds_at_column"/>
    <xs:enumeration value="splice_web_bolts"/>
    <xs:enumeration value="flange_bolts"/>
    <xs:enumeration value="splice_web_weld"/>
    <xs:enumeration value="flange_splice_weld"/>
    <xs:enumeration value="fin_bolts"/>
    <xs:enumeration value="fin_welds"/>
    <xs:enumeration value="heel_welds"/>
    <xs:enumeration value="cover_welds"/>
    <xs:enumeration value="support_plate_welds"/>
    <xs:enumeration value="stiffener_welds"/>
    <xs:enumeration value="calculation"/>
    <xs:enumeration value="anchor_geometry"/>
    <xs:enumeration value="anchor_calculations"/>
    <xs:enumeration value="calculation_parameters"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="sj_connected_bar_type" >
  <xs:restriction base="xs:string">
    <xs:enumeration value="columns_end"/>
    <xs:enumeration value="column"/>
    <xs:enumeration value="top_column"/>
    <xs:enumeration value="bottom_column"/>
    <xs:enumeration value="beam"/>
    <xs:enumeration value="beam_1"/>
    <xs:enumeration value="beam_2"/>
    <xs:enumeration value="brace_1"/>
    <xs:enumeration value="brace_2"/>
    <xs:enumeration value="chord"/>
    <xs:enumeration value="joint"/>
    <xs:enumeration value="foundation"/>
    <xs:enumeration value="anchor-concrete_interaction"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="sj_data_str">
  <xs:restriction base="xs:string">
      <xs:pattern value="[\!-\~]{1}[ -\~]{0,49}"/> <!-- at least one non-space char required,  max 49 ASCII char allowed -->
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="sj_datatype_names">
  <xs:restriction base="xs:string">
    <xs:enumeration value="buckling_lc_y" />
    <xs:enumeration value="buckling_lc_z" />
    <xs:enumeration value="buckling_x_y"  />
    <xs:enumeration value="buckling_x_z"  />
    <xs:enumeration value="brace_chord_distance"  />
    <xs:enumeration value="brace_cut_type"        />
    <xs:enumeration value="brace_cut_distance"    />
    <xs:enumeration value="brace_eccentricity"    />
    <xs:enumeration value="brace_overlapped"      />
    <xs:enumeration value="brace_overlapped_weld" />
    <xs:enumeration value="calc_tension_boltrows_for_shear" />
    <xs:enumeration value="foundation_beta"                 />
    <xs:enumeration value="foundation_cfd"                  />
    <xs:enumeration value="foundation_cmin"                 />
    <xs:enumeration value="foundation_cracked"              />
    <xs:enumeration value="foundation_ey"                   />
    <xs:enumeration value="foundation_ez"                   />
    <xs:enumeration value="foundation_failure_check"        />
    <xs:enumeration value="foundation_gamma_mc"             />
    <xs:enumeration value="foundation_gamma_mp"             />
    <xs:enumeration value="foundation_gamma_msp"            />
    <xs:enumeration value="foundation_h"                    />
    <xs:enumeration value="foundation_hmin"                 />
    <xs:enumeration value="foundation_ignore_cone_failure"  />
    <xs:enumeration value="foundation_ignore_split_failure" />
    <xs:enumeration value="foundation_kcr"                  />
    <xs:enumeration value="foundation_kj"                   />
    <xs:enumeration value="foundation_kucr"                 />
    <xs:enumeration value="foundation_l"                    />
    <xs:enumeration value="foundation_material"             />
    <xs:enumeration value="foundation_smin"                 />
    <xs:enumeration value="foundation_u"                    />
    <xs:enumeration value="foundation_w"                    />
    <xs:enumeration value="notch_hb" />
    <xs:enumeration value="notch_ht" />
    <xs:enumeration value="notch_eb" />
    <xs:enumeration value="notch_et" />
    <xs:enumeration value="gap_size" />
    <xs:enumeration value="plate_apply" />
    <xs:enumeration value="plate_material" />
    <xs:enumeration value="plate_tp" />
    <xs:enumeration value="plate_bp" />
    <xs:enumeration value="plate_hp" />
    <xs:enumeration value="plate_length" />
    <xs:enumeration value="plate_aux_param1" />
    <xs:enumeration value="plate_aux_param2" />
    <xs:enumeration value="plate_aux_param3" />
    <xs:enumeration value="plate_aux_param4" />
    <xs:enumeration value="plate_aux_param5" />
    <xs:enumeration value="plate_aux_param6" />
    <xs:enumeration value="plate_aux_param7" />
    <xs:enumeration value="plate_aux_param8" />
    <xs:enumeration value="bolt_type" />
    <xs:enumeration value="bolt_quality" />
    <xs:enumeration value="bolt_prestressed" />
    <xs:enumeration value="bolt_flip" />
    <xs:enumeration value="bolt_washer_at_nut" />
    <xs:enumeration value="bolt_washer_at_head" />
    <xs:enumeration value="anchor_diameter" />
    <xs:enumeration value="anchor_quality" />
    <xs:enumeration value="anchor_surface" />
    <xs:enumeration value="anchor_m" />
    <xs:enumeration value="anchor_tb" />
    <xs:enumeration value="anchor_use_max_of_ftrd" />
    <xs:enumeration value="anchor_ftrd" />
    <xs:enumeration value="anchor_type" />
    <xs:enumeration value="anchor_shape" />
    <xs:enumeration value="anchor_h" />
    <xs:enumeration value="anchor_lhoriz" />
    <xs:enumeration value="anchor_rbend" />
    <xs:enumeration value="anchor_checkadh" />
    <xs:enumeration value="anchor_dh" />
    <xs:enumeration value="anchor_cfd" />
    <xs:enumeration value="bolt_group_ncol" />
    <xs:enumeration value="bolt_group_nrow" />
    <xs:enumeration value="bolt_group_c1" />
    <xs:enumeration value="bolt_group_c2" />
    <xs:enumeration value="bolt_group_c3" />
    <xs:enumeration value="bolt_group_c4" />
    <xs:enumeration value="bolt_group_e0" />
    <xs:enumeration value="bolt_group_e"  />
    <xs:enumeration value="bolt_group_e1" />
    <xs:enumeration value="bolt_group_e2" />
    <xs:enumeration value="bolt_group_rows" />
    <xs:enumeration value="weld_type"  />
    <xs:enumeration value="weld_s"     />
    <xs:enumeration value="weld_a"     />
    <xs:enumeration value="weld_afht"  />
    <xs:enumeration value="weld_awht"  />
    <xs:enumeration value="weld_af1"   />
    <xs:enumeration value="weld_aft"   />
    <xs:enumeration value="weld_aw(l)" />
    <xs:enumeration value="weld_awr"   />
    <xs:enumeration value="weld_af(b)" />
    <xs:enumeration value="weld_af4"   />
    <xs:enumeration value="weld_awhb"  />
    <xs:enumeration value="weld_afhb"  />
    <xs:enumeration value="weld_awh_top" />
    <xs:enumeration value="weld_awh_bottom" />
    <xs:enumeration value="weld_af1_back" />
    <xs:enumeration value="weld_aft_back" />
    <xs:enumeration value="weld_afw_back" />
    <xs:enumeration value="weld_afb_back" />
    <xs:enumeration value="weld_af4_back" />
    <xs:enumeration value="weld_length" />
    <xs:enumeration value="weld_edges" />
    <xs:enumeration value="weld_buttering" />
    <xs:enumeration value="weld_preheating" />
  </xs:restriction>
</xs:simpleType>

<xs:complexType name="sj_data_type">
    <xs:attribute name="type"           type="sj_datatype_names"     use="required" />
    <xs:attribute name="value"          type="sj_data_str"           use="required" />
    <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="sj_boltline_type">
    <xs:attribute name="distance"       type="sj_data_str"           use="required" />
    <xs:attribute name="from"           type="sj_data_str"           use="required" />
    <xs:attribute name="bolts"          type="sj_data_str"           use="required" />
    <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="sj_component_type">
  <xs:sequence>
    <xs:element name="record" >
      <xs:complexType>
         <xs:sequence>
           <xs:element name="property"      type="sj_data_type"      minOccurs="1"  maxOccurs="17" />
         </xs:sequence>
      </xs:complexType>
    </xs:element>
    <xs:element name="bolt_rows"                                     minOccurs="0"  maxOccurs="1" ><!-- ONLY FOR end_plate_bolts COMPONENT! -->
      <xs:complexType>
         <xs:sequence>
           <xs:element name="row" type="sj_boltline_type"            minOccurs="1"  maxOccurs="unbounded" />
         </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
  <xs:attribute name="type"                 type="sj_component_values"   use="required"/>
  <xs:attribute name="connected_to"             type="sj_connected_bar_type" use="required"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="sj_topology_type">
  <xs:sequence>
    <xs:element name="component"        type="sj_component_type"     minOccurs="1"  maxOccurs="16" />
  </xs:sequence>
</xs:complexType>

<xs:complexType name="sj_force_type">
  <xs:attribute name="n"                type="bar_internal_force"    default="0.0" />
  <xs:attribute name="t_y"              type="bar_internal_force"    default="0.0" />
  <xs:attribute name="t_z"              type="bar_internal_force"    default="0.0" />
  <xs:attribute name="m_x"              type="bar_internal_force"    default="0.0" />
  <xs:attribute name="m_y"              type="bar_internal_force"    default="0.0" />
  <xs:attribute name="m_z"              type="bar_internal_force"    default="0.0" />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="sj_1bar_connection_type">
  <xs:sequence>
    <xs:element name="bar1"                          type="guid_list_type" />
    <xs:element name="load_combination"                                         minOccurs="0"  maxOccurs="unbounded">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="bar1_forces"             type="sj_force_type" />
        </xs:sequence>
        <xs:attribute name="guid"                    type="guidtype"            use="required" />
        <xs:attribute name="_2nd_order_calculation"  type="xs:boolean"          default="false" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="sj_2bars_connection_type">
  <xs:sequence>
    <xs:element name="bar1"                          type="guid_list_type" />
    <xs:element name="bar2"                          type="guid_list_type" />
    <xs:element name="load_combination"                                         minOccurs="0"  maxOccurs="unbounded">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="bar1_forces"             type="sj_force_type" />
          <xs:element name="bar2_forces"             type="sj_force_type" />
        </xs:sequence>
        <xs:attribute name="guid"                    type="guidtype"            use="required" />
        <xs:attribute name="_2nd_order_calculation"  type="xs:boolean"          default="false" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="sj_3bars_connection_type">
  <xs:sequence>
    <xs:element name="bar1"                          type="guid_list_type" />
    <xs:element name="bar2"                          type="guid_list_type" />
    <xs:element name="bar3"                          type="guid_list_type" />
    <xs:element name="load_combination"                                         minOccurs="0"  maxOccurs="unbounded">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="bar1_forces"             type="sj_force_type" />
          <xs:element name="bar2_forces"             type="sj_force_type" />
          <xs:element name="bar3_forces"             type="sj_force_type" />
        </xs:sequence>
        <xs:attribute name="guid"                    type="guidtype"            use="required" />
        <xs:attribute name="_2nd_order_calculation"  type="xs:boolean"          default="false" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="steel_joint_type">
  <xs:sequence>
    <xs:choice> <!--one of the following elements is required-->
      <!-- choice: COLUM SPLICEs -->
      <xs:element name="column_splice_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_splice_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_splice_solution3">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_splice_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_splice_solution5">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"           type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_splice_solution6">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"           type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice: BEAM SPLICEs -->
      <xs:element name="beam_splice_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"           type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution3">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution5">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution6">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_splice_solution7">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice: COLUMN BASEs -->
      <xs:element name="column_base_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_1bar_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="column_base_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_1bar_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice: BEAM TO BEAMs -->
      <xs:element name="beam_to_beam_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_beam_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_beam_solution3">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_beam_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_beam_solution5">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice: BEAM TO COLUMNs -->
      <xs:element name="beam_to_column_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution3">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution5a">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution5b">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution6">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution7">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="beam_to_column_solution8">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice: KNEEs -->
      <xs:element name="knee_solution1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution2">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution3">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution5a">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution5b">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution6a">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution6b">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution7">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="knee_solution8">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution1y">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution1x">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution1k">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution2y">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution2x">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution2k">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution3y">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_2bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution3x">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution3k">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution4">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution5">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- next choice-->
      <xs:element name="bracing_solution6">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="connecting_bars"       type="sj_3bars_connection_type" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <!-- end of choices -->
    </xs:choice>

    <xs:element name="topology"                      type="sj_topology_type"  minOccurs="0"  maxOccurs="1" /> <!-- Topology I/O is not implemented yet! -->
  </xs:sequence>
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="name"                     type="identifier"        default="SJ" />
  <xs:attribute      name="version"                  type="xs:int"            default="1"  />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- ==  Corbels  ====================================================================== -->
<xs:complexType name="column_corbel_type"> <!-- From FD18 -->
  <xs:sequence>
    <xs:element name="connectable_parts"  type="three_guid_list_type" minOccurs="0" maxOccurs="1" /> <!-- Required from FD18.00.003! -->
    <xs:element name="connectivity"       type="connectivity_type" />
    <xs:any minOccurs="0" maxOccurs="unbounded" />
  </xs:sequence>
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="name"                type="identifier"      default=""       /> <!-- empty names generates "CO" in FD -->
  <xs:attribute      name="base_column"         type="guidtype"        use="required"   />
  <xs:attribute      name="complex_material"    type="guidtype"        use="required"   />
  <xs:attribute      name="made"                type="steelmadetype"   default="rolled" />
  <xs:attribute      name="complex_section"     type="guidtype"        use="required"   />

  <xs:attribute      name="pos"                 type="position_type"   use="required"   />
  <xs:attribute      name="alpha"               type="quadrant"        use="required"   />
  <xs:attribute      name="d"                   type="non_neg_max_10"  use="optional"   /> <!-- if it not given, FD uses automatic adjusting -->
  <xs:attribute      name="l"                   type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="e"                   type="abs_max_10"      use="required"   />
  <xs:attribute      name="x"                   type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="y"                   type="abs_max_10"      use="required"   />
  <xs:attribute      name="stage"               type="stage_number"    default="1"      /> <!-- From FD21.00.003 -->
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="wall_corbel_type"> <!-- From FD18 -->
  <xs:sequence>
    <xs:element      name="start_point"         type="point_type_3d" />
    <xs:element      name="end_point"           type="point_type_3d" />
    <xs:element      name="connectable_parts"   type="two_guid_list_type" minOccurs="0" maxOccurs="1" /> <!-- Required from FD18.00.003! -->
    <xs:choice>
      <xs:element    name="rigidity"            type="rigidity_data_type3"/>
      <xs:element    name="predefined_rigidity" type="reference_type"/>
      <!-- new choice from FD20 -->
      <xs:element   name="rigidity_group"       type="rigidity_group_type3"/>
    </xs:choice>
    <xs:any minOccurs="0" maxOccurs="unbounded" />
  </xs:sequence>
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="name"                type="identifier"      default=""       /> <!-- empty names generates "CW" in FD -->
  <xs:attribute      name="positive_side"       type="xs:boolean"      default="true"   />
  <xs:attribute      name="l"                   type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="h1"                  type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="h2"                  type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="x"                   type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="base_wall"           type="guidtype"        use="required"   />
  <xs:attribute      name="complex_material"    type="guidtype"        use="required"   />
  <xs:attribute      name="stage"               type="stage_number"    default="1"      /> <!-- From FD21.00.003 -->
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- ==  stbar_haunch_type  ====================================================== -->

<xs:complexType name="stbar_haunch_type"> <!-- From FD20.00.002 -->
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="base_bar"            type="guidtype"        use="required"   />
  <xs:attribute      name="at_start"            type="xs:boolean"      use="required"   />
  <xs:attribute      name="at_top"              type="xs:boolean"      use="required"   />
  <xs:attribute      name="d"                   type="non_neg_max_10"  use="required"   />
  <xs:attribute      name="l"                   type="positive_max_10" use="required"   />
  <xs:attribute      name="h"                   type="positive_max_10" use="required"   />
  <xs:attribute      name="tw"                  type="positive_max_10" use="required"   />
  <xs:attribute      name="tf"                  type="from_1e-4_to_10" use="required"   />
  <xs:attribute      name="bf"                  type="positive_max_10" use="required"   />

  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- ==  stbar_siffener_type  ====================================================== -->
<xs:complexType name="stbar_siffener_type"> <!-- From FD20.00.002 -->
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="base_bar"            type="guidtype"        use="required"   />
  <xs:attribute      name="pos"                 type="position_type"   use="required"   />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- ==  Covers  ==================================================================== -->
<xs:simpleType name="roof_type">
  <xs:restriction base="xs:string">
    <xs:enumeration value="flat"   />
    <xs:enumeration value="lean-to"/>
    <xs:enumeration value="ridge"  />
  </xs:restriction>
</xs:simpleType>

<!-- cover reference list -->
<xs:complexType name="cover_referencelist_type" >
  <xs:sequence>
    <xs:element name="ref" minOccurs="1" maxOccurs="unbounded" >
        <xs:complexType>
          <xs:sequence>
            <xs:element name="edge" type="edge_type" minOccurs="0" maxOccurs="unbounded" /> <!-- but ONLY LINEs allowed! -->
          </xs:sequence>
          <xs:attribute name="guid" type="guidtype"  use="required" />
          <xs:anyAttribute   processContents="skip"/>
        </xs:complexType>
    </xs:element>
  </xs:sequence>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>


<xs:complexType name="cover_type"> <!-- From FD18 -->
  <xs:sequence>
    <xs:element      name="load_bearing_direction" type="point_type_3d"            minOccurs="0" maxOccurs="1"/>  <!-- valid normal or nullvector if not defined -->
    <xs:element      name="region"                 type="region_type"   />
    <xs:element      name="supporting_structures"  type="cover_referencelist_type" minOccurs="0" maxOccurs="1" /> <!-- From FD19, FD18 used simple referencelist_type -->
  </xs:sequence>
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="name"                   type="identifier"         default="" />  <!-- empty names generates "C0" in FD -->
  <xs:attribute      name="stage"                  type="stage_number"       default="1" /> <!-- From FD21.00.003 -->
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="coverlist_type"> <!-- From FD20.00.002 -->
  <xs:sequence>
    <xs:element      name="cover"                                             minOccurs="5" maxOccurs="6" > <!-- 6 for ridge roofs, 5 for others -->
      <xs:complexType>
        <xs:attribute      name="guid"              type="guidtype"           use="required" />
        <xs:anyAttribute   processContents="skip"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="building_cover_type"> <!-- From FD18 -->
  <xs:sequence>
    <xs:element      name="base_rectangle"         type="rectangle_type"   />
    <xs:element      name="supporting_structures"  type="referencelist_type"  minOccurs="0" maxOccurs="1" />
    <xs:element      name="covers"                 type="coverlist_type"      minOccurs="0" maxOccurs="1" /> <!-- From FD20.00.002 and mandatory from now on! Order: Front, Back, Left, Right, Top (front), Top back -->
  </xs:sequence>
  <xs:attributeGroup ref="entity_attribs" />
  <xs:attribute      name="name"                   type="identifier"          default=""    /> <!-- empty names generates "CO" in FD -->
  <xs:attribute      name="roof_type"              type="roof_type"           default="flat"/>
  <xs:attribute      name="h_wall"                 type="positive_max_10000"  default="6.0" />
  <xs:attribute      name="h_roof"                 type="non_neg_max_10000"   default="1.0" />
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>


<xs:simpleType name="viewtype">
  <xs:restriction base="xs:string">
    <xs:enumeration value="2d"/>
    <xs:enumeration value="3d"/>
    <xs:enumeration value="storey"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="displaymodes">
  <xs:restriction base="xs:string">
    <xs:enumeration value="wireframe"/>
    <xs:enumeration value="hidden_line"/>
    <xs:enumeration value="shade"/>
    <xs:enumeration value="shade_with_edges"/>
  </xs:restriction>
</xs:simpleType>

<xs:complexType name="userfilter_type"> <!-- From FD21 -->
  <xs:sequence>
    <xs:element      name="members"                type="guidlist_type"   />
  </xs:sequence>
  <xs:attribute      name="name"                   type="name15"               use="required"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="view_type"> <!-- From FD21 -->
  <xs:sequence>
    <xs:element      name="coordinate_system_2d"   type="untested_localsys_type" />
    <xs:element      name="coordinate_system_3d"   type="untested_localsys_type" />
    <xs:element      name="user_coordinate_system" type="untested_localsys_type" />
  </xs:sequence>
  <xs:attribute      name="name"                   type="name255"              use="required"/>
  <xs:attribute      name="scale"                  type="material_0base_value" use="required"/>
  <xs:attribute      name="tolerance"              type="material_0base_value" use="required"/>
  <xs:attribute      name="type"                   type="viewtype"             use="required"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<!-- Construction Stages elements -->
<xs:simpleType name="cs_part_type">  <!-- From FD21.00.003 -->
  <xs:restriction base="xs:string">
    <xs:enumeration value="only_in_this_stage"/>
    <xs:enumeration value="from_this_stage_on"/>
    <xs:enumeration value="shifted_from_first_stage"/>
    <xs:enumeration value="only_stage_activated_elem"/>
  </xs:restriction>
</xs:simpleType>

<xs:complexType name="cs_lc_type">   <!-- From FD21.00.003 -->
  <xs:attribute      name="case"                                type="load_case_cs"         use="required"/>
  <xs:attribute      name="factor"                              type="abs_max_1e20"         use="required"/>
  <xs:attribute      name="partitioning"                        type="cs_part_type"         use="required"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="cs_stage_type"> <!-- From FD21.00.003 -->
  <xs:sequence>
    <xs:element      name="activated_load_case"                 type="cs_lc_type"           minOccurs="0" maxOccurs="unbounded" />
  </xs:sequence>
  <xs:attribute      name="description"                         type="name79"               use="required"/>
  <xs:attribute      name="initial_stress_state"                type="xs:boolean"           default="false"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>

<xs:complexType name="cs_type"> <!-- From FD21.00.003 -->
  <xs:sequence>
    <xs:element      name="stage"                               type="cs_stage_type"        minOccurs="2" maxOccurs="unbounded" />
  </xs:sequence>
  <xs:attribute      name="auto-assign_modified_elements"       type="xs:boolean"           default="false"/>
  <xs:attribute      name="auto-assign_newly_created_elements"  type="xs:boolean"           default="false"/>
  <xs:attribute      name="ghost_method"                        type="xs:boolean"           default="false"/>
  <xs:anyAttribute   processContents="skip"/>
</xs:complexType>


<!-- ##  Real data structure ########################################################## -->
  <!--root database-->
  <xs:element name="database">
    <xs:complexType>
      <xs:sequence>

        <!--========  Construction Stages  ======-->
        <xs:element name="construction_stages"  type="cs_type"                                       minOccurs="0" maxOccurs="1" />         <!-- From FD21.00.003 -->

        <xs:element name="entities" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <!-- foundations & soil -->
              <xs:element name="foundations"    type="foundation_type"                               minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="soil_elements"                                                       minOccurs="0" maxOccurs="1" >          <!-- From FD20 -->
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="strata"   type="strata_type"   />
                       <!-- only non-default borehole data required: -->
                    <xs:element name="borehole" type="borehole_type"                                 minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="filling"  type="filling_type"                                  minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="pile"     type="pile_type"                                     minOccurs="0" maxOccurs="unbounded" />
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--general beam: beams, coloumns and trusses -->
              <xs:element name="bar"                              type="bar_type"                    minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="column_corbel"                    type="column_corbel_type"          minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
              <xs:element name="steel_bar_haunch"                 type="stbar_haunch_type"           minOccurs="0" maxOccurs="unbounded" /> <!-- From FD21, for non-shell model bars, but not for trusses  -->
              <xs:element name="steel_bar_stiffener"              type="stbar_siffener_type"         minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20.00.002 -->
              <xs:element name="hidden_bar"                       type="hidden_bar_type"             minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
              <xs:element name="bar_reinforcement"                type="bar_rf_type"                 minOccurs="0" maxOccurs="unbounded" /> <!-- From FD14 -->

              <!--slabs: walls and plates -->
              <xs:element name="slab"                             type="slab_type"                   minOccurs="0" maxOccurs="unbounded" />
              <!-- Important: The shell bucklings should be grouped according to their base shell: do not mix those who do not belong to the same shell! -->
              <xs:element name="shell_buckling"                   type="shell_buckling_type"         minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
              <xs:element name="wall_corbel"                      type="wall_corbel_type"            minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
              <xs:element name="surface_reinforcement_parameters" type="shell_rf_params_type"        minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="surface_reinforcement"            type="surface_rf_type"             minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="punching_area"                    type="punching_area_type"          minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="punching_area_wall"               type="punching_area_wall_type"     minOccurs="0" maxOccurs="unbounded" /> <!-- From FD21 -->
              <xs:element name="punching_reinforcement"           type="punching_reinforcement_type" minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="no-shear_region"                  type="noshear_region_type"         minOccurs="0" maxOccurs="unbounded" /> <!-- From FD19 -->

              <!--panels -->
              <xs:element name="panel"                            type="panel_type"                  minOccurs="0" maxOccurs="unbounded" />

              <!-- ptc -->
              <xs:element name="post-tensioned_cable"             type="ptc_type"                    minOccurs="0" maxOccurs="unbounded" />

              <!--loads-->
              <xs:element name="loads" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <!-- Force loads-->
                    <xs:element name="point_load"                         type="point_load_type"               minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="line_load"                          type="line_load_type"                minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="pressure_load"                      type="pressure_load_type"            minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="surface_load"                       type="surface_load_type"             minOccurs="0" maxOccurs="unbounded" />
                    <!-- Temperature variation loads -->
                    <xs:element name="line_temperature_variation_load"    type="line_temperature_load_type"    minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="surface_temperature_variation_load" type="surface_temperature_load_type" minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <!-- Stress loads -->
                    <xs:element name="line_stress_load"                   type="line_stress_load_type"         minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="surface_stress_load"                type="surface_stress_load_type"      minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <!-- Support motion loads -->
                    <xs:element name="point_support_motion_load"          type="point_support_load_type"       minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="line_support_motion_load"           type="line_support_load_type"        minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="surface_support_motion_load"        type="surface_support_load_type"     minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <!-- Dynamic loads -->
                    <xs:element name="mass"                               type="mass_point_type"               minOccurs="0" maxOccurs="unbounded" /> <!-- From FD19 -->
                    <xs:element name="load_case_mass_conversion_table"    type="mass_conversion_type"          minOccurs="0" maxOccurs="1" />         <!-- From FD19 -->
                    <xs:element name="seismic_load"                       type="seismic_load_type"             minOccurs="0" maxOccurs="1" />         <!-- From FD19 -->
                    <xs:element name="footfall_analysis_data"             type="footfall_type"                 minOccurs="0" maxOccurs="unbounded" /> <!-- From FD19 -->
                    <xs:element name="ground_acceleration"                type="ground_acceleration_type"      minOccurs="0" maxOccurs="1" />         <!-- From FD20-->
                    <xs:element name="excitation_force"                   type="excitation_force_type"         minOccurs="0" maxOccurs="1" />         <!-- From FD20 -->
                    <xs:element name="moving_load"                        type="moving_load_type"              minOccurs="0" maxOccurs="unbounded" /> <!-- From FD19 -->
                    <!-- load container types -->
                    <xs:element name="load_case"                          type="load_case_type"                minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="load_combination"                   type="load_combination_type"         minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="load_group_table"                   type="load_group_table"              minOccurs="0" maxOccurs="1" />         <!-- From FD18 -->
                    <!-- wind load panel types  -->
                    <xs:element name="wind_loads_external_wall"           type="wl_external_wall_type"         minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20.00.002 -->
                    <xs:element name="wind_loads_flat_roof"               type="wl_flat_roof_type"             minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20.00.002 -->
                    <xs:element name="wind_loads_lean-to"                 type="wl_leanto_type"                minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20.00.002 -->
                    <xs:element name="wind_loads_ridge_roof"              type="wl_ridge_roof_type"            minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20.00.002 -->
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--supports-->
              <xs:element name="supports" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="point_support"       type="point_support_type"       minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="line_support"        type="line_support_type"        minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="surface_support"     type="surface_support_type"     minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="stiffness_point"     type="stiffness_point_type"     minOccurs="0" maxOccurs="unbounded" /> <!-- From FD20 -->
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--connections and virtual objects-->
              <xs:element name="advanced-fem" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="connected_points"     type="connected_points_type"    minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="connected_lines"      type="connected_lines_type"     minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="surface_connection"   type="surface_connection_type"  minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="virtual_bar"          type="virtual_bar_type"         minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="virtual_shell"        type="virtual_shell_type"       minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="diaphragm"            type="diaphragm_type"           minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="steel_joint"          type="steel_joint_type"         minOccurs="0" maxOccurs="unbounded" />
                    <xs:element name="cover"                type="cover_type"               minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                    <xs:element name="building_cover"       type="building_cover_type"      minOccurs="0" maxOccurs="unbounded" /> <!-- From FD18 -->
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--Storeys-->
              <xs:element name="storeys" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="storey"               type="storey_type"              minOccurs="1" maxOccurs="unbounded" />
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--Axes-->
              <xs:element name="axes" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="axis"                 type="axis_type"                minOccurs="1" maxOccurs="1024"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!-- Reference planes - from FD17 -->
              <xs:element name="reference_planes" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reference_plane"      type="refplane_type"            minOccurs="1" maxOccurs="unbounded"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!-- Labelled section's geometry - from FD19.00.004 -->
              <xs:element name="labelled_sections_geometry" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="section_geometry"         type="labsecgeom_type"          minOccurs="1" maxOccurs="unbounded"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--TSolids (stand-alone ones only) -->
              <xs:element name="tsolids" minOccurs="0" maxOccurs="1">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="polyhedron"                       type="polyhedron_type"                  minOccurs="1" maxOccurs="unbounded"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--Regions - only for schema compatibility, DO NOT USE! -->
              <xs:element name="regions" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="region"                           type="drawing_region_type"              minOccurs="1" maxOccurs="unbounded" />
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <!--removed entities
              <xs:element name="removed" type="removed_type" minOccurs="0" maxOccurs="unbounded" /> -->
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <!--===========  used library items  ==================================================================-->
        <!--sections-->
        <xs:element name="sections" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="section"         type="section_type"         minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="complex_section" type="complex_section_type" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element> <!-- end of entities -->

        <!--materials-->
        <xs:element name="materials" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="material"         type="material_type"         minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="complex_material" type="complex_material_type" minOccurs="0" maxOccurs="unbounded" /> <!-- NOT IMPLEMENTED YET! -->
            </xs:sequence>
          </xs:complexType>
        </xs:element>

         <!-- rc materials-->
        <xs:element name="reinforcing_materials" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="material" type="rfmaterial_type"               minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

         <!-- composites, from FD 17.000.02 -->
        <xs:element name="composites" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="composite_section" type="composite_data" minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="complex_composite" type="complex_composite_type" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

         <!-- Connection types, from FD18 -->
        <xs:element name="point_connection_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type2"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="point_support_group_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type2"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="line_connection_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type3"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="line_support_group_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type2"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="surface_connection_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type1"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="surface_support_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="rigidity_datalib_type1"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="timber_panel_types" minOccurs="0"> <!-- Orthotropic panels only -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="timberpanel_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="glc_panel_types" minOccurs="0"> <!-- From FD19 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="glcpanel_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="clt_panel_types" minOccurs="0"> <!-- From FD19 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="cltpanel_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="ptc_strand_types" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="ptc_strand_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="vehicle_types" minOccurs="0"> <!-- From FD19 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="vehicle_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="bolt_types" minOccurs="0"> <!-- From FD19 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="predefined_type" type="bolt_lib_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>


        <!--========  Standard CAD geometry elements  ===================================-->
        <xs:element name="geometry" minOccurs="0" maxOccurs="1"> <!-- From FD21 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="curve"              type="curve_type"           minOccurs="0" maxOccurs="unbounded" /> <!-- It is a non-upgradeable item! -->
              <xs:element name="point"              type="point_type"           minOccurs="0" maxOccurs="unbounded" /> <!-- It is a non-upgradeable item! -->
              <xs:element name="region"             type="drawing_region_type"  minOccurs="0" maxOccurs="unbounded" /> <!-- It is a non-upgradeable item! -->
              <xs:element name="solid"              type="solid_type"           minOccurs="0" maxOccurs="unbounded" /> <!-- It is a non-upgradeable item! -->
              <xs:element name="text"               type="text_type"            minOccurs="0" maxOccurs="unbounded" /> <!-- It is a non-upgradeable item! -->

              <xs:element name="linear_dimension"   type="dimline_type"         minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="arc_dimension"      type="dimarc_type"          minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="diameter_dimension" type="dimdiam_type"         minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="radius_dimension"   type="dimradius_type"       minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="angle_dimension"    type="dimangle_type"        minOccurs="0" maxOccurs="unbounded" /> <!-- Works only with items made after FD21! -->
              <xs:element name="level_dimension"    type="dimfloor_type"        minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="line_type"          type="linetype_type"        minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="layer"              type="layer_type"           minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <!--======== User defined lfilters  ================-->
        <xs:element name="user_defined_filter"      type="userfilter_type"      minOccurs="0" maxOccurs="unbounded" /> <!-- From FD21 -->

        <!--======== User defined views  ================-->
        <xs:element name="user_defined_views"                                   minOccurs="0" maxOccurs="1" > <!-- From FD21 -->
          <xs:complexType>
            <xs:sequence>
              <xs:element name="view"               type="view_type"            minOccurs="1" maxOccurs="128" /> <!-- It is a non-upgradeable item! -->
            </xs:sequence>
            <xs:attribute name="actual_view"        type="name255"              use="optional"/>
            <xs:attribute name="physical_view"      type="xs:boolean"           default="false"/>
            <xs:attribute name="display_mode"       type="displaymodes"         default="wireframe"/>
            <xs:anyAttribute   processContents="skip"/>
          </xs:complexType>
        </xs:element>

        <!--=== Remote automation types. NOT IMPLEMENTED YET! - ->
        <!- -request for server solver- ->
        <xs:element name="request" type="request_type" minOccurs="0" maxOccurs="unbounded" />
        <xs:element name="answer"  type="answer_type"  minOccurs="0" maxOccurs="unbounded" />

        <!- -commands for scripting the solvers- ->
        <xs:element name="commands" type="command_type" minOccurs="0" />

        <!- -result of the solutions- ->
        <xs:element name="result" type="result_type" minOccurs="0" />

        <!- -log system: "debug" and "message" for the developer, internal use. Debug works only in DEBUG mode.
        "warning" will appear on a message box, "error" is fatal error, so the database cannot be loaded. - ->
        <xs:element name="log" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="error"   type="log_type"  minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="warning" type="log_type"  minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="message" type="log_type"  minOccurs="0" maxOccurs="unbounded" />
              <xs:element name="debug"   type="log_type"  minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <!- -file names of the modell. It is not necessary to fill - ->
        <xs:element name="filenames" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="file" type="filename_type" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        -->

        <xs:element name="end" type="empty_type" />

        <xs:any minOccurs="0" maxOccurs="unbounded" />
      </xs:sequence>
      <!--==== The header attributes ========================================================================-->
      <!-- The actual struXML version;  should be equal to the schema version the xml file is conformed to -->
      <xs:attribute name="struxml_version" type="versiontype" use="required" />
      <!--source software: name of the StruSoft or 3rd party product what generated this XML file-->
      <xs:attribute name="source_software" type="xs:string" use="required" />
      <!--start_time: the data is partial data, so the oldest entity latest modification date and time is the
      value in UTC. If the current XML contains the whole database, the start_time value is
      "1970-01-01T00:00:00Z". The date and time always in UTC!-->
      <xs:attribute name="start_time"      type="xs:dateTime" use="required" />
      <!--the data is partial data, so the newest entity latest modification date and time is this
      value in UTC. This date and time always in UTC!-->
      <xs:attribute name="end_time"        type="xs:dateTime" use="required" />
      <!--The GUID of the whole database. It is always checked before the update process.-->
      <xs:attribute name="guid"            type="guidtype" use="required" />
      <!--SHA1 hash on sorted GUIDs-->
      <!--http://en.wikipedia.org/wiki/SHA-1-->
      <xs:attribute name="soil_as_solid"   type="xs:boolean" default="false"/>
      <xs:attribute name="hash"            type="hashtype" />                         <!-- not used actually -->
      <!--convert id for Revit connection-->
      <xs:attribute name="convertid"       type="guidtype" default="00000000-0000-0000-0000-000000000000" /> <!-- not used actually -->
      <!--used standard in database-->
      <xs:attribute name="standard"        type="standardtype" default="EC" />
      <xs:attribute name="country"         type="eurocodetype" default="common" />
      <xs:anyAttribute   processContents="skip"/>
    </xs:complexType>
  </xs:element>

</xs:schema>
